var t,e,n,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function i(t){return t&&t.__esModule?t.default:t}var a={},s={},o=r.parcelRequired167;null==o&&((o=function(t){if(t in a)return a[t].exports;if(t in s){var e=s[t];delete s[t];var n={id:t,exports:{}};return a[t]=n,e.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(t,e){s[t]=e},r.parcelRequired167=o),(0,o.register)("kEUo3",function(t,e){(function(){var n,i="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",o=1/0,u=0/0,l=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],h="[object Arguments]",c="[object Array]",f="[object Boolean]",d="[object Date]",p="[object Error]",m="[object Function]",v="[object GeneratorFunction]",g="[object Map]",y="[object Number]",b="[object Object]",w="[object Promise]",k="[object RegExp]",_="[object Set]",C="[object String]",A="[object Symbol]",x="[object WeakMap]",S="[object ArrayBuffer]",P="[object DataView]",I="[object Float32Array]",E="[object Float64Array]",M="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",R="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",D="[object Uint32Array]",B=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,W=/(__e\(.*?\)|\b__t\)) \+\n'';/g,F=/&(?:amp|lt|gt|quot|#39);/g,U=/[&<>"']/g,V=RegExp(F.source),N=RegExp(U.source),H=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,q=/<%=([\s\S]+?)%>/g,G=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,Z=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y=/[\\^$.*+?()[\]{}|]/g,Q=RegExp(Y.source),J=/^\s+/,K=/\s/,tt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,te=/\{\n\/\* \[wrapped with (.+)\] \*/,tn=/,? & /,tr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ti=/[()=,{}\[\]\/\s]/,ta=/\\(\\)?/g,ts=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,to=/\w*$/,tu=/^[-+]0x[0-9a-f]+$/i,tl=/^0b[01]+$/i,th=/^\[object .+?Constructor\]$/,tc=/^0o[0-7]+$/i,tf=/^(?:0|[1-9]\d*)$/,td=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tp=/($^)/,tm=/['\n\r\u2028\u2029\\]/g,tv="\ud800-\udfff",tg="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ty="\\u2700-\\u27bf",tb="a-z\\xdf-\\xf6\\xf8-\\xff",tw="A-Z\\xc0-\\xd6\\xd8-\\xde",tk="\\ufe0e\\ufe0f",t_="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tC="['’]",tA="["+t_+"]",tx="["+tg+"]",tS="["+tb+"]",tP="[^"+tv+t_+"\\d+"+ty+tb+tw+"]",tI="\ud83c[\udffb-\udfff]",tE="[^"+tv+"]",tM="(?:\ud83c[\udde6-\uddff]){2}",tO="[\ud800-\udbff][\udc00-\udfff]",tL="["+tw+"]",tR="\\u200d",tT="(?:"+tS+"|"+tP+")",tj="(?:"+tL+"|"+tP+")",tD="(?:"+tC+"(?:d|ll|m|re|s|t|ve))?",tB="(?:"+tC+"(?:D|LL|M|RE|S|T|VE))?",tz="(?:"+tx+"|"+tI+")?",tW="["+tk+"]?",tF="(?:"+tR+"(?:"+[tE,tM,tO].join("|")+")"+tW+tz+")*",tU=tW+tz+tF,tV="(?:"+["["+ty+"]",tM,tO].join("|")+")"+tU,tN="(?:"+[tE+tx+"?",tx,tM,tO,"["+tv+"]"].join("|")+")",tH=RegExp(tC,"g"),tX=RegExp(tx,"g"),tq=RegExp(tI+"(?="+tI+")|"+tN+tU,"g"),tG=RegExp([tL+"?"+tS+"+"+tD+"(?="+[tA,tL,"$"].join("|")+")",tj+"+"+tB+"(?="+[tA,tL+tT,"$"].join("|")+")",tL+"?"+tT+"+"+tD,tL+"+"+tB,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",tV].join("|"),"g"),t$=RegExp("["+tR+tv+tg+tk+"]"),tZ=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tY=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tQ=-1,tJ={};tJ[I]=tJ[E]=tJ[M]=tJ[O]=tJ[L]=tJ[R]=tJ[T]=tJ[j]=tJ[D]=!0,tJ[h]=tJ[c]=tJ[S]=tJ[f]=tJ[P]=tJ[d]=tJ[p]=tJ[m]=tJ[g]=tJ[y]=tJ[b]=tJ[k]=tJ[_]=tJ[C]=tJ[x]=!1;var tK={};tK[h]=tK[c]=tK[S]=tK[P]=tK[f]=tK[d]=tK[I]=tK[E]=tK[M]=tK[O]=tK[L]=tK[g]=tK[y]=tK[b]=tK[k]=tK[_]=tK[C]=tK[A]=tK[R]=tK[T]=tK[j]=tK[D]=!0,tK[p]=tK[m]=tK[x]=!1;var t0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},t1=parseFloat,t2=parseInt,t6="object"==typeof r&&r&&r.Object===Object&&r,t3="object"==typeof self&&self&&self.Object===Object&&self,t7=t6||t3||Function("return this")(),t4=e&&!e.nodeType&&e,t8=t4&&t&&!t.nodeType&&t,t5=t8&&t8.exports===t4,t9=t5&&t6.process,et=function(){try{var t=t8&&t8.require&&t8.require("util").types;if(t)return t;return t9&&t9.binding&&t9.binding("util")}catch(t){}}(),ee=et&&et.isArrayBuffer,en=et&&et.isDate,er=et&&et.isMap,ei=et&&et.isRegExp,ea=et&&et.isSet,es=et&&et.isTypedArray;function eo(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function eu(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var s=t[i];e(r,s,n(s),t)}return r}function el(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function eh(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ec(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var s=t[n];e(s,n,t)&&(a[i++]=s)}return a}function ef(t,e){return!!(null==t?0:t.length)&&e_(t,e,0)>-1}function ed(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ep(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function em(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function ev(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function eg(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ey(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var eb=eS("length");function ew(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function ek(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return -1}function e_(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return -1}(t,e,n):ek(t,eA,n)}function eC(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return -1}function eA(t){return t!=t}function ex(t,e){var n=null==t?0:t.length;return n?eE(t,e)/n:u}function eS(t){return function(e){return null==e?n:e[t]}}function eP(t){return function(e){return null==t?n:t[e]}}function eI(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function eE(t,e){for(var r,i=-1,a=t.length;++i<a;){var s=e(t[i]);s!==n&&(r=r===n?s:r+s)}return r}function eM(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function eO(t){return t?t.slice(0,eG(t)+1).replace(J,""):t}function eL(t){return function(e){return t(e)}}function eR(t,e){return ep(e,function(e){return t[e]})}function eT(t,e){return t.has(e)}function ej(t,e){for(var n=-1,r=t.length;++n<r&&e_(e,t[n],0)>-1;);return n}function eD(t,e){for(var n=t.length;n--&&e_(e,t[n],0)>-1;);return n}var eB=eP({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),ez=eP({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function eW(t){return"\\"+t0[t]}function eF(t){return t$.test(t)}function eU(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function eV(t,e){return function(n){return t(e(n))}}function eN(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];(o===e||o===s)&&(t[n]=s,a[i++]=n)}return a}function eH(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function eX(t){return eF(t)?function(t){for(var e=tq.lastIndex=0;tq.test(t);)++e;return e}(t):eb(t)}function eq(t){return eF(t)?t.match(tq)||[]:t.split("")}function eG(t){for(var e=t.length;e--&&K.test(t.charAt(e)););return e}var e$=eP({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),eZ=function t(e){var r,K,tv,tg,ty=(e=null==e?t7:eZ.defaults(t7.Object(),e,eZ.pick(t7,tY))).Array,tb=e.Date,tw=e.Error,tk=e.Function,t_=e.Math,tC=e.Object,tA=e.RegExp,tx=e.String,tS=e.TypeError,tP=ty.prototype,tI=tk.prototype,tE=tC.prototype,tM=e["__core-js_shared__"],tO=tI.toString,tL=tE.hasOwnProperty,tR=0,tT=(r=/[^.]+$/.exec(tM&&tM.keys&&tM.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",tj=tE.toString,tD=tO.call(tC),tB=t7._,tz=tA("^"+tO.call(tL).replace(Y,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tW=t5?e.Buffer:n,tF=e.Symbol,tU=e.Uint8Array,tV=tW?tW.allocUnsafe:n,tN=eV(tC.getPrototypeOf,tC),tq=tC.create,t$=tE.propertyIsEnumerable,t0=tP.splice,t6=tF?tF.isConcatSpreadable:n,t3=tF?tF.iterator:n,t4=tF?tF.toStringTag:n,t8=function(){try{var t=ip(tC,"defineProperty");return t({},"",{}),t}catch(t){}}(),t9=e.clearTimeout!==t7.clearTimeout&&e.clearTimeout,et=tb&&tb.now!==t7.Date.now&&tb.now,eb=e.setTimeout!==t7.setTimeout&&e.setTimeout,eP=t_.ceil,eY=t_.floor,eQ=tC.getOwnPropertySymbols,eJ=tW?tW.isBuffer:n,eK=e.isFinite,e0=tP.join,e1=eV(tC.keys,tC),e2=t_.max,e6=t_.min,e3=tb.now,e7=e.parseInt,e4=t_.random,e8=tP.reverse,e5=ip(e,"DataView"),e9=ip(e,"Map"),nt=ip(e,"Promise"),ne=ip(e,"Set"),nn=ip(e,"WeakMap"),nr=ip(tC,"create"),ni=nn&&new nn,na={},ns=iW(e5),no=iW(e9),nu=iW(nt),nl=iW(ne),nh=iW(nn),nc=tF?tF.prototype:n,nf=nc?nc.valueOf:n,nd=nc?nc.toString:n;function np(t){if(aq(t)&&!aj(t)&&!(t instanceof ny)){if(t instanceof ng)return t;if(tL.call(t,"__wrapped__"))return iF(t)}return new ng(t)}var nm=function(){function t(){}return function(e){if(!aX(e))return{};if(tq)return tq(e);t.prototype=e;var r=new t;return t.prototype=n,r}}();function nv(){}function ng(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function ny(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=0xffffffff,this.__views__=[]}function nb(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nw(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nk(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function n_(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new nk;++e<n;)this.add(t[e])}function nC(t){var e=this.__data__=new nw(t);this.size=e.size}function nA(t,e){var n=aj(t),r=!n&&aT(t),i=!n&&!r&&aW(t),a=!n&&!r&&!i&&a0(t),s=n||r||i||a,o=s?eM(t.length,tx):[],u=o.length;for(var l in t)(e||tL.call(t,l))&&!(s&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ik(l,u)))&&o.push(l);return o}function nx(t){var e=t.length;return e?t[rl(0,e-1)]:n}function nS(t,e,r){(r===n||aO(t[e],r))&&(r!==n||e in t)||nO(t,e,r)}function nP(t,e,r){var i=t[e];tL.call(t,e)&&aO(i,r)&&(r!==n||e in t)||nO(t,e,r)}function nI(t,e){for(var n=t.length;n--;)if(aO(t[n][0],e))return n;return -1}function nE(t,e,n,r){return nz(t,function(t,i,a){e(r,t,n(t),a)}),r}function nM(t,e){return t&&rU(e,sf(e),t)}function nO(t,e,n){"__proto__"==e&&t8?t8(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function nL(t,e){for(var r=-1,i=e.length,a=ty(i),s=null==t;++r<i;)a[r]=s?n:so(t,e[r]);return a}function nR(t,e,r){return t==t&&(r!==n&&(t=t<=r?t:r),e!==n&&(t=t>=e?t:e)),t}function nT(t,e,r,i,a,s){var o,u=1&e,l=2&e,c=4&e;if(r&&(o=a?r(t,i,a,s):r(t)),o!==n)return o;if(!aX(t))return t;var p=aj(t);if(p){if(w=t.length,x=new t.constructor(w),w&&"string"==typeof t[0]&&tL.call(t,"index")&&(x.index=t.index,x.input=t.input),o=x,!u)return rF(t,o)}else{var w,x,B,z,W,F=ig(t),U=F==m||F==v;if(aW(t))return rT(t,u);if(F==b||F==h||U&&!a){if(o=l||U?{}:ib(t),!u)return l?(B=(W=o)&&rU(t,sd(t),W),rU(t,iv(t),B)):(z=nM(o,t),rU(t,im(t),z))}else{if(!tK[F])return a?t:{};o=function(t,e,n){var r,i,a=t.constructor;switch(e){case S:return rj(t);case f:case d:return new a(+t);case P:return r=n?rj(t.buffer):t.buffer,new t.constructor(r,t.byteOffset,t.byteLength);case I:case E:case M:case O:case L:case R:case T:case j:case D:return rD(t,n);case g:return new a;case y:case C:return new a(t);case k:return(i=new t.constructor(t.source,to.exec(t))).lastIndex=t.lastIndex,i;case _:return new a;case A:return nf?tC(nf.call(t)):{}}}(t,F,u)}}s||(s=new nC);var V=s.get(t);if(V)return V;s.set(t,o),aQ(t)?t.forEach(function(n){o.add(nT(n,e,r,n,t,s))}):aG(t)&&t.forEach(function(n,i){o.set(i,nT(n,e,r,i,t,s))});var N=c?l?is:ia:l?sd:sf,H=p?n:N(t);return el(H||t,function(n,i){H&&(n=t[i=n]),nP(o,i,nT(n,e,r,i,t,s))}),o}function nj(t,e,r){var i=r.length;if(null==t)return!i;for(t=tC(t);i--;){var a=r[i],s=e[a],o=t[a];if(o===n&&!(a in t)||!s(o))return!1}return!0}function nD(t,e,r){if("function"!=typeof t)throw new tS(i);return iL(function(){t.apply(n,r)},e)}function nB(t,e,n,r){var i=-1,a=ef,s=!0,o=t.length,u=[],l=e.length;if(!o)return u;n&&(e=ep(e,eL(n))),r?(a=ed,s=!1):e.length>=200&&(a=eT,s=!1,e=new n_(e));t:for(;++i<o;){var h=t[i],c=null==n?h:n(h);if(h=r||0!==h?h:0,s&&c==c){for(var f=l;f--;)if(e[f]===c)continue t;u.push(h)}else a(e,c,r)||u.push(h)}return u}np.templateSettings={escape:H,evaluate:X,interpolate:q,variable:"",imports:{_:np}},np.prototype=nv.prototype,np.prototype.constructor=np,ng.prototype=nm(nv.prototype),ng.prototype.constructor=ng,ny.prototype=nm(nv.prototype),ny.prototype.constructor=ny,nb.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},nb.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nb.prototype.get=function(t){var e=this.__data__;if(nr){var r=e[t];return r===a?n:r}return tL.call(e,t)?e[t]:n},nb.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==n:tL.call(e,t)},nb.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=nr&&e===n?a:e,this},nw.prototype.clear=function(){this.__data__=[],this.size=0},nw.prototype.delete=function(t){var e=this.__data__,n=nI(e,t);return!(n<0)&&(n==e.length-1?e.pop():t0.call(e,n,1),--this.size,!0)},nw.prototype.get=function(t){var e=this.__data__,r=nI(e,t);return r<0?n:e[r][1]},nw.prototype.has=function(t){return nI(this.__data__,t)>-1},nw.prototype.set=function(t,e){var n=this.__data__,r=nI(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},nk.prototype.clear=function(){this.size=0,this.__data__={hash:new nb,map:new(e9||nw),string:new nb}},nk.prototype.delete=function(t){var e=ic(this,t).delete(t);return this.size-=e?1:0,e},nk.prototype.get=function(t){return ic(this,t).get(t)},nk.prototype.has=function(t){return ic(this,t).has(t)},nk.prototype.set=function(t,e){var n=ic(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},n_.prototype.add=n_.prototype.push=function(t){return this.__data__.set(t,a),this},n_.prototype.has=function(t){return this.__data__.has(t)},nC.prototype.clear=function(){this.__data__=new nw,this.size=0},nC.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},nC.prototype.get=function(t){return this.__data__.get(t)},nC.prototype.has=function(t){return this.__data__.has(t)},nC.prototype.set=function(t,e){var n=this.__data__;if(n instanceof nw){var r=n.__data__;if(!e9||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new nk(r)}return n.set(t,e),this.size=n.size,this};var nz=rH(nq),nW=rH(nG,!0);function nF(t,e){var n=!0;return nz(t,function(t,r,i){return n=!!e(t,r,i)}),n}function nU(t,e,r){for(var i=-1,a=t.length;++i<a;){var s=t[i],o=e(s);if(null!=o&&(u===n?o==o&&!aK(o):r(o,u)))var u=o,l=s}return l}function nV(t,e){var n=[];return nz(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function nN(t,e,n,r,i){var a=-1,s=t.length;for(n||(n=iw),i||(i=[]);++a<s;){var o=t[a];e>0&&n(o)?e>1?nN(o,e-1,n,r,i):em(i,o):r||(i[i.length]=o)}return i}var nH=rX(),nX=rX(!0);function nq(t,e){return t&&nH(t,e,sf)}function nG(t,e){return t&&nX(t,e,sf)}function n$(t,e){return ec(e,function(e){return aV(t[e])})}function nZ(t,e){e=rO(e,t);for(var r=0,i=e.length;null!=t&&r<i;)t=t[iz(e[r++])];return r&&r==i?t:n}function nY(t,e,n){var r=e(t);return aj(t)?r:em(r,n(t))}function nQ(t){return null==t?t===n?"[object Undefined]":"[object Null]":t4&&t4 in tC(t)?function(t){var e=tL.call(t,t4),r=t[t4];try{t[t4]=n;var i=!0}catch(t){}var a=tj.call(t);return i&&(e?t[t4]=r:delete t[t4]),a}(t):tj.call(t)}function nJ(t,e){return t>e}function nK(t,e){return null!=t&&tL.call(t,e)}function n0(t,e){return null!=t&&e in tC(t)}function n1(t,e,r){for(var i=r?ed:ef,a=t[0].length,s=t.length,o=s,u=ty(s),l=1/0,h=[];o--;){var c=t[o];o&&e&&(c=ep(c,eL(e))),l=e6(c.length,l),u[o]=!r&&(e||a>=120&&c.length>=120)?new n_(o&&c):n}c=t[0];var f=-1,d=u[0];t:for(;++f<a&&h.length<l;){var p=c[f],m=e?e(p):p;if(p=r||0!==p?p:0,!(d?eT(d,m):i(h,m,r))){for(o=s;--o;){var v=u[o];if(!(v?eT(v,m):i(t[o],m,r)))continue t}d&&d.push(m),h.push(p)}}return h}function n2(t,e,r){e=rO(e,t);var i=null==(t=iE(t,e))?t:t[iz(iQ(e))];return null==i?n:eo(i,t,r)}function n6(t){return aq(t)&&nQ(t)==h}function n3(t,e,r,i,a){return t===e||(null!=t&&null!=e&&(aq(t)||aq(e))?function(t,e,r,i,a,s){var o=aj(t),u=aj(e),l=o?c:ig(t),m=u?c:ig(e);l=l==h?b:l,m=m==h?b:m;var v=l==b,w=m==b,x=l==m;if(x&&aW(t)){if(!aW(e))return!1;o=!0,v=!1}if(x&&!v)return s||(s=new nC),o||a0(t)?ir(t,e,r,i,a,s):function(t,e,n,r,i,a,s){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case S:if(t.byteLength!=e.byteLength||!a(new tU(t),new tU(e)))break;return!0;case f:case d:case y:return aO(+t,+e);case p:return t.name==e.name&&t.message==e.message;case k:case C:return t==e+"";case g:var o=eU;case _:var u=1&r;if(o||(o=eH),t.size!=e.size&&!u)break;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var h=ir(o(t),o(e),r,i,a,s);return s.delete(t),h;case A:if(nf)return nf.call(t)==nf.call(e)}return!1}(t,e,l,r,i,a,s);if(!(1&r)){var I=v&&tL.call(t,"__wrapped__"),E=w&&tL.call(e,"__wrapped__");if(I||E){var M=I?t.value():t,O=E?e.value():e;return s||(s=new nC),a(M,O,r,i,s)}}return!!x&&(s||(s=new nC),function(t,e,r,i,a,s){var o=1&r,u=ia(t),l=u.length;if(l!=ia(e).length&&!o)return!1;for(var h=l;h--;){var c=u[h];if(!(o?c in e:tL.call(e,c)))return!1}var f=s.get(t),d=s.get(e);if(f&&d)return f==e&&d==t;var p=!0;s.set(t,e),s.set(e,t);for(var m=o;++h<l;){var v=t[c=u[h]],g=e[c];if(i)var y=o?i(g,v,c,e,t,s):i(v,g,c,t,e,s);if(!(y===n?v===g||a(v,g,r,i,s):y)){p=!1;break}m||(m="constructor"==c)}if(p&&!m){var b=t.constructor,w=e.constructor;b!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w)&&(p=!1)}return s.delete(t),s.delete(e),p}(t,e,r,i,a,s))}(t,e,r,i,n3,a):t!=t&&e!=e)}function n7(t,e,r,i){var a=r.length,s=a,o=!i;if(null==t)return!s;for(t=tC(t);a--;){var u=r[a];if(o&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<s;){var l=(u=r[a])[0],h=t[l],c=u[1];if(o&&u[2]){if(h===n&&!(l in t))return!1}else{var f=new nC;if(i)var d=i(h,c,l,t,e,f);if(!(d===n?n3(c,h,3,i,f):d))return!1}}return!0}function n4(t){return!(!aX(t)||tT&&tT in t)&&(aV(t)?tz:th).test(iW(t))}function n8(t){return"function"==typeof t?t:null==t?sz:"object"==typeof t?aj(t)?rn(t[0],t[1]):re(t):sG(t)}function n5(t){if(!iS(t))return e1(t);var e=[];for(var n in tC(t))tL.call(t,n)&&"constructor"!=n&&e.push(n);return e}function n9(t,e){return t<e}function rt(t,e){var n=-1,r=aB(t)?ty(t.length):[];return nz(t,function(t,i,a){r[++n]=e(t,i,a)}),r}function re(t){var e=id(t);return 1==e.length&&e[0][2]?iP(e[0][0],e[0][1]):function(n){return n===t||n7(n,t,e)}}function rn(t,e){var r;return iC(t)&&(r=e)==r&&!aX(r)?iP(iz(t),e):function(r){var i=so(r,t);return i===n&&i===e?su(r,t):n3(e,i,3)}}function rr(t,e,r,i,a){t!==e&&nH(e,function(s,o){if(a||(a=new nC),aX(s))(function(t,e,r,i,a,s,o){var u=iM(t,r),l=iM(e,r),h=o.get(l);if(h){nS(t,r,h);return}var c=s?s(u,l,r+"",t,e,o):n,f=c===n;if(f){var d=aj(l),p=!d&&aW(l),m=!d&&!p&&a0(l);c=l,d||p||m?aj(u)?c=u:az(u)?c=rF(u):p?(f=!1,c=rT(l,!0)):m?(f=!1,c=rD(l,!0)):c=[]:aZ(l)||aT(l)?(c=u,aT(u)?c=a5(u):(!aX(u)||aV(u))&&(c=ib(l))):f=!1}f&&(o.set(l,c),a(c,l,i,s,o),o.delete(l)),nS(t,r,c)})(t,e,o,r,rr,i,a);else{var u=i?i(iM(t,o),s,o+"",t,e,a):n;u===n&&(u=s),nS(t,o,u)}},sd)}function ri(t,e){var r=t.length;if(r)return ik(e+=e<0?r:0,r)?t[e]:n}function ra(t,e,n){e=e.length?ep(e,function(t){return aj(t)?function(e){return nZ(e,1===t.length?t[0]:t)}:t}):[sz];var r=-1;return e=ep(e,eL(ih())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(rt(t,function(t,n,i){return{criteria:ep(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,o=n.length;++r<s;){var u=rB(i[r],a[r]);if(u){if(r>=o)return u;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}(t,e,n)})}function rs(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var s=e[r],o=nZ(t,s);n(o,s)&&rf(a,rO(s,t),o)}return a}function ro(t,e,n,r){var i=r?eC:e_,a=-1,s=e.length,o=t;for(t===e&&(e=rF(e)),n&&(o=ep(t,eL(n)));++a<s;)for(var u=0,l=e[a],h=n?n(l):l;(u=i(o,h,u,r))>-1;)o!==t&&t0.call(o,u,1),t0.call(t,u,1);return t}function ru(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;ik(i)?t0.call(t,i,1):rC(t,i)}}return t}function rl(t,e){return t+eY(e4()*(e-t+1))}function rh(t,e){var n="";if(!t||e<1||e>0x1fffffffffffff)return n;do e%2&&(n+=t),(e=eY(e/2))&&(t+=t);while(e)return n}function rc(t,e){return iR(iI(t,e,sz),t+"")}function rf(t,e,r,i){if(!aX(t))return t;e=rO(e,t);for(var a=-1,s=e.length,o=s-1,u=t;null!=u&&++a<s;){var l=iz(e[a]),h=r;if("__proto__"===l||"constructor"===l||"prototype"===l)break;if(a!=o){var c=u[l];(h=i?i(c,l,u):n)===n&&(h=aX(c)?c:ik(e[a+1])?[]:{})}nP(u,l,h),u=u[l]}return t}var rd=ni?function(t,e){return ni.set(t,e),t}:sz,rp=t8?function(t,e){return t8(t,"toString",{configurable:!0,enumerable:!1,value:sj(e),writable:!0})}:sz;function rm(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=ty(i);++r<i;)a[r]=t[r+e];return a}function rv(t,e){var n;return nz(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function rg(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=0x7fffffff){for(;r<i;){var a=r+i>>>1,s=t[a];null!==s&&!aK(s)&&(n?s<=e:s<e)?r=a+1:i=a}return i}return ry(t,e,sz,n)}function ry(t,e,r,i){var a=0,s=null==t?0:t.length;if(0===s)return 0;for(var o=(e=r(e))!=e,u=null===e,l=aK(e),h=e===n;a<s;){var c=eY((a+s)/2),f=r(t[c]),d=f!==n,p=null===f,m=f==f,v=aK(f);if(o)var g=i||m;else g=h?m&&(i||d):u?m&&d&&(i||!p):l?m&&d&&!p&&(i||!v):!p&&!v&&(i?f<=e:f<e);g?a=c+1:s=c}return e6(s,0xfffffffe)}function rb(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var s=t[n],o=e?e(s):s;if(!n||!aO(o,u)){var u=o;a[i++]=0===s?0:s}}return a}function rw(t){return"number"==typeof t?t:aK(t)?u:+t}function rk(t){if("string"==typeof t)return t;if(aj(t))return ep(t,rk)+"";if(aK(t))return nd?nd.call(t):"";var e=t+"";return"0"==e&&1/t==-o?"-0":e}function r_(t,e,n){var r=-1,i=ef,a=t.length,s=!0,o=[],u=o;if(n)s=!1,i=ed;else if(a>=200){var l=e?null:r4(t);if(l)return eH(l);s=!1,i=eT,u=new n_}else u=e?[]:o;t:for(;++r<a;){var h=t[r],c=e?e(h):h;if(h=n||0!==h?h:0,s&&c==c){for(var f=u.length;f--;)if(u[f]===c)continue t;e&&u.push(c),o.push(h)}else i(u,c,n)||(u!==o&&u.push(c),o.push(h))}return o}function rC(t,e){return e=rO(e,t),null==(t=iE(t,e))||delete t[iz(iQ(e))]}function rA(t,e,n,r){return rf(t,e,n(nZ(t,e)),r)}function rx(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?rm(t,r?0:a,r?a+1:i):rm(t,r?a+1:0,r?i:a)}function rS(t,e){var n=t;return n instanceof ny&&(n=n.value()),ev(e,function(t,e){return e.func.apply(e.thisArg,em([t],e.args))},n)}function rP(t,e,n){var r=t.length;if(r<2)return r?r_(t[0]):[];for(var i=-1,a=ty(r);++i<r;)for(var s=t[i],o=-1;++o<r;)o!=i&&(a[i]=nB(a[i]||s,t[o],e,n));return r_(nN(a,1),e,n)}function rI(t,e,r){for(var i=-1,a=t.length,s=e.length,o={};++i<a;){var u=i<s?e[i]:n;r(o,t[i],u)}return o}function rE(t){return az(t)?t:[]}function rM(t){return"function"==typeof t?t:sz}function rO(t,e){return aj(t)?t:iC(t,e)?[t]:iB(a9(t))}function rL(t,e,r){var i=t.length;return r=r===n?i:r,!e&&r>=i?t:rm(t,e,r)}var rR=t9||function(t){return t7.clearTimeout(t)};function rT(t,e){if(e)return t.slice();var n=t.length,r=tV?tV(n):new t.constructor(n);return t.copy(r),r}function rj(t){var e=new t.constructor(t.byteLength);return new tU(e).set(new tU(t)),e}function rD(t,e){var n=e?rj(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function rB(t,e){if(t!==e){var r=t!==n,i=null===t,a=t==t,s=aK(t),o=e!==n,u=null===e,l=e==e,h=aK(e);if(!u&&!h&&!s&&t>e||s&&o&&l&&!u&&!h||i&&o&&l||!r&&l||!a)return 1;if(!i&&!s&&!h&&t<e||h&&r&&a&&!i&&!s||u&&r&&a||!o&&a||!l)return -1}return 0}function rz(t,e,n,r){for(var i=-1,a=t.length,s=n.length,o=-1,u=e.length,l=e2(a-s,0),h=ty(u+l),c=!r;++o<u;)h[o]=e[o];for(;++i<s;)(c||i<a)&&(h[n[i]]=t[i]);for(;l--;)h[o++]=t[i++];return h}function rW(t,e,n,r){for(var i=-1,a=t.length,s=-1,o=n.length,u=-1,l=e.length,h=e2(a-o,0),c=ty(h+l),f=!r;++i<h;)c[i]=t[i];for(var d=i;++u<l;)c[d+u]=e[u];for(;++s<o;)(f||i<a)&&(c[d+n[s]]=t[i++]);return c}function rF(t,e){var n=-1,r=t.length;for(e||(e=ty(r));++n<r;)e[n]=t[n];return e}function rU(t,e,r,i){var a=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var u=e[s],l=i?i(r[u],t[u],u,r,t):n;l===n&&(l=t[u]),a?nO(r,u,l):nP(r,u,l)}return r}function rV(t,e){return function(n,r){var i=aj(n)?eu:nE,a=e?e():{};return i(n,t,ih(r,2),a)}}function rN(t){return rc(function(e,r){var i=-1,a=r.length,s=a>1?r[a-1]:n,o=a>2?r[2]:n;for(s=t.length>3&&"function"==typeof s?(a--,s):n,o&&i_(r[0],r[1],o)&&(s=a<3?n:s,a=1),e=tC(e);++i<a;){var u=r[i];u&&t(e,u,i,s)}return e})}function rH(t,e){return function(n,r){if(null==n)return n;if(!aB(n))return t(n,r);for(var i=n.length,a=e?i:-1,s=tC(n);(e?a--:++a<i)&&!1!==r(s[a],a,s););return n}}function rX(t){return function(e,n,r){for(var i=-1,a=tC(e),s=r(e),o=s.length;o--;){var u=s[t?o:++i];if(!1===n(a[u],u,a))break}return e}}function rq(t){return function(e){var r=eF(e=a9(e))?eq(e):n,i=r?r[0]:e.charAt(0),a=r?rL(r,1).join(""):e.slice(1);return i[t]()+a}}function rG(t){return function(e){return ev(sL(sA(e).replace(tH,"")),t,"")}}function r$(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=nm(t.prototype),r=t.apply(n,e);return aX(r)?r:n}}function rZ(t){return function(e,r,i){var a=tC(e);if(!aB(e)){var s=ih(r,3);e=sf(e),r=function(t){return s(a[t],t,a)}}var o=t(e,r,i);return o>-1?a[s?e[o]:o]:n}}function rY(t){return ii(function(e){var r=e.length,a=r,s=ng.prototype.thru;for(t&&e.reverse();a--;){var o=e[a];if("function"!=typeof o)throw new tS(i);if(s&&!u&&"wrapper"==iu(o))var u=new ng([],!0)}for(a=u?a:r;++a<r;){var l=iu(o=e[a]),h="wrapper"==l?io(o):n;u=h&&iA(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?u[iu(h[0])].apply(u,h[3]):1==o.length&&iA(o)?u[l]():u.thru(o)}return function(){var t=arguments,n=t[0];if(u&&1==t.length&&aj(n))return u.plant(n).value();for(var i=0,a=r?e[i].apply(this,t):n;++i<r;)a=e[i].call(this,a);return a}})}function rQ(t,e,r,i,a,s,o,u,l,h){var c=128&e,f=1&e,d=2&e,p=24&e,m=512&e,v=d?n:r$(t);return function g(){for(var y=arguments.length,b=ty(y),w=y;w--;)b[w]=arguments[w];if(p)var k=il(g),_=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(b,k);if(i&&(b=rz(b,i,a,p)),s&&(b=rW(b,s,o,p)),y-=_,p&&y<h){var C=eN(b,k);return r3(t,e,rQ,g.placeholder,r,b,C,u,l,h-y)}var A=f?r:this,x=d?A[t]:t;return y=b.length,u?b=function(t,e){for(var r=t.length,i=e6(e.length,r),a=rF(t);i--;){var s=e[i];t[i]=ik(s,r)?a[s]:n}return t}(b,u):m&&y>1&&b.reverse(),c&&l<y&&(b.length=l),this&&this!==t7&&this instanceof g&&(x=v||r$(x)),x.apply(A,b)}}function rJ(t,e){return function(n,r){var i,a;return i=e(r),a={},nq(n,function(e,n,r){t(a,i(e),n,r)}),a}}function rK(t,e){return function(r,i){var a;if(r===n&&i===n)return e;if(r!==n&&(a=r),i!==n){if(a===n)return i;"string"==typeof r||"string"==typeof i?(r=rk(r),i=rk(i)):(r=rw(r),i=rw(i)),a=t(r,i)}return a}}function r0(t){return ii(function(e){return e=ep(e,eL(ih())),rc(function(n){var r=this;return t(e,function(t){return eo(t,r,n)})})})}function r1(t,e){var r=(e=e===n?" ":rk(e)).length;if(r<2)return r?rh(e,t):e;var i=rh(e,eP(t/eX(e)));return eF(e)?rL(eq(i),0,t).join(""):i.slice(0,t)}function r2(t){return function(e,r,i){return i&&"number"!=typeof i&&i_(e,r,i)&&(r=i=n),e=a3(e),r===n?(r=e,e=0):r=a3(r),i=i===n?e<r?1:-1:a3(i),function(t,e,n,r){for(var i=-1,a=e2(eP((e-t)/(n||1)),0),s=ty(a);a--;)s[r?a:++i]=t,t+=n;return s}(e,r,i,t)}}function r6(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=a8(e),n=a8(n)),t(e,n)}}function r3(t,e,r,i,a,s,o,u,l,h){var c=8&e,f=c?o:n,d=c?n:o,p=c?s:n,m=c?n:s;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);var v=[t,e,a,p,f,m,d,u,l,h],g=r.apply(n,v);return iA(t)&&iO(g,v),g.placeholder=i,iT(g,t,e)}function r7(t){var e=t_[t];return function(t,n){if(t=a8(t),(n=null==n?0:e6(a7(n),292))&&eK(t)){var r=(a9(t)+"e").split("e");return+((r=(a9(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var r4=ne&&1/eH(new ne([,-0]))[1]==o?function(t){return new ne(t)}:sN;function r8(t){return function(e){var n,r,i=ig(e);return i==g?eU(e):i==_?(n=-1,r=Array(e.size),e.forEach(function(t){r[++n]=[t,t]}),r):ep(t(e),function(t){return[t,e[t]]})}}function r5(t,e,r,a,o,u,l,h){var c=2&e;if(!c&&"function"!=typeof t)throw new tS(i);var f=a?a.length:0;if(f||(e&=-97,a=o=n),l=l===n?l:e2(a7(l),0),h=h===n?h:a7(h),f-=o?o.length:0,64&e){var d=a,p=o;a=o=n}var m=c?n:io(t),v=[t,e,r,a,o,d,p,u,l,h];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<131,o=128==r&&8==n||128==r&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(a||o){1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var l=t[3];t[3]=l?rz(l,u,e[4]):u,t[4]=l?eN(t[3],s):e[4]}(u=e[5])&&(l=t[5],t[5]=l?rW(l,u,e[6]):u,t[6]=l?eN(t[5],s):e[6]),(u=e[7])&&(t[7]=u),128&r&&(t[8]=null==t[8]?e[8]:e6(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}}(v,m),t=v[0],e=v[1],r=v[2],a=v[3],o=v[4],(h=v[9]=v[9]===n?c?0:t.length:e2(v[9]-f,0))||!(24&e)||(e&=-25),e&&1!=e)8==e||16==e?(g=t,y=e,b=h,w=r$(g),L=function t(){for(var e=arguments.length,r=ty(e),i=e,a=il(t);i--;)r[i]=arguments[i];var s=e<3&&r[0]!==a&&r[e-1]!==a?[]:eN(r,a);return(e-=s.length)<b?r3(g,y,rQ,t.placeholder,n,r,s,n,n,b-e):eo(this&&this!==t7&&this instanceof t?w:g,this,r)}):32!=e&&33!=e||o.length?L=rQ.apply(n,v):(k=t,_=e,C=r,A=a,x=1&_,S=r$(k),L=function t(){for(var e=-1,n=arguments.length,r=-1,i=A.length,a=ty(i+n),s=this&&this!==t7&&this instanceof t?S:k;++r<i;)a[r]=A[r];for(;n--;)a[r++]=arguments[++e];return eo(s,x?C:this,a)});else var g,y,b,w,k,_,C,A,x,S,P,I,E,M,O,L=(P=t,I=e,E=r,M=1&I,O=r$(P),function t(){return(this&&this!==t7&&this instanceof t?O:P).apply(M?E:this,arguments)});return iT((m?rd:iO)(L,v),t,e)}function r9(t,e,r,i){return t===n||aO(t,tE[r])&&!tL.call(i,r)?e:t}function it(t,e,r,i,a,s){return aX(t)&&aX(e)&&(s.set(e,t),rr(t,e,n,it,s),s.delete(e)),t}function ie(t){return aZ(t)?n:t}function ir(t,e,r,i,a,s){var o=1&r,u=t.length,l=e.length;if(u!=l&&!(o&&l>u))return!1;var h=s.get(t),c=s.get(e);if(h&&c)return h==e&&c==t;var f=-1,d=!0,p=2&r?new n_:n;for(s.set(t,e),s.set(e,t);++f<u;){var m=t[f],v=e[f];if(i)var g=o?i(v,m,f,e,t,s):i(m,v,f,t,e,s);if(g!==n){if(g)continue;d=!1;break}if(p){if(!ey(e,function(t,e){if(!eT(p,e)&&(m===t||a(m,t,r,i,s)))return p.push(e)})){d=!1;break}}else if(!(m===v||a(m,v,r,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function ii(t){return iR(iI(t,n,iq),t+"")}function ia(t){return nY(t,sf,im)}function is(t){return nY(t,sd,iv)}var io=ni?function(t){return ni.get(t)}:sN;function iu(t){for(var e=t.name+"",n=na[e],r=tL.call(na,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function il(t){return(tL.call(np,"placeholder")?np:t).placeholder}function ih(){var t=np.iteratee||sW;return t=t===sW?n8:t,arguments.length?t(arguments[0],arguments[1]):t}function ic(t,e){var n,r=t.__data__;return("string"==(n=typeof e)||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?r["string"==typeof e?"string":"hash"]:r.map}function id(t){for(var e=sf(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,i==i&&!aX(i)]}return e}function ip(t,e){var r=null==t?n:t[e];return n4(r)?r:n}var im=eQ?function(t){return null==t?[]:ec(eQ(t=tC(t)),function(e){return t$.call(t,e)})}:sY,iv=eQ?function(t){for(var e=[];t;)em(e,im(t)),t=tN(t);return e}:sY,ig=nQ;function iy(t,e,n){e=rO(e,t);for(var r=-1,i=e.length,a=!1;++r<i;){var s=iz(e[r]);if(!(a=null!=t&&n(t,s)))break;t=t[s]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&aH(i)&&ik(s,i)&&(aj(t)||aT(t))}function ib(t){return"function"!=typeof t.constructor||iS(t)?{}:nm(tN(t))}function iw(t){return aj(t)||aT(t)||!!(t6&&t&&t[t6])}function ik(t,e){var n=typeof t;return!!(e=null==e?0x1fffffffffffff:e)&&("number"==n||"symbol"!=n&&tf.test(t))&&t>-1&&t%1==0&&t<e}function i_(t,e,n){if(!aX(n))return!1;var r=typeof e;return("number"==r?!!(aB(n)&&ik(e,n.length)):"string"==r&&e in n)&&aO(n[e],t)}function iC(t,e){if(aj(t))return!1;var n=typeof t;return!!("number"==n||"symbol"==n||"boolean"==n||null==t||aK(t))||$.test(t)||!G.test(t)||null!=e&&t in tC(e)}function iA(t){var e=iu(t),n=np[e];if("function"!=typeof n||!(e in ny.prototype))return!1;if(t===n)return!0;var r=io(n);return!!r&&t===r[0]}(e5&&ig(new e5(new ArrayBuffer(1)))!=P||e9&&ig(new e9)!=g||nt&&ig(nt.resolve())!=w||ne&&ig(new ne)!=_||nn&&ig(new nn)!=x)&&(ig=function(t){var e=nQ(t),r=e==b?t.constructor:n,i=r?iW(r):"";if(i)switch(i){case ns:return P;case no:return g;case nu:return w;case nl:return _;case nh:return x}return e});var ix=tM?aV:sQ;function iS(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||tE)}function iP(t,e){return function(r){return null!=r&&r[t]===e&&(e!==n||t in tC(r))}}function iI(t,e,r){return e=e2(e===n?t.length-1:e,0),function(){for(var n=arguments,i=-1,a=e2(n.length-e,0),s=ty(a);++i<a;)s[i]=n[e+i];i=-1;for(var o=ty(e+1);++i<e;)o[i]=n[i];return o[e]=r(s),eo(t,this,o)}}function iE(t,e){return e.length<2?t:nZ(t,rm(e,0,-1))}function iM(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var iO=ij(rd),iL=eb||function(t,e){return t7.setTimeout(t,e)},iR=ij(rp);function iT(t,e,n){var r,i,a=e+"";return iR(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(tt,"{\n/* [wrapped with "+e+"] */\n")}(a,(r=(i=a.match(te))?i[1].split(tn):[],el(l,function(t){var e="_."+t[0];n&t[1]&&!ef(r,e)&&r.push(e)}),r.sort())))}function ij(t){var e=0,r=0;return function(){var i=e3(),a=16-(i-r);if(r=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function iD(t,e){var r=-1,i=t.length,a=i-1;for(e=e===n?i:e;++r<e;){var s=rl(r,a),o=t[s];t[s]=t[r],t[r]=o}return t.length=e,t}var iB=(tv=(K=ax(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Z,function(t,n,r,i){e.push(r?i.replace(ta,"$1"):n||t)}),e},function(t){return 500===tv.size&&tv.clear(),t})).cache,K);function iz(t){if("string"==typeof t||aK(t))return t;var e=t+"";return"0"==e&&1/t==-o?"-0":e}function iW(t){if(null!=t){try{return tO.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function iF(t){if(t instanceof ny)return t.clone();var e=new ng(t.__wrapped__,t.__chain__);return e.__actions__=rF(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var iU=rc(function(t,e){return az(t)?nB(t,nN(e,1,az,!0)):[]}),iV=rc(function(t,e){var r=iQ(e);return az(r)&&(r=n),az(t)?nB(t,nN(e,1,az,!0),ih(r,2)):[]}),iN=rc(function(t,e){var r=iQ(e);return az(r)&&(r=n),az(t)?nB(t,nN(e,1,az,!0),n,r):[]});function iH(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:a7(n);return i<0&&(i=e2(r+i,0)),ek(t,ih(e,3),i)}function iX(t,e,r){var i=null==t?0:t.length;if(!i)return -1;var a=i-1;return r!==n&&(a=a7(r),a=r<0?e2(i+a,0):e6(a,i-1)),ek(t,ih(e,3),a,!0)}function iq(t){return(null==t?0:t.length)?nN(t,1):[]}function iG(t){return t&&t.length?t[0]:n}var i$=rc(function(t){var e=ep(t,rE);return e.length&&e[0]===t[0]?n1(e):[]}),iZ=rc(function(t){var e=iQ(t),r=ep(t,rE);return e===iQ(r)?e=n:r.pop(),r.length&&r[0]===t[0]?n1(r,ih(e,2)):[]}),iY=rc(function(t){var e=iQ(t),r=ep(t,rE);return(e="function"==typeof e?e:n)&&r.pop(),r.length&&r[0]===t[0]?n1(r,n,e):[]});function iQ(t){var e=null==t?0:t.length;return e?t[e-1]:n}var iJ=rc(iK);function iK(t,e){return t&&t.length&&e&&e.length?ro(t,e):t}var i0=ii(function(t,e){var n=null==t?0:t.length,r=nL(t,e);return ru(t,ep(e,function(t){return ik(t,n)?+t:t}).sort(rB)),r});function i1(t){return null==t?t:e8.call(t)}var i2=rc(function(t){return r_(nN(t,1,az,!0))}),i6=rc(function(t){var e=iQ(t);return az(e)&&(e=n),r_(nN(t,1,az,!0),ih(e,2))}),i3=rc(function(t){var e=iQ(t);return e="function"==typeof e?e:n,r_(nN(t,1,az,!0),n,e)});function i7(t){if(!(t&&t.length))return[];var e=0;return t=ec(t,function(t){if(az(t))return e=e2(t.length,e),!0}),eM(e,function(e){return ep(t,eS(e))})}function i4(t,e){if(!(t&&t.length))return[];var r=i7(t);return null==e?r:ep(r,function(t){return eo(e,n,t)})}var i8=rc(function(t,e){return az(t)?nB(t,e):[]}),i5=rc(function(t){return rP(ec(t,az))}),i9=rc(function(t){var e=iQ(t);return az(e)&&(e=n),rP(ec(t,az),ih(e,2))}),at=rc(function(t){var e=iQ(t);return e="function"==typeof e?e:n,rP(ec(t,az),n,e)}),ae=rc(i7),an=rc(function(t){var e=t.length,r=e>1?t[e-1]:n;return r="function"==typeof r?(t.pop(),r):n,i4(t,r)});function ar(t){var e=np(t);return e.__chain__=!0,e}function ai(t,e){return e(t)}var aa=ii(function(t){var e=t.length,r=e?t[0]:0,i=this.__wrapped__,a=function(e){return nL(e,t)};return!(e>1)&&!this.__actions__.length&&i instanceof ny&&ik(r)?((i=i.slice(r,+r+(e?1:0))).__actions__.push({func:ai,args:[a],thisArg:n}),new ng(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(a)}),as=rV(function(t,e,n){tL.call(t,n)?++t[n]:nO(t,n,1)}),ao=rZ(iH),au=rZ(iX);function al(t,e){return(aj(t)?el:nz)(t,ih(e,3))}function ah(t,e){return(aj(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:nW)(t,ih(e,3))}var ac=rV(function(t,e,n){tL.call(t,n)?t[n].push(e):nO(t,n,[e])}),af=rc(function(t,e,n){var r=-1,i="function"==typeof e,a=aB(t)?ty(t.length):[];return nz(t,function(t){a[++r]=i?eo(e,t,n):n2(t,e,n)}),a}),ad=rV(function(t,e,n){nO(t,n,e)});function ap(t,e){return(aj(t)?ep:rt)(t,ih(e,3))}var am=rV(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),av=rc(function(t,e){if(null==t)return[];var n=e.length;return n>1&&i_(t,e[0],e[1])?e=[]:n>2&&i_(e[0],e[1],e[2])&&(e=[e[0]]),ra(t,nN(e,1),[])}),ag=et||function(){return t7.Date.now()};function ay(t,e,r){return e=r?n:e,e=t&&null==e?t.length:e,r5(t,128,n,n,n,n,e)}function ab(t,e){var r;if("function"!=typeof e)throw new tS(i);return t=a7(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=n),r}}var aw=rc(function(t,e,n){var r=1;if(n.length){var i=eN(n,il(aw));r|=32}return r5(t,r,e,n,i)}),ak=rc(function(t,e,n){var r=3;if(n.length){var i=eN(n,il(ak));r|=32}return r5(e,r,t,n,i)});function a_(t,e,r){var a,s,o,u,l,h,c=0,f=!1,d=!1,p=!0;if("function"!=typeof t)throw new tS(i);function m(e){var r=a,i=s;return a=s=n,c=e,u=t.apply(i,r)}function v(t){var r=t-h,i=t-c;return h===n||r>=e||r<0||d&&i>=o}function g(){var t,n,r,i=ag();if(v(i))return y(i);l=iL(g,(t=i-h,n=i-c,r=e-t,d?e6(r,o-n):r))}function y(t){return(l=n,p&&a)?m(t):(a=s=n,u)}function b(){var t,r=ag(),i=v(r);if(a=arguments,s=this,h=r,i){if(l===n)return c=t=h,l=iL(g,e),f?m(t):u;if(d)return rR(l),l=iL(g,e),m(h)}return l===n&&(l=iL(g,e)),u}return e=a8(e)||0,aX(r)&&(f=!!r.leading,o=(d="maxWait"in r)?e2(a8(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p),b.cancel=function(){l!==n&&rR(l),c=0,a=h=s=l=n},b.flush=function(){return l===n?u:y(ag())},b}var aC=rc(function(t,e){return nD(t,1,e)}),aA=rc(function(t,e,n){return nD(t,a8(e)||0,n)});function ax(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new tS(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(ax.Cache||nk),n}function aS(t){if("function"!=typeof t)throw new tS(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}ax.Cache=nk;var aP=rc(function(t,e){var n=(e=1==e.length&&aj(e[0])?ep(e[0],eL(ih())):ep(nN(e,1),eL(ih()))).length;return rc(function(r){for(var i=-1,a=e6(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return eo(t,this,r)})}),aI=rc(function(t,e){var r=eN(e,il(aI));return r5(t,32,n,e,r)}),aE=rc(function(t,e){var r=eN(e,il(aE));return r5(t,64,n,e,r)}),aM=ii(function(t,e){return r5(t,256,n,n,n,e)});function aO(t,e){return t===e||t!=t&&e!=e}var aL=r6(nJ),aR=r6(function(t,e){return t>=e}),aT=n6(function(){return arguments}())?n6:function(t){return aq(t)&&tL.call(t,"callee")&&!t$.call(t,"callee")},aj=ty.isArray,aD=ee?eL(ee):function(t){return aq(t)&&nQ(t)==S};function aB(t){return null!=t&&aH(t.length)&&!aV(t)}function az(t){return aq(t)&&aB(t)}var aW=eJ||sQ,aF=en?eL(en):function(t){return aq(t)&&nQ(t)==d};function aU(t){if(!aq(t))return!1;var e=nQ(t);return e==p||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!aZ(t)}function aV(t){if(!aX(t))return!1;var e=nQ(t);return e==m||e==v||"[object AsyncFunction]"==e||"[object Proxy]"==e}function aN(t){return"number"==typeof t&&t==a7(t)}function aH(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=0x1fffffffffffff}function aX(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function aq(t){return null!=t&&"object"==typeof t}var aG=er?eL(er):function(t){return aq(t)&&ig(t)==g};function a$(t){return"number"==typeof t||aq(t)&&nQ(t)==y}function aZ(t){if(!aq(t)||nQ(t)!=b)return!1;var e=tN(t);if(null===e)return!0;var n=tL.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&tO.call(n)==tD}var aY=ei?eL(ei):function(t){return aq(t)&&nQ(t)==k},aQ=ea?eL(ea):function(t){return aq(t)&&ig(t)==_};function aJ(t){return"string"==typeof t||!aj(t)&&aq(t)&&nQ(t)==C}function aK(t){return"symbol"==typeof t||aq(t)&&nQ(t)==A}var a0=es?eL(es):function(t){return aq(t)&&aH(t.length)&&!!tJ[nQ(t)]},a1=r6(n9),a2=r6(function(t,e){return t<=e});function a6(t){if(!t)return[];if(aB(t))return aJ(t)?eq(t):rF(t);if(t3&&t[t3])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[t3]());var e=ig(t);return(e==g?eU:e==_?eH:sk)(t)}function a3(t){return t?(t=a8(t))===o||t===-o?(t<0?-1:1)*17976931348623157e292:t==t?t:0:0===t?t:0}function a7(t){var e=a3(t),n=e%1;return e==e?n?e-n:e:0}function a4(t){return t?nR(a7(t),0,0xffffffff):0}function a8(t){if("number"==typeof t)return t;if(aK(t))return u;if(aX(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=aX(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=eO(t);var n=tl.test(t);return n||tc.test(t)?t2(t.slice(2),n?2:8):tu.test(t)?u:+t}function a5(t){return rU(t,sd(t))}function a9(t){return null==t?"":rk(t)}var st=rN(function(t,e){if(iS(e)||aB(e)){rU(e,sf(e),t);return}for(var n in e)tL.call(e,n)&&nP(t,n,e[n])}),se=rN(function(t,e){rU(e,sd(e),t)}),sn=rN(function(t,e,n,r){rU(e,sd(e),t,r)}),sr=rN(function(t,e,n,r){rU(e,sf(e),t,r)}),si=ii(nL),sa=rc(function(t,e){t=tC(t);var r=-1,i=e.length,a=i>2?e[2]:n;for(a&&i_(e[0],e[1],a)&&(i=1);++r<i;)for(var s=e[r],o=sd(s),u=-1,l=o.length;++u<l;){var h=o[u],c=t[h];(c===n||aO(c,tE[h])&&!tL.call(t,h))&&(t[h]=s[h])}return t}),ss=rc(function(t){return t.push(n,it),eo(sm,n,t)});function so(t,e,r){var i=null==t?n:nZ(t,e);return i===n?r:i}function su(t,e){return null!=t&&iy(t,e,n0)}var sl=rJ(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=tj.call(e)),t[e]=n},sj(sz)),sh=rJ(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=tj.call(e)),tL.call(t,e)?t[e].push(n):t[e]=[n]},ih),sc=rc(n2);function sf(t){return aB(t)?nA(t):n5(t)}function sd(t){return aB(t)?nA(t,!0):function(t){if(!aX(t))return function(t){var e=[];if(null!=t)for(var n in tC(t))e.push(n);return e}(t);var e=iS(t),n=[];for(var r in t)"constructor"==r&&(e||!tL.call(t,r))||n.push(r);return n}(t)}var sp=rN(function(t,e,n){rr(t,e,n)}),sm=rN(function(t,e,n,r){rr(t,e,n,r)}),sv=ii(function(t,e){var n={};if(null==t)return n;var r=!1;e=ep(e,function(e){return e=rO(e,t),r||(r=e.length>1),e}),rU(t,is(t),n),r&&(n=nT(n,7,ie));for(var i=e.length;i--;)rC(n,e[i]);return n}),sg=ii(function(t,e){return null==t?{}:rs(t,e,function(e,n){return su(t,n)})});function sy(t,e){if(null==t)return{};var n=ep(is(t),function(t){return[t]});return e=ih(e),rs(t,n,function(t,n){return e(t,n[0])})}var sb=r8(sf),sw=r8(sd);function sk(t){return null==t?[]:eR(t,sf(t))}var s_=rG(function(t,e,n){return e=e.toLowerCase(),t+(n?sC(e):e)});function sC(t){return sO(a9(t).toLowerCase())}function sA(t){return(t=a9(t))&&t.replace(td,eB).replace(tX,"")}var sx=rG(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),sS=rG(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),sP=rq("toLowerCase"),sI=rG(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),sE=rG(function(t,e,n){return t+(n?" ":"")+sO(e)}),sM=rG(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),sO=rq("toUpperCase");function sL(t,e,r){if(t=a9(t),(e=r?n:e)===n){var i;return(i=t,tZ.test(i))?t.match(tG)||[]:t.match(tr)||[]}return t.match(e)||[]}var sR=rc(function(t,e){try{return eo(t,n,e)}catch(t){return aU(t)?t:new tw(t)}}),sT=ii(function(t,e){return el(e,function(e){nO(t,e=iz(e),aw(t[e],t))}),t});function sj(t){return function(){return t}}var sD=rY(),sB=rY(!0);function sz(t){return t}function sW(t){return n8("function"==typeof t?t:nT(t,1))}var sF=rc(function(t,e){return function(n){return n2(n,t,e)}}),sU=rc(function(t,e){return function(n){return n2(t,n,e)}});function sV(t,e,n){var r=sf(e),i=n$(e,r);null!=n||aX(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=n$(e,sf(e)));var a=!(aX(n)&&"chain"in n)||!!n.chain,s=aV(t);return el(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=rF(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,em([this.value()],arguments))})}),t}function sN(){}var sH=r0(ep),sX=r0(eh),sq=r0(ey);function sG(t){return iC(t)?eS(iz(t)):function(e){return nZ(e,t)}}var s$=r2(),sZ=r2(!0);function sY(){return[]}function sQ(){return!1}var sJ=rK(function(t,e){return t+e},0),sK=r7("ceil"),s0=rK(function(t,e){return t/e},1),s1=r7("floor"),s2=rK(function(t,e){return t*e},1),s6=r7("round"),s3=rK(function(t,e){return t-e},0);return np.after=function(t,e){if("function"!=typeof e)throw new tS(i);return t=a7(t),function(){if(--t<1)return e.apply(this,arguments)}},np.ary=ay,np.assign=st,np.assignIn=se,np.assignInWith=sn,np.assignWith=sr,np.at=si,np.before=ab,np.bind=aw,np.bindAll=sT,np.bindKey=ak,np.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return aj(t)?t:[t]},np.chain=ar,np.chunk=function(t,e,r){e=(r?i_(t,e,r):e===n)?1:e2(a7(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var a=0,s=0,o=ty(eP(i/e));a<i;)o[s++]=rm(t,a,a+=e);return o},np.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},np.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ty(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return em(aj(n)?rF(n):[n],nN(e,1))},np.cond=function(t){var e=null==t?0:t.length,n=ih();return t=e?ep(t,function(t){if("function"!=typeof t[1])throw new tS(i);return[n(t[0]),t[1]]}):[],rc(function(n){for(var r=-1;++r<e;){var i=t[r];if(eo(i[0],this,n))return eo(i[1],this,n)}})},np.conforms=function(t){var e,n;return n=sf(e=nT(t,1)),function(t){return nj(t,e,n)}},np.constant=sj,np.countBy=as,np.create=function(t,e){var n=nm(t);return null==e?n:nM(n,e)},np.curry=function t(e,r,i){r=i?n:r;var a=r5(e,8,n,n,n,n,n,r);return a.placeholder=t.placeholder,a},np.curryRight=function t(e,r,i){r=i?n:r;var a=r5(e,16,n,n,n,n,n,r);return a.placeholder=t.placeholder,a},np.debounce=a_,np.defaults=sa,np.defaultsDeep=ss,np.defer=aC,np.delay=aA,np.difference=iU,np.differenceBy=iV,np.differenceWith=iN,np.drop=function(t,e,r){var i=null==t?0:t.length;return i?rm(t,(e=r||e===n?1:a7(e))<0?0:e,i):[]},np.dropRight=function(t,e,r){var i=null==t?0:t.length;return i?rm(t,0,(e=i-(e=r||e===n?1:a7(e)))<0?0:e):[]},np.dropRightWhile=function(t,e){return t&&t.length?rx(t,ih(e,3),!0,!0):[]},np.dropWhile=function(t,e){return t&&t.length?rx(t,ih(e,3),!0):[]},np.fill=function(t,e,r,i){var a=null==t?0:t.length;return a?(r&&"number"!=typeof r&&i_(t,e,r)&&(r=0,i=a),function(t,e,r,i){var a=t.length;for((r=a7(r))<0&&(r=-r>a?0:a+r),(i=i===n||i>a?a:a7(i))<0&&(i+=a),i=r>i?0:a4(i);r<i;)t[r++]=e;return t}(t,e,r,i)):[]},np.filter=function(t,e){return(aj(t)?ec:nV)(t,ih(e,3))},np.flatMap=function(t,e){return nN(ap(t,e),1)},np.flatMapDeep=function(t,e){return nN(ap(t,e),o)},np.flatMapDepth=function(t,e,r){return r=r===n?1:a7(r),nN(ap(t,e),r)},np.flatten=iq,np.flattenDeep=function(t){return(null==t?0:t.length)?nN(t,o):[]},np.flattenDepth=function(t,e){return(null==t?0:t.length)?nN(t,e=e===n?1:a7(e)):[]},np.flip=function(t){return r5(t,512)},np.flow=sD,np.flowRight=sB,np.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},np.functions=function(t){return null==t?[]:n$(t,sf(t))},np.functionsIn=function(t){return null==t?[]:n$(t,sd(t))},np.groupBy=ac,np.initial=function(t){return(null==t?0:t.length)?rm(t,0,-1):[]},np.intersection=i$,np.intersectionBy=iZ,np.intersectionWith=iY,np.invert=sl,np.invertBy=sh,np.invokeMap=af,np.iteratee=sW,np.keyBy=ad,np.keys=sf,np.keysIn=sd,np.map=ap,np.mapKeys=function(t,e){var n={};return e=ih(e,3),nq(t,function(t,r,i){nO(n,e(t,r,i),t)}),n},np.mapValues=function(t,e){var n={};return e=ih(e,3),nq(t,function(t,r,i){nO(n,r,e(t,r,i))}),n},np.matches=function(t){return re(nT(t,1))},np.matchesProperty=function(t,e){return rn(t,nT(e,1))},np.memoize=ax,np.merge=sp,np.mergeWith=sm,np.method=sF,np.methodOf=sU,np.mixin=sV,np.negate=aS,np.nthArg=function(t){return t=a7(t),rc(function(e){return ri(e,t)})},np.omit=sv,np.omitBy=function(t,e){return sy(t,aS(ih(e)))},np.once=function(t){return ab(2,t)},np.orderBy=function(t,e,r,i){return null==t?[]:(aj(e)||(e=null==e?[]:[e]),aj(r=i?n:r)||(r=null==r?[]:[r]),ra(t,e,r))},np.over=sH,np.overArgs=aP,np.overEvery=sX,np.overSome=sq,np.partial=aI,np.partialRight=aE,np.partition=am,np.pick=sg,np.pickBy=sy,np.property=sG,np.propertyOf=function(t){return function(e){return null==t?n:nZ(t,e)}},np.pull=iJ,np.pullAll=iK,np.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ro(t,e,ih(n,2)):t},np.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?ro(t,e,n,r):t},np.pullAt=i0,np.range=s$,np.rangeRight=sZ,np.rearg=aM,np.reject=function(t,e){return(aj(t)?ec:nV)(t,aS(ih(e,3)))},np.remove=function(t,e){var n=[];if(!(t&&t.length))return n;var r=-1,i=[],a=t.length;for(e=ih(e,3);++r<a;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return ru(t,i),n},np.rest=function(t,e){if("function"!=typeof t)throw new tS(i);return rc(t,e=e===n?e:a7(e))},np.reverse=i1,np.sampleSize=function(t,e,r){return e=(r?i_(t,e,r):e===n)?1:a7(e),(aj(t)?function(t,e){return iD(rF(t),nR(e,0,t.length))}:function(t,e){var n=sk(t);return iD(n,nR(e,0,n.length))})(t,e)},np.set=function(t,e,n){return null==t?t:rf(t,e,n)},np.setWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:rf(t,e,r,i)},np.shuffle=function(t){return(aj(t)?function(t){return iD(rF(t))}:function(t){return iD(sk(t))})(t)},np.slice=function(t,e,r){var i=null==t?0:t.length;return i?(r&&"number"!=typeof r&&i_(t,e,r)?(e=0,r=i):(e=null==e?0:a7(e),r=r===n?i:a7(r)),rm(t,e,r)):[]},np.sortBy=av,np.sortedUniq=function(t){return t&&t.length?rb(t):[]},np.sortedUniqBy=function(t,e){return t&&t.length?rb(t,ih(e,2)):[]},np.split=function(t,e,r){return(r&&"number"!=typeof r&&i_(t,e,r)&&(e=r=n),r=r===n?0xffffffff:r>>>0)?(t=a9(t))&&("string"==typeof e||null!=e&&!aY(e))&&!(e=rk(e))&&eF(t)?rL(eq(t),0,r):t.split(e,r):[]},np.spread=function(t,e){if("function"!=typeof t)throw new tS(i);return e=null==e?0:e2(a7(e),0),rc(function(n){var r=n[e],i=rL(n,0,e);return r&&em(i,r),eo(t,this,i)})},np.tail=function(t){var e=null==t?0:t.length;return e?rm(t,1,e):[]},np.take=function(t,e,r){return t&&t.length?rm(t,0,(e=r||e===n?1:a7(e))<0?0:e):[]},np.takeRight=function(t,e,r){var i=null==t?0:t.length;return i?rm(t,(e=i-(e=r||e===n?1:a7(e)))<0?0:e,i):[]},np.takeRightWhile=function(t,e){return t&&t.length?rx(t,ih(e,3),!1,!0):[]},np.takeWhile=function(t,e){return t&&t.length?rx(t,ih(e,3)):[]},np.tap=function(t,e){return e(t),t},np.throttle=function(t,e,n){var r=!0,a=!0;if("function"!=typeof t)throw new tS(i);return aX(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),a_(t,e,{leading:r,maxWait:e,trailing:a})},np.thru=ai,np.toArray=a6,np.toPairs=sb,np.toPairsIn=sw,np.toPath=function(t){return aj(t)?ep(t,iz):aK(t)?[t]:rF(iB(a9(t)))},np.toPlainObject=a5,np.transform=function(t,e,n){var r=aj(t),i=r||aW(t)||a0(t);if(e=ih(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:aX(t)&&aV(a)?nm(tN(t)):{}}return(i?el:nq)(t,function(t,r,i){return e(n,t,r,i)}),n},np.unary=function(t){return ay(t,1)},np.union=i2,np.unionBy=i6,np.unionWith=i3,np.uniq=function(t){return t&&t.length?r_(t):[]},np.uniqBy=function(t,e){return t&&t.length?r_(t,ih(e,2)):[]},np.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?r_(t,n,e):[]},np.unset=function(t,e){return null==t||rC(t,e)},np.unzip=i7,np.unzipWith=i4,np.update=function(t,e,n){return null==t?t:rA(t,e,rM(n))},np.updateWith=function(t,e,r,i){return i="function"==typeof i?i:n,null==t?t:rA(t,e,rM(r),i)},np.values=sk,np.valuesIn=function(t){return null==t?[]:eR(t,sd(t))},np.without=i8,np.words=sL,np.wrap=function(t,e){return aI(rM(e),t)},np.xor=i5,np.xorBy=i9,np.xorWith=at,np.zip=ae,np.zipObject=function(t,e){return rI(t||[],e||[],nP)},np.zipObjectDeep=function(t,e){return rI(t||[],e||[],rf)},np.zipWith=an,np.entries=sb,np.entriesIn=sw,np.extend=se,np.extendWith=sn,sV(np,np),np.add=sJ,np.attempt=sR,np.camelCase=s_,np.capitalize=sC,np.ceil=sK,np.clamp=function(t,e,r){return r===n&&(r=e,e=n),r!==n&&(r=(r=a8(r))==r?r:0),e!==n&&(e=(e=a8(e))==e?e:0),nR(a8(t),e,r)},np.clone=function(t){return nT(t,4)},np.cloneDeep=function(t){return nT(t,5)},np.cloneDeepWith=function(t,e){return nT(t,5,e="function"==typeof e?e:n)},np.cloneWith=function(t,e){return nT(t,4,e="function"==typeof e?e:n)},np.conformsTo=function(t,e){return null==e||nj(t,e,sf(e))},np.deburr=sA,np.defaultTo=function(t,e){return null==t||t!=t?e:t},np.divide=s0,np.endsWith=function(t,e,r){t=a9(t),e=rk(e);var i=t.length,a=r=r===n?i:nR(a7(r),0,i);return(r-=e.length)>=0&&t.slice(r,a)==e},np.eq=aO,np.escape=function(t){return(t=a9(t))&&N.test(t)?t.replace(U,ez):t},np.escapeRegExp=function(t){return(t=a9(t))&&Q.test(t)?t.replace(Y,"\\$&"):t},np.every=function(t,e,r){var i=aj(t)?eh:nF;return r&&i_(t,e,r)&&(e=n),i(t,ih(e,3))},np.find=ao,np.findIndex=iH,np.findKey=function(t,e){return ew(t,ih(e,3),nq)},np.findLast=au,np.findLastIndex=iX,np.findLastKey=function(t,e){return ew(t,ih(e,3),nG)},np.floor=s1,np.forEach=al,np.forEachRight=ah,np.forIn=function(t,e){return null==t?t:nH(t,ih(e,3),sd)},np.forInRight=function(t,e){return null==t?t:nX(t,ih(e,3),sd)},np.forOwn=function(t,e){return t&&nq(t,ih(e,3))},np.forOwnRight=function(t,e){return t&&nG(t,ih(e,3))},np.get=so,np.gt=aL,np.gte=aR,np.has=function(t,e){return null!=t&&iy(t,e,nK)},np.hasIn=su,np.head=iG,np.identity=sz,np.includes=function(t,e,n,r){t=aB(t)?t:sk(t),n=n&&!r?a7(n):0;var i=t.length;return n<0&&(n=e2(i+n,0)),aJ(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&e_(t,e,n)>-1},np.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return -1;var i=null==n?0:a7(n);return i<0&&(i=e2(r+i,0)),e_(t,e,i)},np.inRange=function(t,e,r){var i,a,s;return e=a3(e),r===n?(r=e,e=0):r=a3(r),(i=t=a8(t))>=e6(a=e,s=r)&&i<e2(a,s)},np.invoke=sc,np.isArguments=aT,np.isArray=aj,np.isArrayBuffer=aD,np.isArrayLike=aB,np.isArrayLikeObject=az,np.isBoolean=function(t){return!0===t||!1===t||aq(t)&&nQ(t)==f},np.isBuffer=aW,np.isDate=aF,np.isElement=function(t){return aq(t)&&1===t.nodeType&&!aZ(t)},np.isEmpty=function(t){if(null==t)return!0;if(aB(t)&&(aj(t)||"string"==typeof t||"function"==typeof t.splice||aW(t)||a0(t)||aT(t)))return!t.length;var e=ig(t);if(e==g||e==_)return!t.size;if(iS(t))return!n5(t).length;for(var n in t)if(tL.call(t,n))return!1;return!0},np.isEqual=function(t,e){return n3(t,e)},np.isEqualWith=function(t,e,r){var i=(r="function"==typeof r?r:n)?r(t,e):n;return i===n?n3(t,e,n,r):!!i},np.isError=aU,np.isFinite=function(t){return"number"==typeof t&&eK(t)},np.isFunction=aV,np.isInteger=aN,np.isLength=aH,np.isMap=aG,np.isMatch=function(t,e){return t===e||n7(t,e,id(e))},np.isMatchWith=function(t,e,r){return r="function"==typeof r?r:n,n7(t,e,id(e),r)},np.isNaN=function(t){return a$(t)&&t!=+t},np.isNative=function(t){if(ix(t))throw new tw("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return n4(t)},np.isNil=function(t){return null==t},np.isNull=function(t){return null===t},np.isNumber=a$,np.isObject=aX,np.isObjectLike=aq,np.isPlainObject=aZ,np.isRegExp=aY,np.isSafeInteger=function(t){return aN(t)&&t>=-0x1fffffffffffff&&t<=0x1fffffffffffff},np.isSet=aQ,np.isString=aJ,np.isSymbol=aK,np.isTypedArray=a0,np.isUndefined=function(t){return t===n},np.isWeakMap=function(t){return aq(t)&&ig(t)==x},np.isWeakSet=function(t){return aq(t)&&"[object WeakSet]"==nQ(t)},np.join=function(t,e){return null==t?"":e0.call(t,e)},np.kebabCase=sx,np.last=iQ,np.lastIndexOf=function(t,e,r){var i=null==t?0:t.length;if(!i)return -1;var a=i;return r!==n&&(a=(a=a7(r))<0?e2(i+a,0):e6(a,i-1)),e==e?function(t,e,n){for(var r=n+1;r--&&t[r]!==e;);return r}(t,e,a):ek(t,eA,a,!0)},np.lowerCase=sS,np.lowerFirst=sP,np.lt=a1,np.lte=a2,np.max=function(t){return t&&t.length?nU(t,sz,nJ):n},np.maxBy=function(t,e){return t&&t.length?nU(t,ih(e,2),nJ):n},np.mean=function(t){return ex(t,sz)},np.meanBy=function(t,e){return ex(t,ih(e,2))},np.min=function(t){return t&&t.length?nU(t,sz,n9):n},np.minBy=function(t,e){return t&&t.length?nU(t,ih(e,2),n9):n},np.stubArray=sY,np.stubFalse=sQ,np.stubObject=function(){return{}},np.stubString=function(){return""},np.stubTrue=function(){return!0},np.multiply=s2,np.nth=function(t,e){return t&&t.length?ri(t,a7(e)):n},np.noConflict=function(){return t7._===this&&(t7._=tB),this},np.noop=sN,np.now=ag,np.pad=function(t,e,n){t=a9(t);var r=(e=a7(e))?eX(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return r1(eY(i),n)+t+r1(eP(i),n)},np.padEnd=function(t,e,n){t=a9(t);var r=(e=a7(e))?eX(t):0;return e&&r<e?t+r1(e-r,n):t},np.padStart=function(t,e,n){t=a9(t);var r=(e=a7(e))?eX(t):0;return e&&r<e?r1(e-r,n)+t:t},np.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),e7(a9(t).replace(J,""),e||0)},np.random=function(t,e,r){if(r&&"boolean"!=typeof r&&i_(t,e,r)&&(e=r=n),r===n&&("boolean"==typeof e?(r=e,e=n):"boolean"==typeof t&&(r=t,t=n)),t===n&&e===n?(t=0,e=1):(t=a3(t),e===n?(e=t,t=0):e=a3(e)),t>e){var i=t;t=e,e=i}if(r||t%1||e%1){var a=e4();return e6(t+a*(e-t+t1("1e-"+((a+"").length-1))),e)}return rl(t,e)},np.reduce=function(t,e,n){var r=aj(t)?ev:eI,i=arguments.length<3;return r(t,ih(e,4),n,i,nz)},np.reduceRight=function(t,e,n){var r=aj(t)?eg:eI,i=arguments.length<3;return r(t,ih(e,4),n,i,nW)},np.repeat=function(t,e,r){return e=(r?i_(t,e,r):e===n)?1:a7(e),rh(a9(t),e)},np.replace=function(){var t=arguments,e=a9(t[0]);return t.length<3?e:e.replace(t[1],t[2])},np.result=function(t,e,r){e=rO(e,t);var i=-1,a=e.length;for(a||(a=1,t=n);++i<a;){var s=null==t?n:t[iz(e[i])];s===n&&(i=a,s=r),t=aV(s)?s.call(t):s}return t},np.round=s6,np.runInContext=t,np.sample=function(t){return(aj(t)?nx:function(t){return nx(sk(t))})(t)},np.size=function(t){if(null==t)return 0;if(aB(t))return aJ(t)?eX(t):t.length;var e=ig(t);return e==g||e==_?t.size:n5(t).length},np.snakeCase=sI,np.some=function(t,e,r){var i=aj(t)?ey:rv;return r&&i_(t,e,r)&&(e=n),i(t,ih(e,3))},np.sortedIndex=function(t,e){return rg(t,e)},np.sortedIndexBy=function(t,e,n){return ry(t,e,ih(n,2))},np.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=rg(t,e);if(r<n&&aO(t[r],e))return r}return -1},np.sortedLastIndex=function(t,e){return rg(t,e,!0)},np.sortedLastIndexBy=function(t,e,n){return ry(t,e,ih(n,2),!0)},np.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=rg(t,e,!0)-1;if(aO(t[n],e))return n}return -1},np.startCase=sE,np.startsWith=function(t,e,n){return t=a9(t),n=null==n?0:nR(a7(n),0,t.length),e=rk(e),t.slice(n,n+e.length)==e},np.subtract=s3,np.sum=function(t){return t&&t.length?eE(t,sz):0},np.sumBy=function(t,e){return t&&t.length?eE(t,ih(e,2)):0},np.template=function(t,e,r){var i=np.templateSettings;r&&i_(t,e,r)&&(e=n),t=a9(t),e=sn({},e,i,r9);var a,s,o=sn({},e.imports,i.imports,r9),u=sf(o),l=eR(o,u),h=0,c=e.interpolate||tp,f="__p += '",d=tA((e.escape||tp).source+"|"+c.source+"|"+(c===q?ts:tp).source+"|"+(e.evaluate||tp).source+"|$","g"),p="//# sourceURL="+(tL.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tQ+"]")+"\n";t.replace(d,function(e,n,r,i,o,u){return r||(r=i),f+=t.slice(h,u).replace(tm,eW),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),o&&(s=!0,f+="';\n"+o+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),f+="';\n";var m=tL.call(e,"variable")&&e.variable;if(m){if(ti.test(m))throw new tw("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(B,""):f).replace(z,"$1").replace(W,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=sR(function(){return tk(u,p+"return "+f).apply(n,l)});if(v.source=f,aU(v))throw v;return v},np.times=function(t,e){if((t=a7(t))<1||t>0x1fffffffffffff)return[];var n=0xffffffff,r=e6(t,0xffffffff);e=ih(e),t-=0xffffffff;for(var i=eM(r,e);++n<t;)e(n);return i},np.toFinite=a3,np.toInteger=a7,np.toLength=a4,np.toLower=function(t){return a9(t).toLowerCase()},np.toNumber=a8,np.toSafeInteger=function(t){return t?nR(a7(t),-0x1fffffffffffff,0x1fffffffffffff):0===t?t:0},np.toString=a9,np.toUpper=function(t){return a9(t).toUpperCase()},np.trim=function(t,e,r){if((t=a9(t))&&(r||e===n))return eO(t);if(!t||!(e=rk(e)))return t;var i=eq(t),a=eq(e),s=ej(i,a),o=eD(i,a)+1;return rL(i,s,o).join("")},np.trimEnd=function(t,e,r){if((t=a9(t))&&(r||e===n))return t.slice(0,eG(t)+1);if(!t||!(e=rk(e)))return t;var i=eq(t),a=eD(i,eq(e))+1;return rL(i,0,a).join("")},np.trimStart=function(t,e,r){if((t=a9(t))&&(r||e===n))return t.replace(J,"");if(!t||!(e=rk(e)))return t;var i=eq(t),a=ej(i,eq(e));return rL(i,a).join("")},np.truncate=function(t,e){var r=30,i="...";if(aX(e)){var a="separator"in e?e.separator:a;r="length"in e?a7(e.length):r,i="omission"in e?rk(e.omission):i}var s=(t=a9(t)).length;if(eF(t)){var o=eq(t);s=o.length}if(r>=s)return t;var u=r-eX(i);if(u<1)return i;var l=o?rL(o,0,u).join(""):t.slice(0,u);if(a===n)return l+i;if(o&&(u+=l.length-u),aY(a)){if(t.slice(u).search(a)){var h,c=l;for(a.global||(a=tA(a.source,a9(to.exec(a))+"g")),a.lastIndex=0;h=a.exec(c);)var f=h.index;l=l.slice(0,f===n?u:f)}}else if(t.indexOf(rk(a),u)!=u){var d=l.lastIndexOf(a);d>-1&&(l=l.slice(0,d))}return l+i},np.unescape=function(t){return(t=a9(t))&&V.test(t)?t.replace(F,e$):t},np.uniqueId=function(t){var e=++tR;return a9(t)+e},np.upperCase=sM,np.upperFirst=sO,np.each=al,np.eachRight=ah,np.first=iG,sV(np,(tg={},nq(np,function(t,e){tL.call(np.prototype,e)||(tg[e]=t)}),tg),{chain:!1}),np.VERSION="4.17.21",el(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){np[t].placeholder=np}),el(["drop","take"],function(t,e){ny.prototype[t]=function(r){r=r===n?1:e2(a7(r),0);var i=this.__filtered__&&!e?new ny(this):this.clone();return i.__filtered__?i.__takeCount__=e6(r,i.__takeCount__):i.__views__.push({size:e6(r,0xffffffff),type:t+(i.__dir__<0?"Right":"")}),i},ny.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),el(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;ny.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ih(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),el(["head","last"],function(t,e){var n="take"+(e?"Right":"");ny.prototype[t]=function(){return this[n](1).value()[0]}}),el(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");ny.prototype[t]=function(){return this.__filtered__?new ny(this):this[n](1)}}),ny.prototype.compact=function(){return this.filter(sz)},ny.prototype.find=function(t){return this.filter(t).head()},ny.prototype.findLast=function(t){return this.reverse().find(t)},ny.prototype.invokeMap=rc(function(t,e){return"function"==typeof t?new ny(this):this.map(function(n){return n2(n,t,e)})}),ny.prototype.reject=function(t){return this.filter(aS(ih(t)))},ny.prototype.slice=function(t,e){t=a7(t);var r=this;return r.__filtered__&&(t>0||e<0)?new ny(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==n&&(r=(e=a7(e))<0?r.dropRight(-e):r.take(e-t)),r)},ny.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ny.prototype.toArray=function(){return this.take(0xffffffff)},nq(ny.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),a=np[i?"take"+("last"==e?"Right":""):e],s=i||/^find/.test(e);a&&(np.prototype[e]=function(){var e=this.__wrapped__,o=i?[1]:arguments,u=e instanceof ny,l=o[0],h=u||aj(e),c=function(t){var e=a.apply(np,em([t],o));return i&&f?e[0]:e};h&&r&&"function"==typeof l&&1!=l.length&&(u=h=!1);var f=this.__chain__,d=!!this.__actions__.length,p=s&&!f,m=u&&!d;if(!s&&h){e=m?e:new ny(this);var v=t.apply(e,o);return v.__actions__.push({func:ai,args:[c],thisArg:n}),new ng(v,f)}return p&&m?t.apply(this,o):(v=this.thru(c),p?i?v.value()[0]:v.value():v)})}),el(["pop","push","shift","sort","splice","unshift"],function(t){var e=tP[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);np.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(aj(i)?i:[],t)}return this[n](function(n){return e.apply(aj(n)?n:[],t)})}}),nq(ny.prototype,function(t,e){var n=np[e];if(n){var r=n.name+"";tL.call(na,r)||(na[r]=[]),na[r].push({name:e,func:n})}}),na[rQ(n,2).name]=[{name:"wrapper",func:n}],ny.prototype.clone=function(){var t=new ny(this.__wrapped__);return t.__actions__=rF(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rF(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rF(this.__views__),t},ny.prototype.reverse=function(){if(this.__filtered__){var t=new ny(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},ny.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=aj(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],s=a.size;switch(a.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=e6(e,t+s);break;case"takeRight":t=e2(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=a.start,o=a.end,u=o-s,l=r?o:s-1,h=this.__iteratees__,c=h.length,f=0,d=e6(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return rS(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var m=-1,v=t[l+=e];++m<c;){var g=h[m],y=g.iteratee,b=g.type,w=y(v);if(2==b)v=w;else if(!w){if(1==b)continue t;break t}}p[f++]=v}return p},np.prototype.at=aa,np.prototype.chain=function(){return ar(this)},np.prototype.commit=function(){return new ng(this.value(),this.__chain__)},np.prototype.next=function(){this.__values__===n&&(this.__values__=a6(this.value()));var t=this.__index__>=this.__values__.length,e=t?n:this.__values__[this.__index__++];return{done:t,value:e}},np.prototype.plant=function(t){for(var e,r=this;r instanceof nv;){var i=iF(r);i.__index__=0,i.__values__=n,e?a.__wrapped__=i:e=i;var a=i;r=r.__wrapped__}return a.__wrapped__=t,e},np.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof ny){var e=t;return this.__actions__.length&&(e=new ny(this)),(e=e.reverse()).__actions__.push({func:ai,args:[i1],thisArg:n}),new ng(e,this.__chain__)}return this.thru(i1)},np.prototype.toJSON=np.prototype.valueOf=np.prototype.value=function(){return rS(this.__wrapped__,this.__actions__)},np.prototype.first=np.prototype.head,t3&&(np.prototype[t3]=function(){return this}),np}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t7._=eZ,define(function(){return eZ})):t8?((t8.exports=eZ)._=eZ,t4._=eZ):t7._=eZ}).call(this)});var u={};self,t={"./src/drawer.canvasentry.js":/*!***********************************!*\
  !*** ./src/drawer.canvasentry.js ***!
  \***********************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(/*! ./util/style */"./src/util/style.js")),i=a(n(/*! ./util/get-id */"./src/util/get-id.js"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=/*#__PURE__*/function(){var t;function e(){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return t=[{key:"initWave",value:function(t){this.wave=t,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(t){this.progress=t,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(t,e,n,i){this.start=this.wave.offsetLeft/e||0,this.end=this.start+t/e,this.wave.width=n,this.wave.height=i;var a={width:t+"px"};(0,r.default)(this.wave,a),this.hasProgressCanvas&&(this.progress.width=n,this.progress.height=i,(0,r.default)(this.progress,a))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(t,e){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,t),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,e))}},{key:"getFillStyle",value:function(t,e){if("string"==typeof e||e instanceof CanvasGradient)return e;var n=t.createLinearGradient(0,0,0,t.canvas.height);return e.forEach(function(t,r){return n.addColorStop(r/e.length,t)}),n}},{key:"applyCanvasTransforms",value:function(t){t&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(t,e,n,r,i){this.fillRectToContext(this.waveCtx,t,e,n,r,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,t,e,n,r,i)}},{key:"fillRectToContext",value:function(t,e,n,r,i,a){t&&(a?this.drawRoundedRect(t,e,n,r,i,a):t.fillRect(e,n,r,i))}},{key:"drawRoundedRect",value:function(t,e,n,r,i,a){0!==i&&(i<0&&(i*=-1,n-=i),t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),t.fill())}},{key:"drawLines",value:function(t,e,n,r,i,a){this.drawLineToContext(this.waveCtx,t,e,n,r,i,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,t,e,n,r,i,a)}},{key:"drawLineToContext",value:function(t,e,n,r,i,a,s){if(t){var o,u,l=e.length/2,h=Math.round(l*this.start),c=Math.round(l*this.end)+1,f=this.wave.width/(c-h-1),d=r+i,p=n/r;for(t.beginPath(),t.moveTo((h-h)*f,d),t.lineTo((h-h)*f,d-Math.round((e[2*h]||0)/p)),o=h;o<c;o++)u=Math.round((e[2*o]||0)/p),t.lineTo((o-h)*f+this.halfPixel,d-u);for(var m=c-1;m>=h;m--)u=Math.round((e[2*m+1]||0)/p),t.lineTo((m-h)*f+this.halfPixel,d-u);t.lineTo((h-h)*f,d-Math.round((e[2*h+1]||0)/p)),t.closePath(),t.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(t,e,n){var r=this;return"blob"===n?new Promise(function(n){r.wave.toBlob(n,t,e)}):"dataURL"===n?this.wave.toDataURL(t,e):void 0}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();e.default=o,t.exports=e.default},"./src/drawer.js":/*!***********************!*\
  !*** ./src/drawer.js ***!
  \***********************/(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=a(void 0);if(n&&n.has(t))return n.get(t);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=s?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(i,o,u):i[o]=t[o]}return i.default=t,n&&n.set(t,i),i}(n(/*! ./util */"./src/util/index.js"));function a(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(a=function(t){return t?n:e})(t)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=/*#__PURE__*/function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(u,t);var e,n,a=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=o(u);return t=e?Reflect.construct(n,arguments,o(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this)).container=i.withOrientation(t,e.vertical),n.params=e,n.width=0,n.height=e.height*n.params.pixelRatio,n.lastPos=0,n.wrapper=null,n}return n=[{key:"style",value:function(t,e){return i.style(t,e)}},{key:"createWrapper",value:function(){this.wrapper=i.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(t,e){e||t.preventDefault();var n,r=i.withOrientation(t.targetTouches?t.targetTouches[0]:t,this.params.vertical).clientX,a=this.wrapper.getBoundingClientRect(),s=this.width,o=this.getWidth(),u=this.getProgressPixels(a,r);return n=!this.params.fillParent&&s<o?u*(this.params.pixelRatio/s)||0:(u+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i.clamp(n,0,1)}},{key:"getProgressPixels",value:function(t,e){return this.params.rtl?t.right-e:e-t.left}},{key:"setupWrapperEvents",value:function(){var t=this;this.wrapper.addEventListener("click",function(e){var n=i.withOrientation(e,t.params.vertical),r=t.wrapper.offsetHeight-t.wrapper.clientHeight;if(0!==r){var a=t.wrapper.getBoundingClientRect();if(n.clientY>=a.bottom-r)return}t.params.interact&&t.fireEvent("click",e,t.handleEvent(e))}),this.wrapper.addEventListener("dblclick",function(e){t.params.interact&&t.fireEvent("dblclick",e,t.handleEvent(e))}),this.wrapper.addEventListener("scroll",function(e){return t.fireEvent("scroll",e)})}},{key:"drawPeaks",value:function(t,e,n,r){this.setWidth(e)||this.clearWave(),this.params.barWidth?this.drawBars(t,0,n,r):this.drawWave(t,0,n,r)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(t){var e=this.wrapper.scrollWidth*t;this.recenterOnPosition(e,!0)}},{key:"recenterOnPosition",value:function(t,e){var n=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=t-r,s=a-n;if(0!=i){if(!e&&-r<=s&&s<r){var o=this.params.autoCenterRate;o/=r,o*=i,a=n+(s=Math.max(-o,Math.min(o,s)))}(a=Math.max(0,Math.min(i,a)))!=n&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var t=0;if(this.wrapper){var e=this.params.pixelRatio;t=Math.round(this.wrapper.scrollLeft*e),this.params.scrollParent&&(t=Math.min(~~(this.wrapper.scrollWidth*e-this.getWidth()),Math.max(0,t)))}return t}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(t){if(this.width==t)return!1;if(this.width=t,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var e=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:e})}return this.updateSize(),!0}},{key:"setHeight",value:function(t){return t!=this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(t){var e=1/this.params.pixelRatio,n=Math.round(t*this.width)*e;if(n<this.lastPos||n-this.lastPos>=e){if(this.lastPos=n,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(r,this.params.autoCenterImmediately)}this.updateProgress(n)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(t,e,n,r){}},{key:"drawWave",value:function(t,e,n,r){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(t){}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(i.key),i)}}(u.prototype,n),Object.defineProperty(u,"prototype",{writable:!1}),u}(i.Observer);e.default=u,t.exports=e.default},"./src/drawer.multicanvas.js":/*!***********************************!*\
  !*** ./src/drawer.multicanvas.js ***!
  \***********************************/(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(n(/*! ./drawer */"./src/drawer.js")),a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=o(void 0);if(n&&n.has(t))return n.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=a?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}(n(/*! ./util */"./src/util/index.js")),s=u(n(/*! ./drawer.canvasentry */"./src/drawer.canvasentry.js"));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=/*#__PURE__*/function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(o,t);var e,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=h(o);return t=e?Reflect.construct(n,arguments,h(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).maxCanvasWidth=e.maxCanvasWidth,n.maxCanvasElementWidth=Math.round(e.maxCanvasWidth/e.pixelRatio),n.hasProgressCanvas=e.waveColor!=e.progressColor,n.halfPixel=.5/e.pixelRatio,n.canvases=[],n.progressWave=null,n.EntryClass=s.default,n.canvasContextAttributes=e.drawingContextAttributes,n.overlap=2*Math.ceil(e.pixelRatio/2),n.barRadius=e.barRadius||0,n.vertical=e.vertical,n}return n=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=a.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var t=this,e=Math.ceil(Math.round(this.width/this.params.pixelRatio)/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<e;)this.addCanvas();for(;this.canvases.length>e;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,r=this.canvases.length-1;this.canvases.forEach(function(e,i){i==r&&(n=t.width-t.maxCanvasWidth*r),t.updateDimensions(e,n,t.height),e.clearWave()})}},{key:"addCanvas",value:function(){var t=new this.EntryClass;t.canvasContextAttributes=this.canvasContextAttributes,t.hasProgressCanvas=this.hasProgressCanvas,t.halfPixel=this.halfPixel;var e=this.maxCanvasElementWidth*this.canvases.length,n=a.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(n,{position:"absolute",zIndex:2,left:e+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),t.initWave(n),this.hasProgressCanvas){var r=a.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(r,{position:"absolute",left:e+"px",top:0,bottom:0,height:"100%"}),t.initProgress(r)}this.canvases.push(t)}},{key:"removeCanvas",value:function(){var t=this.canvases[this.canvases.length-1];t.wave.parentElement.removeChild(t.wave.domElement),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress.domElement),t&&(t.destroy(),t=null),this.canvases.pop()}},{key:"updateDimensions",value:function(t,e,n){var r=Math.round(e/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);t.updateDimensions(r,i,e,n),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var t=this;a.frame(function(){t.canvases.forEach(function(t){return t.clearWave()})})()}},{key:"drawBars",value:function(t,e,n,r){var i=this;return this.prepareDraw(t,e,n,r,function(t){var e=t.absmax,a=t.hasMinVals,s=(t.height,t.offsetY),o=t.halfH,u=t.peaks,l=t.channelIndex;if(void 0!==n)for(var h=a?2:1,c=u.length/h,f=i.params.barWidth*i.params.pixelRatio,d=null===i.params.barGap?Math.max(i.params.pixelRatio,~~(f/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio),p=f+d,m=c/i.width,v=n;v<r;v+=p){var g=0,y=Math.floor(v*m)*h,b=Math.floor((v+p)*m)*h;do{var w=Math.abs(u[y]);w>g&&(g=w),y+=h}while(y<b)var k=Math.round(g/e*o);i.params.barMinHeight&&(k=Math.max(k,i.params.barMinHeight)),i.fillRect(v+i.halfPixel,o-k+s,f+i.halfPixel,2*k,i.barRadius,l)}})}},{key:"drawWave",value:function(t,e,n,r){var i=this;return this.prepareDraw(t,e,n,r,function(t){var e=t.absmax,a=t.hasMinVals,s=(t.height,t.offsetY),o=t.halfH,u=t.peaks,l=t.channelIndex;if(!a){for(var h=[],c=u.length,f=0;f<c;f++)h[2*f]=u[f],h[2*f+1]=-u[f];u=h}void 0!==n&&i.drawLine(u,e,o,s,n,r,l),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel,i.barRadius,l)})}},{key:"drawLine",value:function(t,e,n,r,i,a,s){var o=this,u=this.params.splitChannelsOptions.channelColors[s]||{},l=u.waveColor,h=u.progressColor;this.canvases.forEach(function(s,u){o.setFillStyles(s,l,h),o.applyCanvasTransforms(s,o.params.vertical),s.drawLines(t,e,n,r,i,a)})}},{key:"fillRect",value:function(t,e,n,r,i,a){for(var s=Math.floor(t/this.maxCanvasWidth),o=Math.min(Math.ceil((t+n)/this.maxCanvasWidth)+1,this.canvases.length),u=s;u<o;u++){var l=this.canvases[u],h=u*this.maxCanvasWidth,c={x1:Math.max(t,u*this.maxCanvasWidth),y1:e,x2:Math.min(t+n,u*this.maxCanvasWidth+l.wave.width),y2:e+r};if(c.x1<c.x2){var f=this.params.splitChannelsOptions.channelColors[a]||{},d=f.waveColor,p=f.progressColor;this.setFillStyles(l,d,p),this.applyCanvasTransforms(l,this.params.vertical),l.fillRects(c.x1-h,c.y1,c.x2-c.x1,c.y2-c.y1,i)}}}},{key:"hideChannel",value:function(t){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(t)}},{key:"prepareDraw",value:function(t,e,n,r,i,s,o){var u=this;return a.frame(function(){if(t[0]instanceof Array){var l=t;if(u.params.splitChannels){var h,c=l.filter(function(t,e){return!u.hideChannel(e)});return u.params.splitChannelsOptions.overlay||u.setHeight(Math.max(c.length,1)*u.params.height*u.params.pixelRatio),u.params.splitChannelsOptions&&u.params.splitChannelsOptions.relativeNormalization&&(h=a.max(l.map(function(t){return a.absMax(t)}))),l.forEach(function(t,e){return u.prepareDraw(t,e,n,r,i,c.indexOf(t),h)})}t=l[0]}if(!u.hideChannel(e)){var f=1/u.params.barHeight;u.params.normalize&&(f=void 0===o?a.absMax(t):o);var d=[].some.call(t,function(t){return t<0}),p=u.params.height*u.params.pixelRatio,m=p*s||0;return u.params.splitChannelsOptions&&u.params.splitChannelsOptions.overlay&&(m=0),i({absmax:f,hasMinVals:d,height:p,offsetY:m,halfH:p/2,peaks:t,channelIndex:e})}})()}},{key:"setFillStyles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;t.setFillStyles(e,n)}},{key:"applyCanvasTransforms",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.applyCanvasTransforms(e)}},{key:"getImage",value:function(t,e,n){if("blob"===n)return Promise.all(this.canvases.map(function(r){return r.getImage(t,e,n)}));if("dataURL"===n){var r=this.canvases.map(function(r){return r.getImage(t,e,n)});return r.length>1?r:r[0]}}},{key:"updateProgress",value:function(t){this.style(this.progressWave,{width:t+"px"})}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(i.key),i)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(i.default);e.default=c,t.exports=e.default},"./src/mediaelement-webaudio.js":/*!**************************************!*\
  !*** ./src/mediaelement-webaudio.js ***!
  \**************************************/(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,u=/*#__PURE__*/function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(u,t);var e,n,o=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=s(u);return t=e?Reflect.construct(n,arguments,s(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,u),(e=o.call(this,t)).params=t,e.sourceMediaElement=null,e}return n=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(t,e,n){i(s(u.prototype),"_load",this).call(this,t,e,n),this.createMediaElementSource(t)}},{key:"createMediaElementSource",value:function(t){this.sourceMediaElement=this.ac.createMediaElementSource(t),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(t,e){return this.resumeAudioContext(),i(s(u.prototype),"play",this).call(this,t,e)}},{key:"destroy",value:function(){i(s(u.prototype),"destroy",this).call(this),this.destroyWebAudio()}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(i.key),i)}}(u.prototype,n),Object.defineProperty(u,"prototype",{writable:!1}),u}(((o=n(/*! ./mediaelement */"./src/mediaelement.js"))&&o.__esModule?o:{default:o}).default);e.default=u,t.exports=e.default},"./src/mediaelement.js":/*!*****************************!*\
  !*** ./src/mediaelement.js ***!
  \*****************************/(t,e,n)=>{function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,a=(i=n(/*! ./webaudio */"./src/webaudio.js"))&&i.__esModule?i:{default:i},s=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var n=o(void 0);if(n&&n.has(t))return n.get(t);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var u=a?Object.getOwnPropertyDescriptor(t,s):null;u&&(u.get||u.set)?Object.defineProperty(i,s,u):i[s]=t[s]}return i.default=t,n&&n.set(t,i),i}(n(/*! ./util */"./src/util/index.js"));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function u(){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}}).apply(this,arguments)}function l(t,e){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var c=/*#__PURE__*/function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(a,t);var e,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=h(a);return t=e?Reflect.construct(n,arguments,h(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t)).params=t,e.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},e.mediaType=t.mediaType.toLowerCase(),e.elementPosition=t.elementPosition,e.peaks=null,e.playbackRate=1,e.volume=1,e.isMuted=!1,e.buffer=null,e.onPlayEnd=null,e.mediaListeners={},e}return n=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var t=this;this.mediaListeners.error=function(){t.fireEvent("error","Error loading media element")},this.mediaListeners.waiting=function(){t.fireEvent("waiting")},this.mediaListeners.canplay=function(){t.fireEvent("canplay")},this.mediaListeners.ended=function(){t.fireEvent("finish")},this.mediaListeners.play=function(){t.fireEvent("play")},this.mediaListeners.pause=function(){t.fireEvent("pause")},this.mediaListeners.seeked=function(e){t.fireEvent("seek")},this.mediaListeners.volumechange=function(e){t.isMuted=t.media.muted,t.isMuted?t.volume=0:t.volume=t.media.volume,t.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(e){t.media.removeEventListener(e,t.mediaListeners[e]),t.media.addEventListener(e,t.mediaListeners[e])})}},{key:"createTimer",value:function(){var t=this;this.on("play",function e(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),s.frame(e)())}),this.on("pause",function(){t.fireEvent("audioprocess",t.getCurrentTime())})}},{key:"load",value:function(t,e,n,r){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==r?"auto":r,i.src=t,i.style.width="100%";var a=e.querySelector(this.mediaType);a&&e.removeChild(a),e.appendChild(i),this._load(i,n,r)}},{key:"loadElt",value:function(t,e){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,e,t.preload)}},{key:"_load",value:function(t,e,n){if(!(t instanceof HTMLMediaElement)||void 0===t.addEventListener)throw Error("media parameter is not a valid media element");"function"!=typeof t.load||e&&"none"==n||t.load(),this.media=t,this._setupMediaListeners(),this.peaks=e,this.onPlayEnd=null,this.buffer=null,this.isMuted=t.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return t>=1/0&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){null==t||isNaN(t)||(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,e){this.seekTo(t);var n=this.media.play();return e&&this.setPlayEnd(e),n}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var e=this;this.clearPlayEnd(),this._onPlayEnd=function(n){n>=t&&(e.pause(),e.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,e,n){return this.buffer?u(h(a.prototype),"getPeaks",this).call(this,t,e,n):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(Error("setSinkId is not supported in your browser")):Promise.reject(Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(t){this.isMuted=this.media.muted=t}},{key:"destroy",value:function(){var t=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(e){t.media&&t.media.removeEventListener(e,t.mediaListeners[e])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}],function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==r(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===r(e)?e:String(e)}(i.key),i)}}(a.prototype,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(a.default);e.default=c,t.exports=e.default},"./src/peakcache.js":/*!**************************!*\
  !*** ./src/peakcache.js ***!
  \**************************/(t,e)=>{function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=/*#__PURE__*/function(){var t;function e(){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),this.clearPeakCache()}return t=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(t,e,n){t!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=t);for(var r=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<e;)i++;for(i%2==0&&r.push(e);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=n;)r.push(this.peakCacheRanges[i]),i++;i%2==0&&r.push(n),r=r.filter(function(t,e,n){return 0==e?t!=n[e+1]:e==n.length-1?t!=n[e-1]:t!=n[e-1]&&t!=n[e+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(r),this.peakCacheRanges=this.peakCacheRanges.sort(function(t,e){return t-e}).filter(function(t,e,n){return 0==e?t!=n[e+1]:e==n.length-1?t!=n[e-1]:t!=n[e-1]&&t!=n[e+1]});var a=[];for(i=0;i<r.length;i+=2)a.push([r[i],r[i+1]]);return a}},{key:"getCacheRanges",value:function(){var t,e=[];for(t=0;t<this.peakCacheRanges.length;t+=2)e.push([this.peakCacheRanges[t],this.peakCacheRanges[t+1]]);return e}}],function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();e.default=r,t.exports=e.default},"./src/util/absMax.js":/*!****************************!*\
  !*** ./src/util/absMax.js ***!
  \****************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(0,r.default)(t),n=(0,i.default)(t);return-n>e?-n:e};var r=a(n(/*! ./max */"./src/util/max.js")),i=a(n(/*! ./min */"./src/util/min.js"));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},"./src/util/clamp.js":/*!***************************!*\
  !*** ./src/util/clamp.js ***!
  \***************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return Math.min(Math.max(e,t),n)},t.exports=e.default},"./src/util/fetch.js":/*!***************************!*\
  !*** ./src/util/fetch.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(t){if(!t.url)throw Error("fetch url missing")}else throw Error("fetch options missing");var e=new i.default,n=new Headers,r=new Request(t.url);e.controller=new AbortController,t&&t.requestHeaders&&t.requestHeaders.forEach(function(t){n.append(t.key,t.value)});var a=t.responseType||"json",o={method:t.method||"GET",headers:n,mode:t.mode||"cors",credentials:t.credentials||"same-origin",cache:t.cache||"default",redirect:t.redirect||"follow",referrer:t.referrer||"client",signal:e.controller.signal};return fetch(r,o).then(function(t){e.response=t;var n=!0;t.body||(n=!1);var r=t.headers.get("content-length");return(null===r&&(n=!1),n)?(e.onProgress=function(t){e.fireEvent("progress",t)},new Response(new ReadableStream(new s(e,r,t)),o)):t}).then(function(t){var e;if(t.ok)switch(a){case"arraybuffer":return t.arrayBuffer();case"json":return t.json();case"blob":return t.blob();case"text":return t.text();default:e="Unknown responseType: "+a}throw e||(e="HTTP error status: "+t.status),Error(e)}).then(function(t){e.fireEvent("success",t)}).catch(function(t){e.fireEvent("error",t)}),e.fetchRequest=r,e};var r,i=(r=n(/*! ./observer */"./src/util/observer.js"))&&r.__esModule?r:{default:r};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=/*#__PURE__*/function(){var t;function e(t,n,r){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),this.instance=t,this.instance._reader=r.body.getReader(),this.total=parseInt(n,10),this.loaded=0}return t=[{key:"start",value:function(t){var e=this;!function n(){e.instance._reader.read().then(function(r){var i=r.done,a=r.value;if(i){0===e.total&&e.instance.onProgress.call(e.instance,{loaded:e.loaded,total:e.total,lengthComputable:!1}),t.close();return}e.loaded+=a.byteLength,e.instance.onProgress.call(e.instance,{loaded:e.loaded,total:e.total,lengthComputable:0!==e.total}),t.enqueue(a),n()}).catch(function(e){t.error(e)})}()}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(r.key),r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();t.exports=e.default},"./src/util/frame.js":/*!***************************!*\
  !*** ./src/util/frame.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,i.default)(function(){return t.apply(void 0,n)})}};var r,i=(r=n(/*! ./request-animation-frame */"./src/util/request-animation-frame.js"))&&r.__esModule?r:{default:r};t.exports=e.default},"./src/util/get-id.js":/*!****************************!*\
  !*** ./src/util/get-id.js ***!
  \****************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return void 0===t&&(t="wavesurfer_"),t+Math.random().toString(32).substring(2)},t.exports=e.default},"./src/util/index.js":/*!***************************!*\
  !*** ./src/util/index.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Observer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"absMax",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"clamp",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"fetchFile",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"frame",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"getId",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"ignoreSilenceMode",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"max",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"min",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"preventClick",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"style",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"withOrientation",{enumerable:!0,get:function(){return m.default}});var r=g(n(/*! ./get-id */"./src/util/get-id.js")),i=g(n(/*! ./max */"./src/util/max.js")),a=g(n(/*! ./min */"./src/util/min.js")),s=g(n(/*! ./absMax */"./src/util/absMax.js")),o=g(n(/*! ./observer */"./src/util/observer.js")),u=g(n(/*! ./style */"./src/util/style.js")),l=g(n(/*! ./request-animation-frame */"./src/util/request-animation-frame.js")),h=g(n(/*! ./frame */"./src/util/frame.js")),c=g(n(/*! debounce */"./node_modules/debounce/index.js")),f=g(n(/*! ./prevent-click */"./src/util/prevent-click.js")),d=g(n(/*! ./fetch */"./src/util/fetch.js")),p=g(n(/*! ./clamp */"./src/util/clamp.js")),m=g(n(/*! ./orientation */"./src/util/orientation.js")),v=g(n(/*! ./silence-mode */"./src/util/silence-mode.js"));function g(t){return t&&t.__esModule?t:{default:t}}},"./src/util/max.js":/*!*************************!*\
  !*** ./src/util/max.js ***!
  \*************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=-1/0;return Object.keys(t).forEach(function(n){t[n]>e&&(e=t[n])}),e},t.exports=e.default},"./src/util/min.js":/*!*************************!*\
  !*** ./src/util/min.js ***!
  \*************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Number(1/0);return Object.keys(t).forEach(function(n){t[n]<e&&(e=t[n])}),e},t.exports=e.default},"./src/util/observer.js":/*!******************************!*\
  !*** ./src/util/observer.js ***!
  \******************************/(t,e)=>{function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=/*#__PURE__*/function(){var t;function e(){(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,e),this._disabledEventEmissions=[],this.handlers=null}return t=[{key:"on",value:function(t,e){var n=this;this.handlers||(this.handlers={});var r=this.handlers[t];return r||(r=this.handlers[t]=[]),r.push(e),{name:t,callback:e,un:function(t,e){return n.un(t,e)}}}},{key:"un",value:function(t,e){if(this.handlers){var n,r=this.handlers[t];if(r){if(e)for(n=r.length-1;n>=0;n--)r[n]==e&&r.splice(n,1);else r.length=0}}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(t,e){var n=this;return this.on(t,function r(){for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];e.apply(n,a),setTimeout(function(){n.un(t,r)},0)})}},{key:"setDisabledEventEmissions",value:function(t){this._disabledEventEmissions=t}},{key:"_isDisabledEventEmission",value:function(t){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(t)}},{key:"fireEvent",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!(!this.handlers||this._isDisabledEventEmission(t))){var i=this.handlers[t];i&&i.forEach(function(t){t.apply(void 0,n)})}}}],function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===n(e)?e:String(e)}(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();e.default=r,t.exports=e.default},"./src/util/orientation.js":/*!*********************************!*\
  !*** ./src/util/orientation.js ***!
  \*********************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function t(e,n){return e[i]?e:new Proxy(e,{get:function(e,a,s){if(a===i)return!0;if("domElement"===a)return e;if("style"===a)return t(e.style,n);if("canvas"===a)return t(e.canvas,n);if("getBoundingClientRect"===a)return function(){return t(e.getBoundingClientRect.apply(e,arguments),n)};if("getContext"===a)return function(){return t(e.getContext.apply(e,arguments),n)};var o=e[r(a,n)];return"function"==typeof o?o.bind(e):o},set:function(t,e,i){return t[r(e,n)]=i,!0}})};var n={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function r(t,e){return Object.prototype.hasOwnProperty.call(n,t)&&e?n[t]:t}var i=Symbol("isProxy");t.exports=e.default},"./src/util/prevent-click.js":/*!***********************************!*\
  !*** ./src/util/prevent-click.js ***!
  \***********************************/(t,e)=>{function n(t){t.stopPropagation(),document.body.removeEventListener("click",n,!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){document.body.addEventListener("click",n,!0)},t.exports=e.default},"./src/util/request-animation-frame.js":/*!*********************************************!*\
  !*** ./src/util/request-animation-frame.js ***!
  \*********************************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return setTimeout(t,1e3/60)}).bind(window);e.default=n,t.exports=e.default},"./src/util/silence-mode.js":/*!**********************************!*\
  !*** ./src/util/silence-mode.js ***!
  \**********************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=new AudioContext,e=t.createBufferSource();e.buffer=t.createBuffer(1,1,44100),e.connect(t.destination),e.start();var n=document.createElement("div");n.innerHTML='<audio x-webkit-airplay="deny"></audio>';var r=n.children.item(0);r.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",r.preload="auto",r.type="audio/mpeg",r.disableRemotePlayback=!0,r.play(),r.remove(),n.remove()},t.exports=e.default},"./src/util/style.js":/*!***************************!*\
  !*** ./src/util/style.js ***!
  \***************************/(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return Object.keys(e).forEach(function(n){t.style[n]!==e[n]&&(t.style[n]=e[n])}),t},t.exports=e.default},"./src/wavesurfer.js":/*!***************************!*\
  !*** ./src/wavesurfer.js ***!
  \***************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==v(t)&&"function"!=typeof t)return{default:t};var n=h(void 0);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var s=i?Object.getOwnPropertyDescriptor(t,a):null;s&&(s.get||s.set)?Object.defineProperty(r,a,s):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}(n(/*! ./util */"./src/util/index.js")),i=l(n(/*! ./drawer.multicanvas */"./src/drawer.multicanvas.js")),a=l(n(/*! ./webaudio */"./src/webaudio.js")),s=l(n(/*! ./mediaelement */"./src/mediaelement.js")),o=l(n(/*! ./peakcache */"./src/peakcache.js")),u=l(n(/*! ./mediaelement-webaudio */"./src/mediaelement-webaudio.js"));function l(t){return t&&t.__esModule?t:{default:t}}function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(h=function(t){return t?n:e})(t)}function c(t,e){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y(r.key),r)}}function y(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==v(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}var b=/*#__PURE__*/function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(v,t);var e,n,l,h=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=p(v);return t=e?Reflect.construct(n,arguments,p(this).constructor):n.apply(this,arguments),f(this,t)});function v(t){if(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,v),m(d(e=h.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:i.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),m(d(e),"backends",{MediaElement:s.default,WebAudio:a.default,MediaElementWebAudio:u.default}),m(d(e),"util",r),e.params=Object.assign({},e.defaultParams,t),e.params.splitChannelsOptions=Object.assign({},e.defaultParams.splitChannelsOptions,t.splitChannelsOptions),e.container="string"==typeof t.container?document.querySelector(e.params.container):e.params.container,!e.container)throw Error("Container element not found");if(null==e.params.mediaContainer?e.mediaContainer=e.container:"string"==typeof e.params.mediaContainer?e.mediaContainer=document.querySelector(e.params.mediaContainer):e.mediaContainer=e.params.mediaContainer,!e.mediaContainer)throw Error("Media Container element not found");if(e.params.maxCanvasWidth<=1)throw Error("maxCanvasWidth must be greater than 1");if(e.params.maxCanvasWidth%2==1)throw Error("maxCanvasWidth must be an even number");if(!0===e.params.rtl&&(!0===e.params.vertical?r.style(e.container,{transform:"rotateX(180deg)"}):r.style(e.container,{transform:"rotateY(180deg)"})),e.params.backgroundColor&&e.setBackgroundColor(e.params.backgroundColor),e.savedVolume=0,e.isMuted=!1,e.tmpEvents=[],e.currentRequest=null,e.arraybuffer=null,e.drawer=null,e.backend=null,e.peakCache=null,"function"!=typeof e.params.renderer)throw Error("Renderer parameter is invalid");e.Drawer=e.params.renderer,"AudioElement"==e.params.backend&&(e.params.backend="MediaElement"),"WebAudio"!=e.params.backend&&"MediaElementWebAudio"!==e.params.backend||a.default.prototype.supportsWebAudio.call(null)||(e.params.backend="MediaElement"),e.Backend=e.backends[e.params.backend],e.initialisedPluginList={},e.isDestroyed=!1,e.isReady=!1;var e,n=0;return e._onResize=r.debounce(function(){e.drawer.wrapper&&n!=e.drawer.wrapper.clientWidth&&!e.params.scrollParent&&(n=e.drawer.wrapper.clientWidth)&&e.drawer.fireEvent("redraw")},"number"==typeof e.params.responsive?e.params.responsive:100),f(e,d(e))}return n=[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(t){var e=this;return t.forEach(function(t){return e.addPlugin(t)}),t.forEach(function(t){t.deferInit||e.initPlugin(t.name)}),this.fireEvent("plugins-registered",t),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(t){var e=this;if(!t.name)throw Error("Plugin does not have a name!");if(!t.instance)throw Error("Plugin ".concat(t.name," does not have an instance property!"));t.staticProps&&Object.keys(t.staticProps).forEach(function(n){e[n]=t.staticProps[n]});var n=t.instance;return Object.getOwnPropertyNames(r.Observer.prototype).forEach(function(t){n.prototype[t]=r.Observer.prototype[t]}),this[t.name]=new n(t.params||{},this),this.fireEvent("plugin-added",t.name),this}},{key:"initPlugin",value:function(t){if(!this[t])throw Error("Plugin ".concat(t," has not been added yet!"));return this.initialisedPluginList[t]&&this.destroyPlugin(t),this[t].init(),this.initialisedPluginList[t]=!0,this.fireEvent("plugin-initialised",t),this}},{key:"destroyPlugin",value:function(t){if(!this[t])throw Error("Plugin ".concat(t," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[t])throw Error("Plugin ".concat(t," is not active and cannot be destroyed!"));if("function"!=typeof this[t].destroy)throw Error("Plugin ".concat(t," does not have a destroy function!"));return this[t].destroy(),delete this.initialisedPluginList[t],this.fireEvent("plugin-destroyed",t),this}},{key:"destroyAllPlugins",value:function(){var t=this;Object.keys(this.initialisedPluginList).forEach(function(e){return t.destroyPlugin(e)})}},{key:"createDrawer",value:function(){var t=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())}),this.drawer.on("click",function(e,n){setTimeout(function(){return t.seekTo(n)},0)}),this.drawer.on("scroll",function(e){t.params.partialRender&&t.drawBuffer(),t.fireEvent("scroll",e)}),this.drawer.on("dblclick",function(e,n){t.fireEvent("dblclick",e,n)})}},{key:"createBackend",value:function(){var t=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("finish")}),this.backend.on("play",function(){return t.fireEvent("play")}),this.backend.on("pause",function(){return t.fireEvent("pause")}),this.backend.on("audioprocess",function(e){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("audioprocess",e)}),("MediaElement"===this.params.backend||"MediaElementWebAudio"===this.params.backend)&&(this.backend.on("seek",function(){t.drawer.progress(t.backend.getPlayedPercents())}),this.backend.on("volume",function(){var e=t.getVolume();t.fireEvent("volume",e),t.backend.isMuted!==t.isMuted&&(t.isMuted=t.backend.isMuted,t.fireEvent("mute",t.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new o.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(t){t>=this.getDuration()?this.seekTo(1):this.seekTo(t/this.getDuration())}},{key:"play",value:function(t,e){var n=this;return this.params.ignoreSilenceMode&&r.ignoreSilenceMode(),this.fireEvent("interaction",function(){return n.play(t,e)}),this.backend.play(t,e)}},{key:"setPlayEnd",value:function(t){this.backend.setPlayEnd(t)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(t){this.skip(-t||-this.params.skipLength)}},{key:"skipForward",value:function(t){this.skip(t||this.params.skipLength)}},{key:"skip",value:function(t){var e=this.getDuration()||1,n=this.getCurrentTime()||0;n=Math.max(0,Math.min(e,n+(t||0))),this.seekAndCenter(n/e)}},{key:"seekAndCenter",value:function(t){this.seekTo(t),this.drawer.recenter(t)}},{key:"seekTo",value:function(t){var e=this;if("number"!=typeof t||!isFinite(t)||t<0||t>1)throw Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return e.seekTo(t)});var n="WebAudio"===this.params.backend,r=this.backend.isPaused();n&&!r&&this.backend.pause();var i=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(t*this.getDuration()),this.drawer.progress(t),n&&!r&&this.backend.play(),this.params.scrollParent=i,this.fireEvent("seek",t)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(t){return this.backend.setSinkId(t)}},{key:"setVolume",value:function(t){if(!0===this.isMuted){this.savedVolume=t;return}this.backend.setVolume(t),this.fireEvent("volume",t)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(t){this.backend.setPlaybackRate(t)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(t){if(t===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(t),this.isMuted=t):t?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor=t:this.params.waveColor=t,this.drawBuffer()}},{key:"getProgressColor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(t,e){this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor=t:this.params.progressColor=t,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(t){this.params.backgroundColor=t,r.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(t){this.params.cursorColor=t,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(t){this.params.height=t,this.drawer.setHeight(t*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(t){this.params.splitChannelsOptions.filterChannels=t,this.drawBuffer()}},{key:"drawBuffer",value:function(){var t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),e=this.drawer.getWidth(),n=t,r=0,i=Math.max(0+e,n);if(this.params.fillParent&&(!this.params.scrollParent||t<e)&&(r=0,i=n=e),this.params.partialRender){var a,s,o=this.peakCache.addRangeToPeakCache(n,r,i);for(s=0;s<o.length;s++)a=this.backend.getPeaks(n,o[s][0],o[s][1]),this.drawer.drawPeaks(a,n,o[s][0],o[s][1])}else a=this.backend.getPeaks(n,r,i),this.drawer.drawPeaks(a,n,r,i);this.fireEvent("redraw",a,n)}},{key:"zoom",value:function(t){t?(this.params.minPxPerSec=t,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)}},{key:"loadArrayBuffer",value:function(t){var e=this;this.decodeArrayBuffer(t,function(t){e.isDestroyed||e.loadDecodedBuffer(t)})}},{key:"loadDecodedBuffer",value:function(t){this.backend.load(t),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(t){var e=this,n=new FileReader;n.addEventListener("progress",function(t){return e.onProgress(t)}),n.addEventListener("load",function(t){return e.loadArrayBuffer(t.target.result)}),n.addEventListener("error",function(){return e.fireEvent("error","Error reading file")}),n.readAsArrayBuffer(t),this.empty()}},{key:"load",value:function(t,e,n,r){if(!t)throw Error("url parameter cannot be empty");if(this.empty(),n){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(n),"Peaks are not provided":!e,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof t},a=Object.keys(i).filter(function(t){return i[t]});a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n	- "+a.join("\n	- ")),n=null)}switch("WebAudio"===this.params.backend&&t instanceof HTMLMediaElement&&(t=t.src),this.params.backend){case"WebAudio":return this.loadBuffer(t,e,r);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(t,e,n,r)}}},{key:"loadBuffer",value:function(t,e,n){var r=this,i=function(e){return e&&r.tmpEvents.push(r.once("ready",e)),r.getArrayBuffer(t,function(t){return r.loadArrayBuffer(t)})};if(!e)return i();this.backend.setPeaks(e,n),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(t,e,n,r){var i=this,a=t;"string"==typeof t?this.backend.load(a,this.mediaContainer,e,n):(this.backend.loadElt(t,e),a=t.src),this.tmpEvents.push(this.backend.once("canplay",function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))}),this.backend.once("error",function(t){return i.fireEvent("error",t)})),e&&(this.backend.setPeaks(e,r),this.drawBuffer(),this.fireEvent("waveform-ready")),(!e||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(a,function(t){i.decodeArrayBuffer(t,function(t){i.backend.buffer=t,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(t,e){var n=this;this.isDestroyed||(this.arraybuffer=t,this.backend.decodeArrayBuffer(t,function(r){n.isDestroyed||n.arraybuffer!=t||(e(r),n.arraybuffer=null)},function(){return n.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(t,e){var n=this,i=Object.assign({url:t,responseType:"arraybuffer"},this.params.xhr),a=r.fetchFile(i);return this.currentRequest=a,this.tmpEvents.push(a.on("progress",function(t){n.onProgress(t)}),a.on("success",function(t){e(t),n.currentRequest=null}),a.on("error",function(t){n.fireEvent("error",t),n.currentRequest=null})),a}},{key:"onProgress",value:function(t){var e;e=t.lengthComputable?t.loaded/t.total:t.loaded/(t.loaded+1e6),this.fireEvent("loading",Math.round(100*e),t.target)}},{key:"exportPCM",value:function(t,e,n,r,i){t=t||1024,r=r||0,e=e||1e4,n=n||!1;var a=this.backend.getPeaks(t,r,i),s=[].map.call(a,function(t){return Math.round(t*e)/e});return new Promise(function(t,e){if(!n){var r=new Blob([JSON.stringify(s)],{type:"application/json;charset=utf-8"}),i=URL.createObjectURL(r);window.open(i),URL.revokeObjectURL(i)}t(s)})}},{key:"exportImage",value:function(t,e,n){return t||(t="image/png"),e||(e=1),n||(n="dataURL"),this.drawer.getImage(t,e,n)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(t){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(t){return t.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],l=[{key:"create",value:function(t){return new v(t).init()}}],n&&g(v.prototype,n),l&&g(v,l),Object.defineProperty(v,"prototype",{writable:!1}),v}(r.Observer);e.default=b,m(b,"VERSION","6.6.4"),m(b,"util",r),t.exports=e.default},"./src/webaudio.js":/*!*************************!*\
  !*** ./src/webaudio.js ***!
  \*************************/(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=i(void 0);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=s?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}(n(/*! ./util */"./src/util/index.js"));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function o(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}var c="playing",f="paused",d="finished",p=/*#__PURE__*/function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(p,t);var e,n,i=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,n=u(p);return t=e?Reflect.construct(n,arguments,u(this).constructor):n.apply(this,arguments),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return o(t)}(this,t)});function p(t){var e,n,r;return function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,p),l(o(r=i.call(this)),"audioContext",null),l(o(r),"stateBehaviors",(l(e={},c,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),l(e,f,{init:function(){},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition}}),l(e,d,{init:function(){this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),e)),r.params=t,r.ac=t.audioContext||(r.supportsWebAudio()?r.getAudioContext():{}),r.lastPlay=r.ac.currentTime,r.startPosition=0,r.scheduledPause=null,r.states=(l(n={},c,Object.create(r.stateBehaviors[c])),l(n,f,Object.create(r.stateBehaviors[f])),l(n,d,Object.create(r.stateBehaviors[d])),n),r.buffer=null,r.filters=[],r.gainNode=null,r.mergedPeaks=null,r.offlineAc=null,r.peaks=null,r.playbackRate=1,r.analyser=null,r.scriptNode=null,r.source=null,r.splitPeaks=[],r.state=null,r.explicitDuration=t.duration,r.sinkStreamDestination=null,r.sinkAudioElement=null,r.destroyed=!1,r}return n=[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(f),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(t){t&&t.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this.setFilters(e)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce(function(t,e){return t.connect(e),e},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor&&(this.scriptNode=this.params.audioScriptProcessor,this.scriptNode.connect(this.ac.destination))}},{key:"addOnAudioProcess",value:function(){var t=this;!function e(){var n=t.getCurrentTime();n>=t.getDuration()&&t.state!==t.states[d]?(t.setState(d),t.fireEvent("pause")):n>=t.scheduledPause&&t.state!==t.states[f]?t.pause():t.state===t.states[c]&&(t.fireEvent("audioprocess",n),r.frame(e)())}()}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){return t?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId)?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(t)):Promise.reject(Error("setSinkId is not supported in your browser")):Promise.reject(Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,e,n){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(t,function(t){return e(t)},n):this.offlineAc.decodeAudioData(t).then(function(t){return e(t)}).catch(function(t){return n(t)})}},{key:"setPeaks",value:function(t,e){null!=e&&(this.explicitDuration=e),this.peaks=t}},{key:"setLength",value:function(t){if(!this.mergedPeaks||t!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var e,n=this.buffer?this.buffer.numberOfChannels:1;for(e=0;e<n;e++)this.splitPeaks[e]=[],this.splitPeaks[e][2*(t-1)]=0,this.splitPeaks[e][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,e,n){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(e=e||0,n=n||t-1,this.setLength(t),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var r,i=this.createBuffer(1,4096,this.sampleRate);this.buffer=i.buffer}var a=this.buffer.length/t,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(r=0;r<o;r++){var u=this.splitPeaks[r],l=this.buffer.getChannelData(r),h=void 0;for(h=e;h<=n;h++){var c=~~(h*a),f=~~(c+a),d=l[c],p=d,m=void 0;for(m=c;m<f;m+=s){var v=l[m];v>p&&(p=v),v<d&&(d=v)}u[2*h]=p,u[2*h+1]=d,(0==r||p>this.mergedPeaks[2*h])&&(this.mergedPeaks[2*h]=p),(0==r||d<this.mergedPeaks[2*h+1])&&(this.mergedPeaks[2*h+1]=d)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode&&this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[c]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(t,e){if(this.buffer)return this.scheduledPause=null,null==t&&(t=this.getCurrentTime())>=this.getDuration()&&(t=0),null==e&&(e=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[d]&&this.setState(f),{start:t,end:e}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,e){if(this.buffer){this.createSource();var n=this.seekTo(t,e);t=n.start,e=n.end,this.scheduledPause=e,this.source.start(0,t),this.resumeAudioContext(),this.setState(c),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(t){}this.setState(f),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(t){this.scheduledPause=t}}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}(p.prototype,n),Object.defineProperty(p,"prototype",{writable:!1}),p}(r.Observer);e.default=p,t.exports=e.default},"./node_modules/debounce/index.js":/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/t=>{function e(t,e,n){function r(){var l=Date.now()-o;l<e&&l>=0?i=setTimeout(r,e-l):(i=null,n||(u=t.apply(s,a),s=a=null))}null==e&&(e=100);var i,a,s,o,u,l=function(){s=this,a=arguments,o=Date.now();var l=n&&!i;return i||(i=setTimeout(r,e)),l&&(u=t.apply(s,a),s=a=null),u};return l.clear=function(){i&&(clearTimeout(i),i=null)},l.flush=function(){i&&(u=t.apply(s,a),s=a=null,clearTimeout(i),i=null)},l}e.debounce=e,t.exports=e}},e={},u=function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}("./src/wavesurfer.js");class l{static create(t){return{name:"markers",deferInit:!!t&&!!t.deferInit&&t.deferInit,params:t,staticProps:{addMarker(t){return this.initialisedPluginList.markers||this.initPlugin("markers"),this.markers.add(t)},getMarkers(){return this.markers},clearMarkers(){this.markers&&this.markers.clear()}},instance:l}}constructor(t,e){this.params=t,this.wavesurfer=e,this.util=e.util,this.style=this.util.style,this.markerLineWidth=1,this.markerWidth=11,this.markerHeight=22,this.dragging=!1,this._onResize=()=>{this._updateMarkerPositions()},this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.params.markers&&this.params.markers.forEach(t=>this.add(t)),window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0),this.wavesurfer.on("zoom",this._onResize),this.markers.find(t=>t.draggable)&&(this.onMouseMove=t=>this._onMouseMove(t),window.addEventListener("mousemove",this.onMouseMove),this.onMouseUp=t=>this._onMouseUp(t),window.addEventListener("mouseup",this.onMouseUp))},this.markers=[],this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this._updateMarkerPositions()}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.un("zoom",this._onResize),window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0),this.onMouseMove&&window.removeEventListener("mousemove",this.onMouseMove),this.onMouseUp&&window.removeEventListener("mouseup",this.onMouseUp),this.clear()}add(t){let e={time:t.time,label:t.label,tooltip:t.tooltip,color:t.color||"#D8D8D8",position:t.position||"bottom",draggable:!!t.draggable,preventContextMenu:!!t.preventContextMenu};return e.el=this._createMarkerElement(e,t.markerElement),this.wrapper.appendChild(e.el),this.markers.push(e),this._updateMarkerPositions(),this._registerEvents(),e}remove(t){let e=t;isNaN(e)&&(e=this.markers.findIndex(e=>e===t));let n=this.markers[e];if(!n)return;let r=n.el.getElementsByClassName("marker-label")[0];r&&(r._onContextMenu&&r.removeEventListener("contextmenu",r._onContextMenu),r._onClick&&r.removeEventListener("click",r._onClick),r._onMouseDown&&r.removeEventListener("mousedown",r._onMouseDown)),this.wrapper.removeChild(n.el),this.markers.splice(e,1),this._unregisterEvents()}_createPointerSVG(t,e){let n="http://www.w3.org/2000/svg",r=document.createElementNS(n,"svg"),i=document.createElementNS(n,"polygon");return r.setAttribute("viewBox","0 0 40 80"),i.setAttribute("id","polygon"),i.setAttribute("stroke","#979797"),i.setAttribute("fill",t),i.setAttribute("points","20 0 40 30 40 80 0 80 0 30"),"top"==e&&i.setAttribute("transform","rotate(180, 20 40)"),r.appendChild(i),this.style(r,{width:this.markerWidth+"px",height:this.markerHeight+"px","min-width":this.markerWidth+"px","margin-right":"5px","z-index":4}),r}_createMarkerElement(t,e){let n=t.label,r=t.tooltip,i=document.createElement("marker");i.className="wavesurfer-marker",this.style(i,{position:"absolute",height:"100%",display:"flex",overflow:"hidden","flex-direction":"top"==t.position?"column-reverse":"column"});let a=document.createElement("div"),s=e?e.width:this.markerWidth;t.offset=(s-this.markerLineWidth)/2,this.style(a,{"flex-grow":1,"margin-left":t.offset+"px",background:"black",width:this.markerLineWidth+"px",opacity:.1}),i.appendChild(a);let o=document.createElement("div"),u=e||this._createPointerSVG(t.color,t.position);if(t.draggable&&(u.draggable=!1),o.appendChild(u),n){let t=document.createElement("span");t.innerText=n,t.setAttribute("title",r),this.style(t,{"font-family":"inherit","font-size":"90%"}),o.appendChild(t)}return this.style(o,{display:"flex","align-items":"center",cursor:"pointer"}),o.classList.add("marker-label"),i.appendChild(o),o._onClick=e=>{e.stopPropagation(),this.dragging||(this.wavesurfer.setCurrentTime(t.time),this.wavesurfer.fireEvent("marker-click",t,e))},o.addEventListener("click",o._onClick),o._onContextMenu=e=>{t.preventContextMenu&&e.preventDefault(),this.wavesurfer.fireEvent("marker-contextmenu",t,e)},o.addEventListener("contextmenu",o._onContextMenu),t.draggable&&(o._onMouseDown=()=>{this.selectedMarker=t},o.addEventListener("mousedown",o._onMouseDown)),i}_updateMarkerPositions(){for(let t=0;t<this.markers.length;t++){let e=this.markers[t];this._updateMarkerPosition(e)}}_updateMarkerPosition(t){let e=this.wavesurfer.getDuration(),n=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,r=n*Math.min(t.time/e,1)-t.offset;this.style(t.el,{left:r+"px","max-width":n-r+"px"})}_onMouseMove(t){this.selectedMarker&&(this.dragging||(this.dragging=!0,this.wavesurfer.fireEvent("marker-drag",this.selectedMarker,t)),this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(t)*this.wavesurfer.getDuration(),this._updateMarkerPositions())}_onMouseUp(t){if(this.selectedMarker&&setTimeout(()=>{this.selectedMarker=!1,this.dragging=!1},0),!this.dragging)return;t.stopPropagation();let e=this.wavesurfer.getDuration();this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(t)*e,this._updateMarkerPositions(),this.wavesurfer.fireEvent("marker-drop",this.selectedMarker,t)}_registerEvents(){this.markers.find(t=>t.draggable)&&(this.onMouseMove||(this.onMouseMove=t=>this._onMouseMove(t),window.addEventListener("mousemove",this.onMouseMove)),this.onMouseUp||(this.onMouseUp=t=>this._onMouseUp(t),window.addEventListener("mouseup",this.onMouseUp)))}_unregisterEvents(){!this.markers.find(t=>t.draggable)&&(this.onMouseMove&&(window.removeEventListener("mousemove",this.onMouseMove),this.onMouseMove=null),this.onMouseUp&&(window.removeEventListener("mouseup",this.onMouseUp),this.onMouseUp=null))}clear(){for(;this.markers.length>0;)this.remove(0)}}class h{constructor(t,e,n){this.wavesurfer=n,this.wrapper=n.drawer.wrapper,this.util=n.util,this.style=this.util.style,this.regionsUtil=e,this.vertical=n.drawer.params.vertical,this.id=null==t.id?n.util.getId():t.id,this.start=Number(t.start)||0,this.end=null==t.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=void 0===t.resize||!!t.resize,this.drag=void 0===t.drag||!!t.drag,this.contentEditable=!!t.contentEditable,this.removeButton=!!t.removeButton,this.isResizing=!1,this.isDragging=!1,this.loop=!!t.loop,this.color=t.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=t.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=t.data||{},this.attributes=t.attributes||{},this.showTooltip=t.showTooltip??!0,this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=()=>this.updateRender(),this.scroll=!1!==t.scroll&&n.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.preventContextMenu=void 0!==t.preventContextMenu&&!!t.preventContextMenu;let r=null==t.channelIdx?-1:parseInt(t.channelIdx);if(this.channelIdx=r,this.regionHeight="100%",this.marginTop="0px",-1!==r){let t=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;t>=0&&r<t&&(this.regionHeight=Math.floor(1/t*100)+"%",this.marginTop=this.wavesurfer.getHeight()*r+"px")}this.formatTimeCallback=t.formatTimeCallback,this.edgeScrollWidth=t.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}update(t,e){null!=t.start&&(this.start=Number(t.start)),null!=t.end&&(this.end=Number(t.end)),null!=t.loop&&(this.loop=!!t.loop),null!=t.color&&(this.color=t.color),null!=t.handleStyle&&(this.handleStyle=t.handleStyle),null!=t.data&&(this.data=t.data),null!=t.resize&&(this.resize=!!t.resize,this.updateHandlesResize(this.resize)),null!=t.drag&&(this.drag=!!t.drag),null!=t.maxLength&&(this.maxLength=Number(t.maxLength)),null!=t.minLength&&(this.minLength=Number(t.minLength)),null!=t.attributes&&(this.attributes=t.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,e)}remove(){this.element&&(this.element.remove(),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}play(t){let e=t||this.start;this.wavesurfer.play(e,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}playLoop(t){this.loop=!0,this.play(t)}setLoop(t){this.loop=t}render(){for(let t in this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id),this.attributes)this.element.setAttribute("data-region-"+t,this.attributes[t]);if(this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.removeButton){let t=document.createElement("div");t.className="remove-region-button",t.textContent="⨯",this.removeButtonEl=this.element.appendChild(t),this.style(this.removeButtonEl,{zIndex:4,position:"absolute",bottom:0,right:"4px",cursor:"pointer",fontSize:"20px",lineHeight:"21px",color:"grey"})}if(this.contentEditable){let t=document.createElement("div");t.className="region-content",t.contentEditable="true",t.innerText=this.data.text||"",this.contentEl=this.element.appendChild(t),this.style(this.contentEl,{zIndex:4,padding:"2px 5px",cursor:"text"})}if(this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";let t={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},e="none"!==this.handleStyle.left?Object.assign({left:"0px"},t,this.handleStyle.left):null,n="none"!==this.handleStyle.right?Object.assign({right:"0px"},t,this.handleStyle.right):null;e&&this.style(this.handleLeftEl,e),n&&this.style(this.handleRightEl,n)}this.updateRender(),this.bindEvents()}formatTime(t,e){return this.formatTimeCallback?this.formatTimeCallback(t,e):(t==e?[t]:[t,e]).map(t=>[Math.floor(t%3600/60),("00"+Math.floor(t%60)).slice(-2)].join(":")).join("-")}getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}updateRender(){let t=this.wavesurfer.getDuration(),e=this.getWidth(),n=this.start,r=this.end;if(n<0&&(r-=n=0),r>t&&(r=t,n=t-(r-n)),null!=this.minLength&&(r=Math.max(n+this.minLength,r)),null!=this.maxLength&&(r=Math.min(n+this.maxLength,r)),null!=this.element){let i=Math.round(n/t*e),a=Math.round(r/t*e)-i;for(let t in this.style(this.element,{left:i+"px",width:a+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+t,this.attributes[t]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}bindInOut(){this.firedIn=!1,this.firedOut=!1;let t=t=>{let e=Math.round(10*this.start)/10,n=Math.round(10*this.end)/10;t=Math.round(10*t)/10,!this.firedOut&&this.firedIn&&(e>t||n<=t)&&(this.firedOut=!0,this.firedIn=!1,this.fireEvent("out"),this.wavesurfer.fireEvent("region-out",this)),!this.firedIn&&e<=t&&n>t&&(this.firedIn=!0,this.firedOut=!1,this.fireEvent("in"),this.wavesurfer.fireEvent("region-in",this))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",()=>{this.wavesurfer.backend.un("audioprocess",t)}),this.on("out",()=>{if(this.loop){let t=this.wavesurfer.getCurrentTime();t>=this.start&&t<=this.end&&this.wavesurfer.play(this.start)}})}bindEvents(){let t=this.preventContextMenu;this.element.addEventListener("mouseenter",t=>{this.fireEvent("mouseenter",t),this.wavesurfer.fireEvent("region-mouseenter",this,t)}),this.element.addEventListener("mouseleave",t=>{this.fireEvent("mouseleave",t),this.wavesurfer.fireEvent("region-mouseleave",this,t)}),this.element.addEventListener("click",t=>{t.preventDefault(),this.fireEvent("click",t),this.wavesurfer.fireEvent("region-click",this,t)}),this.element.addEventListener("dblclick",t=>{t.stopPropagation(),t.preventDefault(),this.fireEvent("dblclick",t),this.wavesurfer.fireEvent("region-dblclick",this,t)}),this.element.addEventListener("contextmenu",e=>{t&&e.preventDefault(),this.fireEvent("contextmenu",e),this.wavesurfer.fireEvent("region-contextmenu",this,e)}),(this.drag||this.resize)&&this.bindDragEvents(),this.contentEditable&&(this.contentEl.addEventListener("blur",this.onContentBlur.bind(this)),this.contentEl.addEventListener("click",this.onContentClick.bind(this))),this.removeButton&&this.removeButtonEl.addEventListener("click",this.onRemove.bind(this))}bindDragEvents(){let t,e,n,r,i,a,s,o,u;let l=this.wavesurfer.drawer.container,h=this.scrollSpeed,c=!1,f=e=>{let l=this.util.withOrientation(e,this.vertical),c=this.wavesurfer.getDuration();if(!a||!n&&!i)return;let d=l.clientX,p=0,m=0,v=0,g=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(e)*c);if(n)-1===a?(m=o*this.wavesurfer.params.minPxPerSec,p=d-s.left):(m=u*this.wavesurfer.params.minPxPerSec,p=s.right-d);else{let t=this.minLength;t||(t=0),"start"===i?(g>this.end-t&&(g=this.end-t,v=h*a),g<0&&(g=0)):"end"===i&&(g<this.start+t&&(g=this.start+t,v=h*a),g>c&&(g=c))}let y=this.wrapper.scrollLeft;if(-1===a){if(0===Math.round(y)||0>=Math.round(y-m+p))return}else if(Math.round(y)===r||Math.round(y+m-p)>=r)return;let b=y-v+h*a;if(-1===a){let t=Math.max(0+m-p,b);this.wrapper.scrollLeft=b=t}else{let t=Math.min(r-m+p,b);this.wrapper.scrollLeft=b=t}let w=g-t;t=g,n?this.onDrag(w):this.onResize(w,i),window.requestAnimationFrame(()=>{f(e)})},d=a=>{let l=this.wavesurfer.getDuration();a.touches&&a.touches.length>1||(e=a.targetTouches?a.targetTouches[0].identifier:null,(this.drag||this.resize)&&a.stopPropagation(),o=(t=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(a,!0)*l))-this.start,u=this.end-t,r=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.isResizing=!1,this.isDragging=!1,"handle"===a.target.tagName.toLowerCase()?(this.isResizing=!0,i=a.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(this.isDragging=!0,n=!0,i=!1))},p=t=>{t.touches&&t.touches.length>1||((n||i)&&(this.isDragging=!1,this.isResizing=!1,n=!1,a=null,i=!1),c&&(c=!1,this.util.preventClick(),this.fireEvent("update-end",t),this.wavesurfer.fireEvent("region-update-end",this,t)))},m=r=>{let h=this.wavesurfer.getDuration(),d=this.util.withOrientation(r,this.vertical),p=null;if(r.touches&&r.touches.length>1||r.targetTouches&&r.targetTouches[0].identifier!=e||!n&&!i)return;let m=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(r)*h);if(n){let t=this.wavesurfer.getDuration();m>t-u&&(m=t-u),m-o<0&&(m=o)}if(i){let e=this.minLength;e||(e=0),"start"===i?(m>this.end-e&&(m=this.end-e),m<0&&(m=0)):"end"===i&&(m<this.start+e&&(p=(m=this.start+e)-(this.end+(m-t))),m>h&&(m=h))}if(p||(p=m-t),t=m,this.drag&&n&&(c=c||!!p,this.onDrag(p)),this.resize&&i&&(c=c||!!p,this.onResize(p,i)),this.scroll&&l.clientWidth<this.wrapper.scrollWidth){let t=d.clientX;(a=t<s.left+this.edgeScrollWidth?-1:t>s.right-this.edgeScrollWidth?1:null)&&f(r)}};this.element.addEventListener("mousedown",d),this.element.addEventListener("touchstart",d),document.body.addEventListener("mousemove",m),document.body.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("mouseup",p),document.body.addEventListener("touchend",p),this.on("remove",()=>{document.removeEventListener("mouseup",p),document.body.removeEventListener("touchend",p),document.body.removeEventListener("mousemove",m),document.body.removeEventListener("touchmove",m)}),this.wavesurfer.on("destroy",()=>{document.removeEventListener("mouseup",p),document.body.removeEventListener("touchend",p)})}onDrag(t){let e=this.wavesurfer.getDuration();this.end+t>e&&(t=e-this.end),this.start+t<0&&(t=-1*this.start);let n={direction:this._getDragDirection(t),action:"drag"};this.update({start:this.start+t,end:this.end+t},n)}_getDragDirection(t){return t<0?"left":t>0?"right":null}onResize(t,e){let n=this.wavesurfer.getDuration(),r={action:"resize",direction:"start"===e?"left":"right"};"start"===e?(t>0&&this.end-(this.start+t)<this.minLength&&(t=this.end-this.minLength-this.start),t<0&&this.end-(this.start+t)>this.maxLength&&(t=this.end-this.start-this.maxLength),t<0&&this.start+t<0&&(t=-1*this.start),this.update({start:Math.min(this.start+t,this.end),end:Math.max(this.start+t,this.end)},r)):(t<0&&this.end+t-this.start<this.minLength&&(t=this.start+this.minLength-this.end),t>0&&this.end+t-this.start>this.maxLength&&(t=this.maxLength-(this.end-this.start)),t>0&&this.end+t>n&&(t=n-this.end),this.update({start:Math.min(this.end+t,this.start),end:Math.max(this.end+t,this.start)},r))}onContentBlur(t){let{text:e}=this.data||{},n=t.target.innerText,r={...this.data,text:n};this.update({data:r},{action:"contentEdited",oldText:e,text:n})}onContentClick(t){t.stopPropagation()}onRemove(t){t.stopPropagation(),this.remove()}updateHandlesResize(t){let e;e=t?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:e}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:e})}}class c{static create(t){return{name:"regions",deferInit:!!t&&!!t.deferInit&&t.deferInit,params:t,staticProps:{addRegion(t){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(t)},clearRegions(){this.regions&&this.regions.clear()},enableDragSelection(t){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(t)},disableDragSelection(){this.regions.disableDragSelection()}},instance:c}}constructor(t,e){this.params=t,this.wavesurfer=e,this.util={...e.util,getRegionSnapToGridValue:e=>this.getRegionSnapToGridValue(e,t)},this.maxRegions=t.maxRegions,this.regionsMinLength=t.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach(t=>{h.prototype[t]=this.util.Observer.prototype[t]}),this.wavesurfer.Region=h,this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.orientation=this.wavesurfer.drawer.orientation,this.defaultEdgeScrollWidth=.05*this.wrapper.clientWidth,this.params.regions&&this.params.regions.forEach(t=>{this.add(t)})},this.list={},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.vertical=this.wavesurfer.drawer.params.vertical,this.params.dragSelection&&this.enableDragSelection(this.params),Object.keys(this.list).forEach(t=>{this.list[t].updateRender()})}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}add(t){if(this.wouldExceedMaxRegions())return null;!(t={edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,contentEditable:this.params.contentEditable,removeButton:this.params.removeButton,...t}).formatTimeCallback&&this.params.formatTimeCallback&&(t={...t,formatTimeCallback:this.params.formatTimeCallback}),!t.minLength&&this.regionsMinLength&&(t={...t,minLength:this.regionsMinLength});let e=new this.wavesurfer.Region(t,this.util,this.wavesurfer);return this.list[e.id]=e,e.on("remove",()=>{delete this.list[e.id]}),e}clear(){Object.keys(this.list).forEach(t=>{this.list[t].remove()})}enableDragSelection(t){let e,n,r,i,a,s,o;this.disableDragSelection();let u=t.slop||2,l=this.wavesurfer.drawer.container,h=!1!==t.scroll&&this.wavesurfer.params.scrollParent,c=t.scrollSpeed||1,f=t.scrollThreshold||10,d=this.wavesurfer.getDuration(),p=0,m=t=>{if(!i||!s)return;let e=this.wrapper.scrollLeft+c*s;this.wrapper.scrollLeft=e=Math.min(n,Math.max(0,e));let a=this.wavesurfer.drawer.handleEvent(t);i.update({start:Math.min(a*d,r*d),end:Math.max(a*d,r*d)}),e<n&&e>0&&window.requestAnimationFrame(()=>{m(t)})},v=u=>{if(!u.touches||!(u.touches.length>1)){if(d=this.wavesurfer.getDuration(),a=u.targetTouches?u.targetTouches[0].identifier:null,n=this.wrapper.scrollWidth-this.wrapper.clientWidth,o=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.wavesurfer.params.splitChannels&&this.wavesurfer.params.splitChannelsOptions.splitDragSelection){let e=(u.touches?u.touches[0].clientY:u.clientY)-o.top,n=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:1,r=Math.floor(e/(this.wrapper.clientHeight/n));t.channelIdx=r;let i=this.wavesurfer.params.splitChannelsOptions.channelColors[r];i&&i.dragColor&&(t.color=i.dragColor)}e=!0,r=this.wavesurfer.drawer.handleEvent(u,!0),i=null,s=null}};this.wrapper.addEventListener("mousedown",v),this.wrapper.addEventListener("touchstart",v),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchstart",v),this.wrapper.removeEventListener("mousedown",v)});let g=t=>{t.touches&&t.touches.length>1||(e=!1,p=0,s=null,i&&(this.util.preventClick(),i.fireEvent("update-end",t),this.wavesurfer.fireEvent("region-update-end",i,t)),i=null)};this.wrapper.addEventListener("mouseleave",g),this.wrapper.addEventListener("mouseup",g),this.wrapper.addEventListener("touchend",g),document.body.addEventListener("mouseup",g),document.body.addEventListener("touchend",g),this.on("disable-drag-selection",()=>{document.body.removeEventListener("mouseup",g),document.body.removeEventListener("touchend",g),this.wrapper.removeEventListener("touchend",g),this.wrapper.removeEventListener("mouseup",g),this.wrapper.removeEventListener("mouseleave",g)});let y=n=>{if(!e||++p<=u||n.touches&&n.touches.length>1||n.targetTouches&&n.targetTouches[0].identifier!=a||!i&&!(i=this.add(t||{})))return;let c=this.wavesurfer.drawer.handleEvent(n),v=this.wavesurfer.regions.util.getRegionSnapToGridValue(r*d),g=this.wavesurfer.regions.util.getRegionSnapToGridValue(c*d);i.update({start:Math.min(g,v),end:Math.max(g,v)});let y=this.util.withOrientation(n,this.vertical);if(h&&l.clientWidth<this.wrapper.scrollWidth){let t=y.clientX-o.left;(s=t<=f?-1:t>=o.right-f?1:null)&&m(n)}};this.wrapper.addEventListener("mousemove",y),this.wrapper.addEventListener("touchmove",y),this.on("disable-drag-selection",()=>{this.wrapper.removeEventListener("touchmove",y),this.wrapper.removeEventListener("mousemove",y)}),this.wavesurfer.on("region-created",t=>{this.regionsMinLength&&(t.minLength=this.regionsMinLength)})}disableDragSelection(){this.fireEvent("disable-drag-selection")}getCurrentRegion(){let t=this.wavesurfer.getCurrentTime(),e=null;return Object.keys(this.list).forEach(n=>{let r=this.list[n];r.start<=t&&r.end>=t&&(!e||r.end-r.start<e.end-e.start)&&(e=r)}),e}getRegionSnapToGridValue(t,e){if(e.snapToGridInterval){let n=e.snapToGridOffset||0;return Math.round((t-n)/e.snapToGridInterval)*e.snapToGridInterval+n}return t}}var f={};"undefined"!=typeof self&&self,f=(()=>{var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){for(var r,i,a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,(r=s.key,i=void 0,i=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!==n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===n(i)?i:String(i)),s)}}t.r(e),t.d(e,{default:()=>s});var s=function(){var t,e;function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sampleRate;(function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")})(this,n),this._context=this._createContext(e),e||(e=this._context.sampleRate),this._sampleRate=e}return t=[{key:"_createContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:t})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return await Promise.all(n.map(async function(e){var n;return n=e instanceof File||e instanceof Blob?await e.arrayBuffer():await fetch(e).then(function(t){return t.headers.has("Content-Type")&&!t.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(t.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(e,'")')),t.arrayBuffer()}),await t._context.decodeAudioData(n)}))}},{key:"mergeAudio",value:function(t){var e=this._context.createBuffer(this._maxNumberOfChannels(t),this._sampleRate*this._maxDuration(t),this._sampleRate);return t.forEach(function(t){for(var n=0;n<t.numberOfChannels;n++){for(var r=e.getChannelData(n),i=t.getChannelData(n),a=t.getChannelData(n).length-1;a>=0;a--)r[a]+=i[a];e.getChannelData(n).set(r)}}),e}},{key:"concatAudio",value:function(t){var e=this._context.createBuffer(this._maxNumberOfChannels(t),this._totalLength(t),this._sampleRate),n=0;return t.forEach(function(t){for(var r=0;r<t.numberOfChannels;r++)e.getChannelData(r).set(t.getChannelData(r),n);n+=t.length}),e}},{key:"padAudio",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return t;if(e<0)throw Error('Crunker: Parameter "padStart" in padAudio must be positive');if(n<0)throw Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var r=this._context.createBuffer(t.numberOfChannels,Math.ceil(t.length+n*t.sampleRate),t.sampleRate),i=0;i<t.numberOfChannels;i++){var a=t.getChannelData(i);r.getChannelData(i).set(a.subarray(0,Math.ceil(e*t.sampleRate)+1),0),r.getChannelData(i).set(a.subarray(Math.ceil(e*t.sampleRate)+2,r.length+1),Math.ceil((e+n)*t.sampleRate))}return r}},{key:"sliceAudio",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e>=n)throw Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var a=Math.round((n-e)*this._sampleRate),s=Math.round(e*this._sampleRate),o=this._context.createBuffer(t.numberOfChannels,a,this._sampleRate),u=0;u<t.numberOfChannels;u++)for(var l=t.getChannelData(u),h=o.getChannelData(u),c=0;c<a;c++)h[c]=l[s+c],c<r*this._sampleRate&&(h[c]*=c/(r*this._sampleRate)),c>a-i*this._sampleRate&&(h[c]*=(a-c)/(i*this._sampleRate));return o}},{key:"play",value:function(t){var e=this._context.createBufferSource();return e.buffer=t,e.connect(this._context.destination),e.start(),e}},{key:"export",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"audio/wav",n=this._interleave(t),r=new Blob([this._writeHeaders(n,t.numberOfChannels,t.sampleRate)],{type:e});return{blob:r,url:this._renderURL(r),element:this._renderAudioElement(r)}}},{key:"download",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"crunker",n=document.createElement("a");return n.style.display="none",n.href=this._renderURL(t),n.download="".concat(e,".").concat(t.type.split("/")[1]),n.click(),n}},{key:"notSupported",value:function(t){return this._isSupported()?void 0:t()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(t){return Math.max.apply(Math,r(t.map(function(t){return t.duration})))}},{key:"_maxNumberOfChannels",value:function(t){return Math.max.apply(Math,r(t.map(function(t){return t.numberOfChannels})))}},{key:"_totalLength",value:function(t){return t.map(function(t){return t.length}).reduce(function(t,e){return t+e},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(t,e,n){var r=2*e,i=2*t.length,a=36+i,s=new DataView(new ArrayBuffer(8+a));return this._writeString(s,0,"RIFF"),s.setUint32(4,a,!0),this._writeString(s,8,"WAVE"),this._writeString(s,12,"fmt "),s.setUint32(16,16,!0),s.setUint16(20,1,!0),s.setUint16(22,e,!0),s.setUint32(24,n,!0),s.setUint32(28,n*r,!0),s.setUint16(32,r,!0),s.setUint16(34,16,!0),this._writeString(s,36,"data"),s.setUint32(40,i,!0),this._floatTo16BitPCM(s,t,44)}},{key:"_floatTo16BitPCM",value:function(t,e,n){for(var r=0;r<e.length;r++,n+=2){var i=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,i<0?32768*i:32767*i,!0)}return t}},{key:"_writeString",value:function(t,e,n){for(var r=0;r<n.length;r++)t.setUint8(e+r,n.charCodeAt(r))}},{key:"_interleave",value:function(t){if(1===t.numberOfChannels)return t.getChannelData(0);for(var e=[],n=0;n<t.numberOfChannels;n++)e.push(t.getChannelData(n));for(var r=e.reduce(function(t,e){return t+e.length},0),i=new Float32Array(r),a=0,s=0;a<r;)e.forEach(function(t){i[a++]=t[s]}),s++;return i}},{key:"_renderAudioElement",value:function(t){var e=document.createElement("audio");return e.controls=!0,e.src=this._renderURL(t),e}},{key:"_renderURL",value:function(t){return(window.URL||window.webkitURL).createObjectURL(t)}}],a(n.prototype,t),e&&a(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}();return e})();class d{constructor(t){this.morphaweb=t,this.overlay=document.getElementById("overlay"),this.messageOverlay=document.getElementById("message-overlay"),this.messageText=document.getElementById("message-text"),this.crunker=new/*@__PURE__*/(i(f))({sampleRate:48e3}),document.addEventListener("dragover",this.allowDrop.bind(this)),document.addEventListener("drop",this.onDrop.bind(this))}allowDrop(t){this.overlayShow(),t.preventDefault()}showMessage(t,e=1e4){this.messageText.textContent=t,this.messageOverlay.classList.add("show"),setTimeout(()=>{this.messageOverlay.classList.remove("show")},e)}async loadFiles(t){let e=[],n=new AudioContext,r=[],i=0,a=[...t].map(async t=>{console.log(t),await t.arrayBuffer().then(async a=>(console.log(`Number of channels: ${a.length}`),await n.decodeAudioData(a).then(async a=>{if(a.duration>174){let t=n.createBuffer(a.numberOfChannels,Math.floor(174*a.sampleRate),a.sampleRate);for(let e=0;e<a.numberOfChannels;e++)t.copyToChannel(a.getChannelData(e).slice(0,Math.floor(174*a.sampleRate)),e);this.showMessage("Audio file longer than 2.9 minutes. It has been truncated."),a=t}let s=await this.morphaweb.wavHandler.getMarkersFromFile(t);s=s.map((t,e)=>(t.position+=i,t)),r.push(...s),r.push({position:1e3*a.duration}),i+=1e3*a.duration,e.push(a)},()=>{this.morphaweb.track("ErrorFileUploadMarkers")})),()=>{this.morphaweb.track("ErrorFileUpload")})});await Promise.all(a),r.pop();let s=this.crunker.concatAudio(e);return{blob:this.crunker.export(s,"audio/wav").blob,markers:r}}onDrop(t){t.preventDefault(),this.overlayHide(),this.morphaweb.wavesurfer.clearMarkers(),this.loadFiles(t.dataTransfer.files).then(t=>{this.morphaweb.wavesurfer.loadBlob(t.blob),this.morphaweb.wavHandler.markers=t.markers})}overlayShow(){this.overlay.style.display="block"}overlayHide(){this.overlay.style.display="none"}}var p=o("kEUo3");class m{constructor(t){this.morphaweb=t,this.playButton=document.getElementById("play"),this.pauseButton=document.getElementById("pause"),this.exportButton=document.getElementById("export"),this.sliceButton=document.getElementById("auto-slice"),this.sliceCountInput=document.getElementById("slice-count"),this.detectOnsetsButton=document.getElementById("detect-onsets"),this.divideMarkersButton=document.getElementById("divide-markers"),this.setButtonsState(!0),this.exportButton.addEventListener("click",this.exportWavFile),this.playButton.addEventListener("click",this.play),this.pauseButton.addEventListener("click",this.pause),this.sliceButton.addEventListener("click",this.handleAutoSlice),this.detectOnsetsButton.addEventListener("click",this.handleOnsetDetection),this.divideMarkersButton.addEventListener("click",this.divideMarkersByTwo),this.sliceCountInput.addEventListener("input",this.validateSliceCount),document.addEventListener("keydown",this.onKeydown.bind(this)),this.morphaweb.wavesurfer.on("seek",this.onSeek.bind(this)),this.morphaweb.wavesurfer.on("finish",this.onFinish.bind(this)),this.morphaweb.wavesurfer.on("ready",()=>this.setButtonsState(!1)),window.addEventListener("wheel",(0,p.throttle)(this.onWheel.bind(this),10)),document.addEventListener("markers-changed",this.updateDivideButton.bind(this)),this.updateDivideButton(),this.validateSliceCount()}setButtonsState=t=>{this.playButton.disabled=t,this.pauseButton.disabled=t,this.exportButton.disabled=t,this.sliceButton.disabled=t,this.detectOnsetsButton.disabled=t,this.sliceCountInput.disabled=t};validateSliceCount=()=>{let t=parseInt(this.sliceCountInput.value),e=parseInt(this.sliceCountInput.min);(isNaN(t)||t<e)&&(this.sliceCountInput.value=e),this.sliceButton.disabled=isNaN(t)||t<e||0===this.morphaweb.wavesurfer.getDuration()};exportWavFile=()=>{try{if(0===this.morphaweb.wavesurfer.getDuration())return!1;let t=[this.morphaweb.wavesurfer.backend.buffer.getChannelData(0)];try{t.push(this.morphaweb.wavesurfer.backend.buffer.getChannelData(1))}catch(e){t.push(this.morphaweb.wavesurfer.backend.buffer.getChannelData(0)),console.log("No second channel")}let e=this.morphaweb.wavesurfer.markers.markers;this.morphaweb.wavHandler.createFileFromBuffer(t,e)}catch(t){console.log(t),this.morphaweb.track("ErrorExportWavFile")}};play=()=>{this.morphaweb.wavesurfer.isPlaying()&&this.morphaweb.wavesurfer.seekTo(0),this.morphaweb.wavesurfer.play()};pause=()=>{this.morphaweb.wavesurfer.pause()};playToggle=()=>{this.morphaweb.wavesurfer.isPlaying()?this.morphaweb.wavesurfer.pause():this.morphaweb.wavesurfer.play()};onSeek=t=>{this.morphaweb.playOffset=t,this.morphaweb.markerHandler.removeTopMarker("top"),this.morphaweb.markerHandler.createMarker(this.morphaweb.playOffset*this.morphaweb.wavesurfer.getDuration(),"top"),this.morphaweb.wavesurfer.play()};onFinish=()=>{};onWheel=t=>{this.morphaweb.scrollPos+t.deltaY>=this.morphaweb.scrollMin&&(this.morphaweb.scrollPos=this.morphaweb.scrollPos+t.deltaY,this.morphaweb.wavesurfer.zoom(this.morphaweb.scrollPos))};onKeydown=t=>{switch(t.key){case"j":case"J":this.morphaweb.markerHandler.createMarkerAtCurrentPosition();break;case"k":case"K":this.morphaweb.markerHandler.removeSelectedMarker();break;case" ":this.playToggle()}};handleAutoSlice=()=>{if(0===this.morphaweb.wavesurfer.getDuration())return!1;let t=parseInt(this.sliceCountInput.value);this.morphaweb.markerHandler.clearAllMarkers(),this.morphaweb.markerHandler.createAutoSlices(t),this.morphaweb.track("AutoSlice")};handleOnsetDetection=()=>{try{if(0===this.morphaweb.wavesurfer.getDuration())return!1;this.morphaweb.detectOnsets(),this.morphaweb.track("OnsetDetection")}catch(t){this.morphaweb.track("ErrorOnsetDetection")}};updateDivideButton=t=>{let e=this.morphaweb.markerHandler.getBottomMarkers().length;this.divideMarkersButton.disabled=e<2};divideMarkersByTwo=()=>{try{if(!this.morphaweb.markerHandler.hasEnoughMarkers())return;this.morphaweb.markerHandler.divideMarkersByTwo(),this.morphaweb.track("DivideMarkersByTwo")}catch(t){this.morphaweb.track("ErrorDivideMarkersByTwo")}};exportSampleDrumFile=()=>{try{if(0===this.morphaweb.wavesurfer.getDuration())return!1;let t=[this.morphaweb.wavesurfer.backend.buffer.getChannelData(0)];try{t.push(this.morphaweb.wavesurfer.backend.buffer.getChannelData(1))}catch(e){t.push(this.morphaweb.wavesurfer.backend.buffer.getChannelData(0)),console.log("No second channel")}let e=this.morphaweb.wavesurfer.markers.markers;this.morphaweb.wavHandler.createSampleDrumBuffer(t,e)}catch(t){console.log(t),this.morphaweb.track("ErrorExportSampleDrumFile")}}}class v{constructor(t){this.color="#ff990a",this.colorHighlight="#ff1111",this.colorTopMarker="#ff00bb",this.markers=t.wavesurfer.markers,this.morphaweb=t,this.morphaweb.wavesurfer.on("marker-click",this.onClick.bind(this)),this.morphaweb.wavesurfer.on("marker-drag",this.onMarkersChanged.bind(this)),this.morphaweb.wavesurfer.on("marker-remove",this.onMarkersChanged.bind(this)),this.morphaweb.wavesurfer.on("marker-update",this.onMarkersChanged.bind(this))}addMarkers=t=>{for(let e of t)this.createMarker(e.position/1e3)};removeTopMarker(){let t=this.markers.markers.map(t=>t.position).indexOf("top");this.morphaweb.wavesurfer.markers.remove(t)}removeSelectedMarker(){let t=this.getSelectedMarkerIndex();this.markers.remove(t),this.onMarkersChanged()}highlightMarker(t){this.markers.markers.map(e=>{"bottom"==e.position&&(e.time==t?e.el.children[1].children[0].children[0].setAttribute("fill",this.colorHighlight):e.el.children[1].children[0].children[0].setAttribute("fill",this.color))})}getBottomMarkers(){return this.markers.markers.filter(t=>"bottom"===t.position)}getTopMarkers(){return this.markers.markers.filter(t=>"top"===t.position)}getSelectedMarker(){return this.markers.markers.filter(t=>t.el.children[1].children[0].children[0].getAttribute("fill")===this.colorHighlight)[0]}getSelectedMarkerIndex(){let t=this.getSelectedMarker();return this.markers.markers.findIndex(e=>e===t)}getMarkerAtTime(t){return this.getBottomMarkers().indexOf(t)}createMarker(t,e="bottom"){if("bottom"==e&&-1!=this.getMarkerAtTime(t))return!1;let n=this.morphaweb.wavesurfer.backend.buffer.getChannelData(0),r=this.morphaweb.wavesurfer.backend.buffer.sampleRate,i=Math.round(t*r),a=t;"bottom"===e&&this.morphaweb.onsetHandler&&(a=this.morphaweb.onsetHandler.findNearestZeroCrossing(n,i)/r);let s={time:a,position:"bottom",color:this.color,draggable:!0};"top"==e&&(s.position="top",s.color=this.colorTopMarker),this.morphaweb.wavesurfer.addMarker(s),this.onMarkersChanged()}createMarkerAtCurrentPosition(){this.createMarker(this.morphaweb.playOffset*this.morphaweb.wavesurfer.getDuration(),"bottom")}onClick(t){this.highlightMarker(t.time)}createAutoSlices(t){let e=this.morphaweb.wavesurfer.getDuration()/t;this.createMarker(0,"bottom");for(let n=1;n<t;n++)this.createMarker(e*n,"bottom")}clearAllMarkers(){this.morphaweb.wavesurfer.clearMarkers(),this.onMarkersChanged()}getMarkers(){return this.markers.markers.sort((t,e)=>t.time-e.time)}createOnsetMarkers(t){this.clearAllMarkers(),t.forEach(t=>{this.createMarker(t,"bottom")})}getOnsetTimes(){return this.getTopMarkers().map(t=>t.time).sort((t,e)=>t-e)}updateMarkerPosition(t,e){let n=this.markers.markers[t];n&&(n.time=e,this.morphaweb.wavesurfer.updateMarkerPosition(t,e))}onMarkersChanged(){let t=new CustomEvent("markers-changed",{detail:{markerCount:this.getBottomMarkers().length}});document.dispatchEvent(t)}hasEnoughMarkers(){return this.getBottomMarkers().length>=2}divideMarkersByTwo(){if(!this.hasEnoughMarkers())return;let t=this.getBottomMarkers().sort((t,e)=>t.time-e.time).filter((t,e)=>e%2==0);this.clearAllMarkers(),t.forEach(t=>{this.createMarker(t.time,"bottom")})}}const g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function y(t,e){return t=t>0?parseInt(t/e.oldMax*e.newMax,10):parseInt(t/e.oldMin*e.newMin,10)}function b(t,e){return parseInt(t>0?t*e.newMax:t*e.newMin,10)}function w(t,e){return t>0?t/e.oldMax:t/e.oldMin}function k(t){if("32f"!=t&&"64"!=t&&("8">parseInt(t,10)||parseInt(t,10)>"53"))throw Error("Invalid bit depth.")}function _(t,e,n){if("8"==t){let t=n?-128:128;for(let n=0,r=e.length;n<r;n++)e[n]=e[n]+=t}}const C=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],A=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function x(t,e){var n,r;let i=t-e.predicted,a=0;i>=0?a=0:(a=8,i=-i);let s=A[e.index],o=s>>3;return i>s&&(a|=4,i-=s,o+=s),i>(s>>=1)&&(a|=2,i-=s,o+=s),i>(s>>=1)&&(a|=1,o+=s),n=a,r=o,8&n?e.predicted-=r:e.predicted+=r,e.predicted<-32768?e.predicted=-32768:e.predicted>32767&&(e.predicted=32767),e.index+=C[7&n],e.index<0?e.index=0:e.index>88&&(e.index=88),a}function S(t,e){let n=0;return 4&t&&(n+=e.step),2&t&&(n+=e.step>>1),1&t&&(n+=e.step>>2),n+=e.step>>3,8&t&&(n=-n),e.predicted+=n,e.predicted>32767?e.predicted=32767:e.predicted<-32767&&(e.predicted=-32767),e.index+=C[t],e.index<0?e.index=0:e.index>88&&(e.index=88),e.step=A[e.index],e.predicted}const P=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],I=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],E=[0,132,396,924,1980,4092,8316,16764];function M(t,e,n=0,r=t.length){for(let i=n;i<r;i+=e)!function(t,e,n){e--;for(let r=0;r<e;r++){let i=t[n+r];t[n+r]=t[n+e],t[n+e]=i,e--}}(t,e,i)}function O(t,e,n=0){let r=0,i=t.length;for(;r<i;){let i=t.codePointAt(r);if(i<128)e[n]=i,n++;else{let t=0,a=0;for(i<=2047?(t=1,a=192):i<=65535?(t=2,a=224):i<=1114111&&(t=3,a=240,r++),e[n]=(i>>6*t)+a,n++;t>0;)e[n]=128|i>>6*(t-1)&63,n++,t--}r++}return n}class L{constructor(t,e=!1){this.bits=t,this.offset=Math.ceil(t/8),this.max=Math.pow(2,t)-1,this.min=0,this.unpack=this.unpack_,e&&(this.max=Math.pow(2,t)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(t,e,n=0){e=this.clamp_(Math.round(e));for(let r=0,i=this.offset;r<i;r++)t[n]=255&Math.floor(e/Math.pow(2,8*r)),n++;return n}unpack_(t,e=0){let n=0;for(let r=0;r<this.offset;r++)n+=t[e+r]*Math.pow(256,r);return n}unpackSigned_(t,e=0){return this.sign_(this.unpack_(t,e))}clamp_(t){return t>this.max?this.max:t<this.min?this.min:t}sign_(t){return t>this.max&&(t-=2*this.max+2),t}}class R{constructor(t,e){this.offset=Math.ceil((t+e)/8),this.ebits=t,this.fbits=e,this.bias=(1<<t-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=t+e,this.fbias=Math.pow(2,-(8*this.offset-1-t))}pack(t,e,n){Math.abs(e)>this.biasP2-2*this.ebitsFbits&&(e=e<0?-1/0:1/0);let r=0>((e=+e)||1/e)?1:e<0?1:0,i=Math.min(Math.floor(Math.log(e=Math.abs(e))/Math.LN2),1023),a=T(e/Math.pow(2,i)*Math.pow(2,this.fbits));return e!=e?(a=Math.pow(2,this.fbits-1),i=(1<<this.ebits)-1):0!==e&&(e>=Math.pow(2,1-this.bias)?(a/Math.pow(2,this.fbits)>=2&&(i+=1,a=1),i>this.bias?(i=(1<<this.ebits)-1,a=0):(i+=this.bias,a=T(a)-Math.pow(2,this.fbits))):(a=T(e/Math.pow(2,1-this.bias-this.fbits)),i=0)),this.packFloatBits_(t,n,r,i,a)}unpack(t,e){let n,r=(1<<this.ebits)-1,i="";for(let n=this.offset-1;n>=0;n--){let r=t[n+e].toString(2);i+="00000000".substring(r.length)+r}let a="1"==i.charAt(0)?-1:1,s=parseInt((i=i.substring(1)).substring(0,this.ebits),2);return(i=i.substring(this.ebits),s==r)?0!==parseInt(i,2)?NaN:1/0*a:(0===s?(s+=1,n=parseInt(i,2)):n=parseInt("1"+i,2),a*n*this.fbias*Math.pow(2,s-this.bias))}packFloatBits_(t,e,n,r,i){let a=[];a.push(n);for(let t=this.ebits;t>0;t-=1)a[t]=r%2?1:0,r=Math.floor(r/2);let s=a.length;for(let t=this.fbits;t>0;t-=1)a[s+t]=i%2?1:0,i=Math.floor(i/2);let o=a.join(""),u=this.offset+e-1,l=e;for(;u>=e;)t[u]=parseInt(o.substring(0,8),2),o=o.substring(8),u--,l++;return l}}function T(t){let e=Math.floor(t),n=t-e;return n<.5?e:n>.5?e+1:e%2?e+1:e}function j(t,e=0,n=t.length){return function(t,e=0,n=t.length){let r="";for(let i=e;i<n;){let e=128,n=191,a=!1,s=t[i++];if(s>=0&&s<=127)r+=String.fromCharCode(s);else{let o=0;s>=194&&s<=223?o=1:s>=224&&s<=239?(o=2,224===t[i]&&(e=160),237===t[i]&&(n=159)):s>=240&&s<=244?(o=3,240===t[i]&&(e=144),244===t[i]&&(n=143)):a=!0,s&=(1<<8-o-1)-1;for(let r=0;r<o;r++)(t[i]<e||t[i]>n)&&(a=!0),s=s<<6|63&t[i],i++;a?r+=String.fromCharCode(65533):s<=65535?r+=String.fromCharCode(s):(s-=65536,r+=String.fromCharCode((s>>10&1023)+55296,(1023&s)+56320))}}return r}(t,e,n)}function D(t){let e=[];return O(t,e),e}function B(t,e,n=0){return O(t,e,n)}function z(t,e,n,r=0){let i=H((e=e||{}).bits,e.fp,e.signed),a=Math.ceil(e.bits/8),s=0,o=r;for(let e=t.length;s<e;s++)r=i.pack(n,t[s],r);return e.be&&M(n,a,o,r),r}function W(t,e,n,r=0,i=t.length){var a;let s=H((e=e||{}).bits,e.fp,e.signed);if(i=(a=i)-(a-r)%s.offset,e.be){let a=new Uint8Array(t);e.be&&M(a,s.offset,r,i),N(a,n,r,i,s)}else N(t,n,r,i,s)}function F(t,e,n,r=0){return z([t],e,n,r)}function U(t,e){let n=[];return F(t,e,n,0),n}function V(t,e,n=0){let r=[];return W(t,e,r,n,n+Math.ceil(e.bits/8)),r[0]}function N(t,e,n,r,i){let a=i.offset;for(let s=0,o=n;o<r;o+=a,s++)e[s]=i.unpack(t,o)}function H(t,e,n){return e&&32==t?new R(8,23):e&&64==t?new R(11,52):new L(t,n)}class X{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(t){if(this.head=0,this.container=this.readString(t,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(t),this.format=this.readString(t,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(t)}}findChunk(t,e=!1){let n=this.signature.subChunks,r=[];for(let i=0;i<n.length;i++)if(n[i].chunkId==t){if(!e)return n[i];r.push(n[i])}return"LIST"==t&&r.length?r:null}readString(t,e){let n="";return n=j(t,this.head,this.head+e),this.head+=e,n}readUInt32(t){let e=V(t,this.uInt32,this.head);return this.head+=4,e}getSubChunksIndex_(t){let e=[],n=this.head;for(;n<=t.length-8;)e.push(this.getSubChunkIndex_(t,n)),n+=8+e[e.length-1].chunkSize,n=n%2?n+1:n;return e}getSubChunkIndex_(t,e){let n={chunkId:this.getChunkId_(t,e),chunkSize:this.getChunkSize_(t,e)};if("LIST"==n.chunkId)n.format=j(t,e+8,e+12),this.head+=4,n.subChunks=this.getSubChunksIndex_(t);else{let t=n.chunkSize%2?n.chunkSize+1:n.chunkSize;this.head=e+8+t,n.chunkData={start:e+8,end:this.head}}return n}getChunkId_(t,e){return this.head+=4,j(t,e,e+4)}getChunkSize_(t,e){return this.head+=4,V(t,this.uInt32,e+4)}}class q extends X{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(t,e=!0){if(this.clearHeaders(),this.setSignature(t),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(t),this.readFmtChunk_(t),this.readFactChunk_(t),this.readBextChunk_(t),this.readiXMLChunk_(t),this.readCueChunk_(t),this.readSmplChunk_(t),this.readDataChunk_(t,e),this.readJunkChunk_(t),this.readLISTChunk_(t),this.read_PMXChunk_(t)}clearHeaders(){let t=new q;Object.assign(this.fmt,t.fmt),Object.assign(this.fact,t.fact),Object.assign(this.cue,t.cue),Object.assign(this.smpl,t.smpl),Object.assign(this.bext,t.bext),Object.assign(this.iXML,t.iXML),Object.assign(this.ds64,t.ds64),Object.assign(this.data,t.data),this.LIST=[],Object.assign(this.junk,t.junk),Object.assign(this._PMX,t._PMX)}readFmtChunk_(t){let e=this.findChunk("fmt ");if(e)this.head=e.chunkData.start,this.fmt.chunkId=e.chunkId,this.fmt.chunkSize=e.chunkSize,this.fmt.audioFormat=this.readUInt16_(t),this.fmt.numChannels=this.readUInt16_(t),this.fmt.sampleRate=this.readUInt32(t),this.fmt.byteRate=this.readUInt32(t),this.fmt.blockAlign=this.readUInt16_(t),this.fmt.bitsPerSample=this.readUInt16_(t),this.readFmtExtension_(t);else throw Error('Could not find the "fmt " chunk')}readFmtExtension_(t){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(t),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(t),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(t),this.fmt.subformat=[this.readUInt32(t),this.readUInt32(t),this.readUInt32(t),this.readUInt32(t)])))}readFactChunk_(t){let e=this.findChunk("fact");e&&(this.head=e.chunkData.start,this.fact.chunkId=e.chunkId,this.fact.chunkSize=e.chunkSize,this.fact.dwSampleLength=this.readUInt32(t))}readCueChunk_(t){let e=this.findChunk("cue ");if(e){this.head=e.chunkData.start,this.cue.chunkId=e.chunkId,this.cue.chunkSize=e.chunkSize,this.cue.dwCuePoints=this.readUInt32(t);for(let e=0;e<this.cue.dwCuePoints;e++)this.cue.points.push({dwName:this.readUInt32(t),dwPosition:this.readUInt32(t),fccChunk:this.readString(t,4),dwChunkStart:this.readUInt32(t),dwBlockStart:this.readUInt32(t),dwSampleOffset:this.readUInt32(t)})}}readSmplChunk_(t){let e=this.findChunk("smpl");if(e){this.head=e.chunkData.start,this.smpl.chunkId=e.chunkId,this.smpl.chunkSize=e.chunkSize,this.smpl.dwManufacturer=this.readUInt32(t),this.smpl.dwProduct=this.readUInt32(t),this.smpl.dwSamplePeriod=this.readUInt32(t),this.smpl.dwMIDIUnityNote=this.readUInt32(t),this.smpl.dwMIDIPitchFraction=this.readUInt32(t),this.smpl.dwSMPTEFormat=this.readUInt32(t),this.smpl.dwSMPTEOffset=this.readUInt32(t),this.smpl.dwNumSampleLoops=this.readUInt32(t),this.smpl.dwSamplerData=this.readUInt32(t);for(let e=0;e<this.smpl.dwNumSampleLoops;e++)this.smpl.loops.push({dwName:this.readUInt32(t),dwType:this.readUInt32(t),dwStart:this.readUInt32(t),dwEnd:this.readUInt32(t),dwFraction:this.readUInt32(t),dwPlayCount:this.readUInt32(t)})}}readDataChunk_(t,e){let n=this.findChunk("data");if(n)this.data.chunkId="data",this.data.chunkSize=n.chunkSize,e&&(this.data.samples=t.slice(n.chunkData.start,n.chunkData.end));else throw Error('Could not find the "data" chunk')}readBextChunk_(t){let e=this.findChunk("bext");e&&(this.head=e.chunkData.start,this.bext.chunkId=e.chunkId,this.bext.chunkSize=e.chunkSize,this.bext.description=this.readString(t,256),this.bext.originator=this.readString(t,32),this.bext.originatorReference=this.readString(t,32),this.bext.originationDate=this.readString(t,10),this.bext.originationTime=this.readString(t,8),this.bext.timeReference=[this.readUInt32(t),this.readUInt32(t)],this.bext.version=this.readUInt16_(t),this.bext.UMID=this.readString(t,64),this.bext.loudnessValue=this.readUInt16_(t),this.bext.loudnessRange=this.readUInt16_(t),this.bext.maxTruePeakLevel=this.readUInt16_(t),this.bext.maxMomentaryLoudness=this.readUInt16_(t),this.bext.maxShortTermLoudness=this.readUInt16_(t),this.bext.reserved=this.readString(t,180),this.bext.codingHistory=this.readString(t,this.bext.chunkSize-602))}readiXMLChunk_(t){let e=this.findChunk("iXML");e&&(this.head=e.chunkData.start,this.iXML.chunkId=e.chunkId,this.iXML.chunkSize=e.chunkSize,this.iXML.value=j(t,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(t){let e=this.findChunk("ds64");if(e)this.head=e.chunkData.start,this.ds64.chunkId=e.chunkId,this.ds64.chunkSize=e.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(t),this.ds64.riffSizeLow=this.readUInt32(t),this.ds64.dataSizeHigh=this.readUInt32(t),this.ds64.dataSizeLow=this.readUInt32(t),this.ds64.originationTime=this.readUInt32(t),this.ds64.sampleCountHigh=this.readUInt32(t),this.ds64.sampleCountLow=this.readUInt32(t);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}readLISTChunk_(t){let e=this.findChunk("LIST",!0);if(null!==e)for(let n=0;n<e.length;n++){let r=e[n];this.LIST.push({chunkId:r.chunkId,chunkSize:r.chunkSize,format:r.format,subChunks:[]});for(let e=0;e<r.subChunks.length;e++)this.readLISTSubChunks_(r.subChunks[e],r.format,t)}}readLISTSubChunks_(t,e,n){"adtl"==e?["labl","note","ltxt"].indexOf(t.chunkId)>-1&&this.readLISTadtlSubChunks_(n,t):"INFO"==e&&this.readLISTINFOSubChunks_(n,t)}readLISTadtlSubChunks_(t,e){this.head=e.chunkData.start;let n={chunkId:e.chunkId,chunkSize:e.chunkSize,dwName:this.readUInt32(t)};"ltxt"==e.chunkId?(n.dwSampleLength=this.readUInt32(t),n.dwPurposeID=this.readUInt32(t),n.dwCountry=this.readUInt16_(t),n.dwLanguage=this.readUInt16_(t),n.dwDialect=this.readUInt16_(t),n.dwCodePage=this.readUInt16_(t),n.value=""):n.value=this.readZSTR_(t,this.head),this.LIST[this.LIST.length-1].subChunks.push(n)}readLISTINFOSubChunks_(t,e){this.head=e.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:e.chunkId,chunkSize:e.chunkSize,value:this.readZSTR_(t,this.head)})}readJunkChunk_(t){let e=this.findChunk("junk");e&&(this.junk={chunkId:e.chunkId,chunkSize:e.chunkSize,chunkData:[].slice.call(t.slice(e.chunkData.start,e.chunkData.end))})}read_PMXChunk_(t){let e=this.findChunk("_PMX");e&&(this.head=e.chunkData.start,this._PMX.chunkId=e.chunkId,this._PMX.chunkSize=e.chunkSize,this._PMX.value=j(t,this.head,this.head+this._PMX.chunkSize))}readZSTR_(t,e=0){for(let n=e;n<t.length&&(this.head++,0!==t[n]);n++);return j(t,e,this.head-1)}readUInt16_(t){let e=V(t,this.uInt16,this.head);return this.head+=2,e}}function G(t,e){let n=D(t);for(let t=n.length;t<e;t++)n.push(0);return n}class $ extends q{toBuffer(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;let t=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),D(this.data.chunkId),U(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],e=0;for(let n=0;n<t.length;n++)e+=t[n].length;let n=new Uint8Array(e+12),r=0;r=B(this.container,n,r),r=F(e+4,this.uInt32,n,r),r=B(this.format,n,r);for(let e=0;e<t.length;e++)n.set(t[e],r),r+=t[e].length;return n}getBextBytes_(){let t=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,t=t.concat(D(this.bext.chunkId),U(602+this.bext.codingHistory.length,this.uInt32),G(this.bext.description,256),G(this.bext.originator,32),G(this.bext.originatorReference,32),G(this.bext.originationDate,10),G(this.bext.originationTime,8),U(this.bext.timeReference[0],this.uInt32),U(this.bext.timeReference[1],this.uInt32),U(this.bext.version,this.uInt16),G(this.bext.UMID,64),U(this.bext.loudnessValue,this.uInt16),U(this.bext.loudnessRange,this.uInt16),U(this.bext.maxTruePeakLevel,this.uInt16),U(this.bext.maxMomentaryLoudness,this.uInt16),U(this.bext.maxShortTermLoudness,this.uInt16),G(this.bext.reserved,180),G(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(t),t}enforceBext_(){for(let t in this.bext)if(this.bext.hasOwnProperty(t)&&this.bext[t]&&"timeReference"!=t){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let t=[];if(this.iXML.chunkId){let e=D(this.iXML.value);this.iXML.chunkSize=e.length,t=t.concat(D(this.iXML.chunkId),U(this.iXML.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}getDs64Bytes_(){let t=[];return this.ds64.chunkId&&(t=t.concat(D(this.ds64.chunkId),U(this.ds64.chunkSize,this.uInt32),U(this.ds64.riffSizeHigh,this.uInt32),U(this.ds64.riffSizeLow,this.uInt32),U(this.ds64.dataSizeHigh,this.uInt32),U(this.ds64.dataSizeLow,this.uInt32),U(this.ds64.originationTime,this.uInt32),U(this.ds64.sampleCountHigh,this.uInt32),U(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(t),t}getCueBytes_(){let t=[];if(this.cue.chunkId){let e=this.getCuePointsBytes_();t=t.concat(D(this.cue.chunkId),U(e.length+4,this.uInt32),U(this.cue.dwCuePoints,this.uInt32),e)}return this.enforceByteLen_(t),t}getCuePointsBytes_(){let t=[];for(let e=0;e<this.cue.dwCuePoints;e++)t=t.concat(U(this.cue.points[e].dwName,this.uInt32),U(this.cue.points[e].dwPosition,this.uInt32),D(this.cue.points[e].fccChunk),U(this.cue.points[e].dwChunkStart,this.uInt32),U(this.cue.points[e].dwBlockStart,this.uInt32),U(this.cue.points[e].dwSampleOffset,this.uInt32));return t}getSmplBytes_(){let t=[];if(this.smpl.chunkId){let e=this.getSmplLoopsBytes_();t=t.concat(D(this.smpl.chunkId),U(e.length+36,this.uInt32),U(this.smpl.dwManufacturer,this.uInt32),U(this.smpl.dwProduct,this.uInt32),U(this.smpl.dwSamplePeriod,this.uInt32),U(this.smpl.dwMIDIUnityNote,this.uInt32),U(this.smpl.dwMIDIPitchFraction,this.uInt32),U(this.smpl.dwSMPTEFormat,this.uInt32),U(this.smpl.dwSMPTEOffset,this.uInt32),U(this.smpl.dwNumSampleLoops,this.uInt32),U(this.smpl.dwSamplerData,this.uInt32),e)}return this.enforceByteLen_(t),t}getSmplLoopsBytes_(){let t=[];for(let e=0;e<this.smpl.dwNumSampleLoops;e++)t=t.concat(U(this.smpl.loops[e].dwName,this.uInt32),U(this.smpl.loops[e].dwType,this.uInt32),U(this.smpl.loops[e].dwStart,this.uInt32),U(this.smpl.loops[e].dwEnd,this.uInt32),U(this.smpl.loops[e].dwFraction,this.uInt32),U(this.smpl.loops[e].dwPlayCount,this.uInt32));return t}getFactBytes_(){let t=[];return this.fact.chunkId&&(t=t.concat(D(this.fact.chunkId),U(this.fact.chunkSize,this.uInt32),U(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(t),t}getFmtBytes_(){if(this.fmt.chunkId){let t=[].concat(D(this.fmt.chunkId),U(this.fmt.chunkSize,this.uInt32),U(this.fmt.audioFormat,this.uInt16),U(this.fmt.numChannels,this.uInt16),U(this.fmt.sampleRate,this.uInt32),U(this.fmt.byteRate,this.uInt32),U(this.fmt.blockAlign,this.uInt16),U(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(t),t}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let t=[];return this.fmt.chunkSize>16&&(t=t.concat(U(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(t=t.concat(U(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(t=t.concat(U(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(t=t.concat(U(this.fmt.subformat[0],this.uInt32),U(this.fmt.subformat[1],this.uInt32),U(this.fmt.subformat[2],this.uInt32),U(this.fmt.subformat[3],this.uInt32))),t}getLISTBytes_(){let t=[];for(let e=0;e<this.LIST.length;e++){let n=this.getLISTSubChunksBytes_(this.LIST[e].subChunks,this.LIST[e].format);t=t.concat(D(this.LIST[e].chunkId),U(n.length+4,this.uInt32),D(this.LIST[e].format),n)}return this.enforceByteLen_(t),t}getLISTSubChunksBytes_(t,e){let n=[];for(let r=0,i=t.length;r<i;r++)"INFO"==e?n=n.concat(this.getLISTINFOSubChunksBytes_(t[r])):"adtl"==e&&(n=n.concat(this.getLISTadtlSubChunksBytes_(t[r]))),this.enforceByteLen_(n);return n}getLISTINFOSubChunksBytes_(t){let e=[],n=G(t.value,t.value.length);return(e=e.concat(D(t.chunkId),U(n.length+1,this.uInt32),n)).push(0),e}getLISTadtlSubChunksBytes_(t){let e=[];if(["labl","note"].indexOf(t.chunkId)>-1){let n=G(t.value,t.value.length);(e=e.concat(D(t.chunkId),U(n.length+4+1,this.uInt32),U(t.dwName,this.uInt32),n)).push(0)}else"ltxt"==t.chunkId&&(e=e.concat(this.getLtxtChunkBytes_(t)));return e}getLtxtChunkBytes_(t){return[].concat(D(t.chunkId),U(t.value.length+20,this.uInt32),U(t.dwName,this.uInt32),U(t.dwSampleLength,this.uInt32),U(t.dwPurposeID,this.uInt32),U(t.dwCountry,this.uInt16),U(t.dwLanguage,this.uInt16),U(t.dwDialect,this.uInt16),U(t.dwCodePage,this.uInt16),G(t.value,t.value.length))}get_PMXBytes_(){let t=[];if(this._PMX.chunkId){let e=D(this._PMX.value);this._PMX.chunkSize=e.length,t=t.concat(D(this._PMX.chunkId),U(this._PMX.chunkSize,this.uInt32),e)}return this.enforceByteLen_(t),t}getJunkBytes_(){let t=[];return this.junk.chunkId?t.concat(D(this.junk.chunkId),U(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(t),t)}enforceByteLen_(t){t.length%2&&t.push(0)}}function Z(t,e,n){return!(n<1)&&!(e/8*t*n>0xffffffff)}class Y extends ${constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(t,e,n,r,i){i=i||{},this.clearHeaders(),this.newWavFile_(t,e,n,r,i)}fromBuffer(t,e=!0){super.fromBuffer(t,e),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(t=!1,e=Float64Array){let n=new e(this.data.samples.length/(this.dataType.bits/8));return(W(this.data.samples,this.dataType,n,0,this.data.samples.length),!t&&this.fmt.numChannels>1)?function(t,e,n=Float64Array){let r=[];for(let i=0;i<e;i++)r[i]=new n(t.length/e);for(let n=0;n<e;n++)for(let i=n,a=0;i<t.length;i+=e,a++)r[n][a]=t[i];return r}(n,this.fmt.numChannels,e):n}getSample(t){if((t*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw Error("Range error");return V(this.data.samples.slice(t,t+this.dataType.bits/8),this.dataType)}setSample(t,e){if((t*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw Error("Range error");F(e,this.dataType,this.data.samples,t,!0)}getiXML(){return this.iXML.value}setiXML(t){if("string"!=typeof t)throw TypeError("iXML value must be a string.");this.iXML.value=t,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(t){if("string"!=typeof t)throw TypeError("_PMX value must be a string.");this._PMX.value=t,this._PMX.chunkId="_PMX"}newWavFile_(t,e,n,r,i){i.container||(i.container="RIFF"),this.container=i.container,this.bitDepth=n,r=function(t){let e=[];if(t.length>0){if(t[0].constructor!==Number){e=new Float64Array(t[0].length*t.length);for(let n=0,r=t[0].length,i=0;n<r;n++)for(let r=0,a=t.length;r<a;r++,i++)e[i]=t[r][n]}else e=t}return e}(r),this.updateDataType_();let a=this.dataType.bits/8;this.data.samples=new Uint8Array(r.length*a),z(r,this.dataType,this.data.samples,0,!0),this.makeWavHeader_(n,t,e,a,this.data.samples.length,i),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(t,e,n,r,i,a){"4"==t?this.createADPCMHeader_(t,e,n,r,i,a):"8a"==t||"8m"==t?this.createALawMulawHeader_(t,e,n,r,i,a):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(t)||e>2?this.createExtensibleHeader_(t,e,n,r,i,a):this.createPCMHeader_(t,e,n,r,i,a)}createPCMHeader_(t,e,n,r,i,a){this.container=a.container,this.chunkSize=36+i,this.format="WAVE",this.bitDepth=t,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[t]||65534,numChannels:e,sampleRate:n,byteRate:e*r*n,blockAlign:e*r,bitsPerSample:parseInt(t,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(t,e,n,r,i,a){this.createPCMHeader_(t,e,n,r,i,a),this.chunkSize=40+i,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*i}}createExtensibleHeader_(t,e,n,r,i,a){let s;this.createPCMHeader_(t,e,n,r,i,a),this.chunkSize=60+i,this.fmt.chunkSize=40,this.fmt.bitsPerSample=(parseInt(t,10)-1|7)+1,this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(t,10),this.fmt.dwChannelMask=(s=0,1===e?s=4:2===e?s=3:4===e?s=51:6===e?s=63:8===e&&(s=1599),s),this.fmt.subformat=[1,1048576,0xaa000080,0x719b3800]}createALawMulawHeader_(t,e,n,r,i,a){this.createPCMHeader_(t,e,n,r,i,a),this.chunkSize=40+i,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:i}}bitDepthFromFmt_(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&54>parseInt(this.bitDepth,10))return!0;throw Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:(parseInt(this.bitDepth,10)-1|7)+1,fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){var t,e;if(this.validateBitDepth_(),t=this.fmt.numChannels,e=this.fmt.bitsPerSample,t<1||t*e/8>65535)throw Error("Invalid number of channels.");if(!Z(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw Error("Invalid sample rate.")}}class Q extends Y{getTag(t){let e=this.getTagIndex_(t);return null!==e.TAG?this.LIST[e.LIST].subChunks[e.TAG].value:null}setTag(t,e){t=function(t){if(t.constructor!==String)throw Error("Invalid tag name.");if(t.length<4)for(let e=0,n=4-t.length;e<n;e++)t+=" ";return t}(t);let n=this.getTagIndex_(t);null!==n.TAG?(this.LIST[n.LIST].subChunks[n.TAG].chunkSize=e.length+1,this.LIST[n.LIST].subChunks[n.TAG].value=e):null!==n.LIST?this.LIST[n.LIST].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}):(this.LIST.push({chunkId:"LIST",chunkSize:8+e.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:t,chunkSize:e.length+1,value:e}))}deleteTag(t){let e=this.getTagIndex_(t);return null!==e.TAG&&(this.LIST[e.LIST].subChunks.splice(e.TAG,1),!0)}listTags(){let t=this.getLISTIndex("INFO"),e={};if(null!==t)for(let n=0,r=this.LIST[t].subChunks.length;n<r;n++)e[this.LIST[t].subChunks[n].chunkId]=this.LIST[t].subChunks[n].value;return e}getLISTIndex(t){for(let e=0,n=this.LIST.length;e<n;e++)if(this.LIST[e].format==t)return e;return null}getTagIndex_(t){let e={LIST:null,TAG:null};for(let n=0,r=this.LIST.length;n<r;n++)if("INFO"==this.LIST[n].format){e.LIST=n;for(let r=0,i=this.LIST[n].subChunks.length;r<i;r++)if(this.LIST[n].subChunks[r].chunkId==t){e.TAG=r;break}break}return e}}class J extends Q{listCuePoints(){let t=this.getCuePoints_();for(let e=0,n=t.length;e<n;e++)t[e].position=t[e].dwSampleOffset/this.fmt.sampleRate*1e3,t[e].dwSampleLength?(t[e].end=t[e].dwSampleLength/this.fmt.sampleRate*1e3,t[e].end+=t[e].position):t[e].end=null,delete t[e].value;return t}setCuePoint(t){this.cue.chunkId="cue ",t.label||(t.label="");let e=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],t.dwSampleOffset=t.position*this.fmt.sampleRate/1e3,t.dwSampleLength=0,t.end&&(t.dwSampleLength=t.end*this.fmt.sampleRate/1e3-t.dwSampleOffset),0===e.length?this.setCuePoint_(t,1):this.setCuePointInOrder_(e,t),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(t){this.cue.chunkId="cue ";let e=this.getCuePoints_();this.clearLISTadtl_();let n=this.cue.points.length;this.cue.points=[];for(let r=0;r<n;r++)r+1!==t&&this.setCuePoint_(e[r],r+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(t,e){let n=this.getLISTIndex("adtl");if(null!==n)for(let r=0,i=this.LIST[n].subChunks.length;r<i;r++)this.LIST[n].subChunks[r].dwName==t&&(this.LIST[n].subChunks[r].value=e)}getCuePoints_(){let t=[];for(let e=0;e<this.cue.points.length;e++){let n=this.cue.points[e],r=this.getDataForCuePoint_(n.dwName);r.label=r.value?r.value:"",r.dwPosition=n.dwPosition,r.fccChunk=n.fccChunk,r.dwChunkStart=n.dwChunkStart,r.dwBlockStart=n.dwBlockStart,r.dwSampleOffset=n.dwSampleOffset,t.push(r)}return t}getDataForCuePoint_(t){let e=this.getLISTIndex("adtl"),n={};return null!==e&&this.getCueDataFromLIST_(n,e,t),n}getCueDataFromLIST_(t,e,n){for(let r=0,i=this.LIST[e].subChunks.length;r<i;r++)if(this.LIST[e].subChunks[r].dwName==n){let n=this.LIST[e].subChunks[r];t.value=n.value||t.value,t.dwName=n.dwName||0,t.dwSampleLength=n.dwSampleLength||0,t.dwPurposeID=n.dwPurposeID||0,t.dwCountry=n.dwCountry||0,t.dwLanguage=n.dwLanguage||0,t.dwDialect=n.dwDialect||0,t.dwCodePage=n.dwCodePage||0}}setCuePoint_(t,e){this.cue.points.push({dwName:e,dwPosition:t.dwPosition?t.dwPosition:0,fccChunk:t.fccChunk?t.fccChunk:"data",dwChunkStart:t.dwChunkStart?t.dwChunkStart:0,dwBlockStart:t.dwBlockStart?t.dwBlockStart:0,dwSampleOffset:t.dwSampleOffset}),this.setLabl_(t,e)}setCuePointInOrder_(t,e){let n=!1;for(let r=0;r<t.length;r++)t[r].dwSampleOffset>e.dwSampleOffset&&!n?(this.setCuePoint_(e,r+1),this.setCuePoint_(t[r],r+2),n=!0):this.setCuePoint_(t[r],n?r+2:r+1);n||this.setCuePoint_(e,this.cue.points.length+1)}clearLISTadtl_(){for(let t=0,e=this.LIST.length;t<e;t++)"adtl"==this.LIST[t].format&&this.LIST.splice(t)}setLabl_(t,e){let n=this.getLISTIndex("adtl");null===n&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),n=this.LIST.length-1),this.setLabelText_(n,t,e),t.dwSampleLength&&this.setLtxtChunk_(n,t,e)}setLabelText_(t,e,n){this.LIST[t].subChunks.push({chunkId:"labl",chunkSize:4,dwName:n,value:e.label}),this.LIST[t].chunkSize+=12}setLtxtChunk_(t,e,n){this.LIST[t].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:n,dwSampleLength:e.dwSampleLength,dwPurposeID:e.dwPurposeID||0,dwCountry:e.dwCountry||0,dwLanguage:e.dwLanguage||0,dwDialect:e.dwDialect||0,dwCodePage:e.dwCodePage||0,value:e.label}),this.LIST[t].chunkSize+=28}}class K{constructor(t,e,n){var r;this.length_=t,this.scaleFactor_=(t-1)/e,this.interpolate=this.sinc,"point"===n.method?this.interpolate=this.point:"linear"===n.method?this.interpolate=this.linear:"cubic"===n.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,n.tension||0)),this.sincFilterSize_=n.sincFilterSize||1,this.kernel_=(r=n.sincWindow||tt,function(t){return(0===t?1:Math.sin(Math.PI*t)/(Math.PI*t))*r(t)})}point(t,e){return this.getClippedInput_(Math.round(this.scaleFactor_*t),e)}linear(t,e){let n=Math.floor(t=this.scaleFactor_*t);return(1-(t-=n))*this.getClippedInput_(n,e)+t*this.getClippedInput_(n+1,e)}cubic(t,e){let n=Math.floor(t=this.scaleFactor_*t),r=[this.getTangent_(n,e),this.getTangent_(n+1,e)],i=[this.getClippedInput_(n,e),this.getClippedInput_(n+1,e)],a=(t-=n)*t,s=t*a;return(2*s-3*a+1)*i[0]+(s-2*a+t)*r[0]+(-2*s+3*a)*i[1]+(s-a)*r[1]}sinc(t,e){let n=Math.floor(t=this.scaleFactor_*t),r=n-this.sincFilterSize_+1,i=n+this.sincFilterSize_,a=0;for(let n=r;n<=i;n++)a+=this.kernel_(t-n)*this.getClippedInput_(n,e);return a}getTangent_(t,e){return this.tangentFactor_*(this.getClippedInput_(t+1,e)-this.getClippedInput_(t-1,e))/2}getClippedInput_(t,e){return 0<=t&&t<this.length_?e[t]:0}}function tt(t){return Math.exp(-t/2*t/2)}const te={point:!1,linear:!1,cubic:!0,sinc:!0},tn={IIR:16,FIR:71},tr={IIR:class{constructor(t,e,n){let r=[];for(let i=0;i<t;i++)r.push(this.getCoeffs_({Fs:e,Fc:n,Q:.5/Math.sin(Math.PI/(2*t)*(i+.5))}));this.stages=[];for(let t=0;t<r.length;t++)this.stages[t]={b0:r[t].b[0],b1:r[t].b[1],b2:r[t].b[2],a1:r[t].a[0],a2:r[t].a[1],k:r[t].k,z:[0,0]}}filter(t){let e=t;for(let t=0,n=this.stages.length;t<n;t++)e=this.runStage_(t,e);return e}getCoeffs_(t){let e={};e.a=[],e.b=[];let n=this.preCalc_(t,e);return e.k=1,e.b.push((1-n.cw)/(2*n.a0)),e.b.push(2*e.b[0]),e.b.push(e.b[0]),e}preCalc_(t,e){let n={},r=2*Math.PI*t.Fc/t.Fs;return n.alpha=Math.sin(r)/(2*t.Q),n.cw=Math.cos(r),n.a0=1+n.alpha,e.a0=n.a0,e.a.push(-2*n.cw/n.a0),e.k=1,e.a.push((1-n.alpha)/n.a0),n}runStage_(t,e){let n=e*this.stages[t].k-this.stages[t].a1*this.stages[t].z[0]-this.stages[t].a2*this.stages[t].z[1],r=this.stages[t].b0*n+this.stages[t].b1*this.stages[t].z[0]+this.stages[t].b2*this.stages[t].z[1];return this.stages[t].z[1]=this.stages[t].z[0],this.stages[t].z[0]=n,r}reset(){for(let t=0;t<this.stages.length;t++)this.stages[t].z=[0,0]}},FIR:class{constructor(t,e,n){let r=2*Math.PI*n/e,i=0;this.filters=[];for(let e=0;e<=t;e++)e-t/2==0?this.filters[e]=r:(this.filters[e]=Math.sin(r*(e-t/2))/(e-t/2),this.filters[e]*=.54-.46*Math.cos(2*Math.PI*e/t)),i+=this.filters[e];for(let e=0;e<=t;e++)this.filters[e]/=i;this.z=this.initZ_()}filter(t){this.z.buf[this.z.pointer]=t;let e=0;for(let t=0,n=this.z.buf.length;t<n;t++)e+=this.filters[t]*this.z.buf[(this.z.pointer+t)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,e}reset(){this.z=this.initZ_()}initZ_(){let t=[];for(let e=0;e<this.filters.length-1;e++)t.push(0);return{buf:t,pointer:0}}}};function ti(t,e,n,r=null){r=r||{};let i=(n-e)/e+1,a=new Float64Array(t.length*i);r.method=r.method||"cubic";let s=new K(t.length,a.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(void 0===r.LPF&&(r.LPF=te[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";let i=tr[r.LPFType];n>e?function(t,e,n,r){for(let i=0,a=e.length;i<a;i++)e[i]=r.filter(n.interpolate(i,t));r.reset();for(let t=e.length-1;t>=0;t--)e[t]=r.filter(e[t])}(t,a,s,new i(r.LPForder||tn[r.LPFType],n,e/2)):function(t,e,n,r){for(let e=0,n=t.length;e<n;e++)t[e]=r.filter(t[e]);r.reset();for(let e=t.length-1;e>=0;e--)t[e]=r.filter(t[e]);ta(t,e,n)}(t,a,s,new i(r.LPForder||tn[r.LPFType],e,n/2))}else ta(t,a,s);return a}function ta(t,e,n){for(let r=0,i=e.length;r<i;r++)e[r]=n.interpolate(r,t)}class ts extends J{toRIFF(){let t=new Float64Array(to(this.data.samples.length,this.dataType.bits/8));W(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFF"})}toRIFX(){let t=new Float64Array(to(this.data.samples.length,this.dataType.bits/8));W(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,t,{container:"RIFX"})}toIMAADPCM(){if(8e3!==this.fmt.sampleRate)throw Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let t=new Int16Array(to(this.data.samples.length,2));W(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(t){let e={index:0,predicted:0,step:7},n=new Uint8Array(t.length),r=[],i=0,a=0;for(let s=0,o=t.length;s<o;s++)s%505==0&&0!=s&&(n.set(function(t,e){let n=function(t,e){x(t,e);let n=[];return n.push(255&t),n.push(t>>8&255),n.push(e.index),n.push(0),n}(t[0],e);for(let r=3,i=t.length;r<i;r+=2){let i=x(t[r],e),a=x(t[r+1],e);n.push(a<<4|i)}return n}(r,e),i),i+=256,r=[],a++),r.push(t[s]);let s=t.length/2;return s%2&&s++,n.slice(0,s+512+4*a)}(t),{container:this.correctContainer_()})}}fromIMAADPCM(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(t,e=256){let n={index:0,predicted:0,step:7},r=new Int16Array(2*t.length),i=[],a=0;for(let s=0,o=t.length;s<o;s++){if(s%e==0&&0!=s){let t=function(t,e){var n;e.predicted=(n=t[1]<<8|t[0])>32768?n-65536:n,e.index=t[2],e.step=A[e.index];let r=[e.predicted,e.predicted];for(let n=4,i=t.length;n<i;n++){let i=t[n],a=i>>4,s=a<<4^i;r.push(S(s,e)),r.push(S(a,e))}return r}(i,n);r.set(t,a),a+=t.length,i=[]}i.push(t[s])}return r}(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}toALaw(){this.assure16Bit_();let t=new Int16Array(to(this.data.samples.length,2));W(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(t){let e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=function(t){let e;let n=~(t=-32768==t?-32767:t)>>8&128;if(n||(t*=-1),t>32635&&(t=32635),t>=256){let n=P[t>>8&127],r=t>>n+3&15;e=n<<4|r}else e=t>>4;return 85^n^e}(t[n]);return e}(t),{container:this.correctContainer_()})}fromALaw(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(t){let e=new Int16Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=function(t){let e=0;(128&(t^=85))!=0&&(t&=-129,e=-1);let n=((240&t)>>4)+4,r=0;return r=4!=n?1<<n|(15&t)<<n-4|1<<n-5:t<<1|1,-8*(r=0===e?r:-r)}(t[n]);return e}(this.data.samples),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}toMuLaw(){this.assure16Bit_();let t=new Int16Array(to(this.data.samples.length,2));W(this.data.samples,this.dataType,t,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(t){let e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=function(t){let e,n,r;return 0!=(e=t>>8&128)&&(t=-t),(t+=132)>32635&&(t=32635),n=I[t>>7&255],r=t>>n+3&15,~(e|n<<4|r)}(t[n]);return e}(t),{container:this.correctContainer_()})}fromMuLaw(t="16"){this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(t){let e=new Int16Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=function(t){let e,n,r,i;return e=128&(t=~t),n=t>>4&7,r=15&t,i=E[n]+(r<<n+3),0!=e&&(i=-i),i}(t[n]);return e}(this.data.samples),{container:this.correctContainer_()}),"16"!=t&&this.toBitDepth(t)}toBitDepth(t,e=!0){let n=t,r=this.bitDepth;e||("32f"!=t&&(n=this.dataType.bits.toString()),r=""+this.dataType.bits),this.assureUncompressed_();let i=this.getSamples(!0),a=new Float64Array(i.length);!function(t,e,n,r){let i;if(["32f","64"].indexOf(e)>-1&&["32f","64"].indexOf(r)>-1){n.set(t);return}k(e),k(r);let a=(i=function(t){return t},e!=r&&(i=["32f","64"].includes(e)?b:["32f","64"].includes(r)?w:y),i),s={oldMin:Math.pow(2,parseInt(e,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(e,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};_(e,t,!0);for(let e=0,r=t.length;e<r;e++)n[e]=a(t[e],s);_(r,n,!1)}(i,r,a,n),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,t,a,{container:this.correctContainer_()})}toSampleRate(t,e){this.validateResample_(t);let n=this.getSamples(),r=[];if(n.constructor===Float64Array)r=ti(n,this.fmt.sampleRate,t,e);else for(let i=0;i<n.length;i++)r.push(ti(n[i],this.fmt.sampleRate,t,e));this.fromExisting_(this.fmt.numChannels,t,this.bitDepth,r,{container:this.correctContainer_()})}validateResample_(t){if(Z(this.fmt.numChannels,this.fmt.bitsPerSample,t)){if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw Error("wavefile can't change the sample rate of compressed files.")}else throw Error("Invalid sample rate.")}assure16Bit_(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}assureUncompressed_(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}correctContainer_(){return"RF64"==this.container?"RIFF":this.container}fromExisting_(t,e,n,r,i){let a=new J;Object.assign(this.fmt,a.fmt),Object.assign(this.fact,a.fact),Object.assign(this.ds64,a.ds64),Object.assign(this.data,a.data),this.newWavFile_(t,e,n,r,i)}}function to(t,e){let n=t/e;return n%2&&n++,n}class tu extends ts{constructor(t){super(),t&&this.fromBuffer(t)}fromBase64(t){this.fromBuffer(function(t){let e=new Uint8Array(256);for(let t=0;t<g.length;t++)e[g.charCodeAt(t)]=t;let n=.75*t.length;"="===t[t.length-1]&&(n--,"="===t[t.length-2]&&n--);let r=new Uint8Array(n);for(let n=0,i=0;n<t.length;n+=4){let a=e[t.charCodeAt(n)],s=e[t.charCodeAt(n+1)],o=e[t.charCodeAt(n+2)],u=e[t.charCodeAt(n+3)];r[i++]=a<<2|s>>4,r[i++]=(15&s)<<4|o>>2,r[i++]=(3&o)<<6|63&u}return r}(t))}toBase64(){return function(t){let e="";for(let n=0;n<t.length;n+=3)e+=g[t[n]>>2],e+=g[(3&t[n])<<4|t[n+1]>>4],e+=g[(15&t[n+1])<<2|t[n+2]>>6],e+=g[63&t[n+2]];return t.length%3==2?e=e.substring(0,e.length-1)+"=":t.length%3==1&&(e=e.substring(0,e.length-2)+"=="),e}(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(t){this.fromBase64(t.replace("data:audio/wav;base64,",""))}}var tl={};n=function(){function t(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function e(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function n(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof r&&r.global===r?r:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(r,a,s){var o=i.URL||i.webkitURL,u=document.createElement("a");a=a||r.name||"download",u.download=a,u.rel="noopener","string"==typeof r?(u.href=r,u.origin===location.origin?n(u):e(u.href)?t(r,a,s):n(u,u.target="_blank")):(u.href=o.createObjectURL(r),setTimeout(function(){o.revokeObjectURL(u.href)},4e4),setTimeout(function(){n(u)},0))}:"msSaveOrOpenBlob"in navigator?function(r,i,a){if(i=i||r.name||"download","string"!=typeof r){var s;navigator.msSaveOrOpenBlob((void 0===(s=a)?s={autoBom:!1}:"object"!=typeof s&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r),i)}else if(e(r))t(r,i,a);else{var o=document.createElement("a");o.href=r,o.target="_blank",setTimeout(function(){n(o)})}}:function(e,n,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var o="application/octet-stream"===e.type,u=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||o&&u||a)&&"undefined"!=typeof FileReader){var h=new FileReader;h.onloadend=function(){var t=h.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},h.readAsDataURL(e)}else{var c=i.URL||i.webkitURL,f=c.createObjectURL(e);s?s.location=f:location.href=f,s=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});i.saveAs=s.saveAs=s,tl=s},"function"==typeof define&&define.amd?define([],n):n();class th{constructor(){this.markers=[],this.audioContext=new(window.AudioContext||window.webkitAudioContext)}async getMarkersFromFile(t){return new Promise((e,n)=>{let r=new FileReader;r.readAsDataURL(t),r.onloadend=()=>{if("audio/wav"===t.type||"audio/wave"===t.type||"audio/x-wav"===t.type){let t=new tu,n=r.result.replace("data:","").replace(/^.+,/,"");t.fromBase64(n),e(t.listCuePoints())}else e([])},r.onerror=n})}async createFileFromBuffer(t,e){console.log("Exporting audio...");let n=new tu;n.fromScratch(2,this.audioContext.sampleRate,"32f",t),e.filter(t=>"top"!==t.position).forEach(t=>{n.setCuePoint({position:1e3*t.time})}),n.cue&&n.cue.points&&n.cue.points.forEach(t=>{t.dwPosition=t.dwSampleOffset});let r=new Blob([n.toBuffer()],{type:"audio/wav"});console.log("Saving file..."),(0,tl.saveAs)(r,"export.wav")}async createSampleDrumBuffer(t,e){console.log("Exporting audio... sample drum");let n=new tu;n.fromScratch(2,this.audioContext.sampleRate,"16",t);let r=new Blob([n.toBuffer()],{type:"audio/wav"});console.log("Saving file..."),(0,tl.saveAs)(r,"export.wav")}}var tc={},tf={};tf=function(t,e,n){if(e===self.location.origin)return t;var r=n?"import "+JSON.stringify(t)+";":"importScripts("+JSON.stringify(t)+");";return URL.createObjectURL(new Blob([r],{type:"application/javascript"}))};let td=new URL("onset-worker.6abc1a16.js",import.meta.url);tc=tf(td.toString(),td.origin,!0);class tp{constructor(t){this.morphaweb=t,this.worker=null,this.initWorker(),this.initKeyboardControls()}initWorker(){this.worker=new Worker(tc),this.worker.onmessage=t=>{if(this.setLoadingState(!1),t.data.error){console.error("Onset detection error:",t.data.error);return}t.data.onsets&&(console.log("onsets",t.data.onsets),this.morphaweb.markerHandler.createOnsetMarkers(t.data.onsets)),null!==t.data.bpm&&this.morphaweb.updateBPM(t.data.bpm)}}setLoadingState(t){let e=this.morphaweb.wavesurfer.container;t?e.classList.add("wavesurfer-loading"):e.classList.remove("wavesurfer-loading")}detectOnsets(t,e){if(!this.worker){console.error("Worker not initialized");return}this.setLoadingState(!0);let n=new Float32Array(t.length);for(let e=0;e<t.length;e++)n[e]=t[e];this.worker.postMessage({type:"processAudio",audioData:n,sampleRate:e})}destroy(){this.worker&&(this.worker.terminate(),this.worker=null)}initKeyboardControls(){document.addEventListener("keydown",t=>{if(t.key>="1"&&t.key<="9"||"0"===t.key){let e="0"===t.key?9:parseInt(t.key)-1;this.playSliceByIndex(e)}let e=["q","w","e","r","t","y","u","i","o","p"].indexOf(t.key.toLowerCase());-1!==e&&this.playSliceByIndex(e+10)})}playSliceByIndex(t){let e=this.morphaweb.markerHandler.getMarkers();if(t<e.length){let n=this.morphaweb.wavesurfer.backend.buffer.getChannelData(0),r=this.morphaweb.wavesurfer.backend.buffer.sampleRate,i=e[t],a=t<e.length-1?e[t+1]:this.morphaweb.wavesurfer.getDuration(),s=Math.round(i.time*r),o=Math.round(a.time*r),u=this.findNearestZeroCrossing(n,s),l=this.findNearestZeroCrossing(n,o),h=this.morphaweb.wavesurfer.addRegion({start:u/r,end:l/r,color:"hsla(358, 57%, 79%, 0.2)"});h.play(),h.once("out",()=>{h.remove()})}}findNearestZeroCrossing(t,e,n=100){let r=Math.max(0,e-n),i=Math.min(t.length-1,e+n);for(let a=0;a<=n;a++){let n=e+a;if(n<=i&&this.isZeroCrossing(t,n))return n;let s=e-a;if(s>=r&&this.isZeroCrossing(t,s))return s}return e}isZeroCrossing(t,e){if(e>=t.length-1)return!1;let n=t[e],r=t[e+1];return n<=0&&r>0||n>=0&&r<0}}class tm{constructor(t){this.morphaweb=t,this.createControls(),this.initializeDefaultValues()}createControls(){let t=document.createElement("div");t.className="algorithm-controls";let e=this.createSlider({id:"frame-size",label:"Frame Size",min:512,max:8192,value:1024,step:512}),n=this.createSlider({id:"hop-size",label:"Hop Size %",min:5,max:100,value:50,step:1}),r=this.createSlider({id:"sensitivity",label:"Sensitivity %",min:1,max:100,value:50,step:1}),i=this.createSlider({id:"odf-ratio",label:"ODF Ratio",min:0,max:100,value:50,step:10,helpText:"Higher values improve detection for percussive elements, lower values improve detection for pitch changes"});t.appendChild(e),t.appendChild(n),t.appendChild(r),t.appendChild(i);let a=document.querySelector(".controls");a.insertBefore(t,a.firstChild)}createSlider({id:t,label:e,min:n,max:r,value:i,step:a,helpText:s}){let o=document.createElement("div");o.className="slider-container";let u=document.createElement("div");u.className="slider-controls";let l=document.createElement("label");l.htmlFor=t,l.textContent=e;let h=document.createElement("input");h.type="range",h.id=t,h.min=n,h.max=r,h.value=i,h.step=a;let c=(i-n)/(r-n)*100;h.style.setProperty("--value",c+"%");let f=document.createElement("span");if(f.className="slider-value",f.textContent=Number(i).toFixed(String(a).split(".")[1]?.length||0),h.addEventListener("input",t=>{let e=(t.target.value-n)/(r-n)*100;h.style.setProperty("--value",e+"%"),f.textContent=Number(h.value).toFixed(String(a).split(".")[1]?.length||0),this.handleSliderChange()}),u.appendChild(l),u.appendChild(h),u.appendChild(f),o.appendChild(u),s){let t=document.createElement("div");t.className="slider-help-text",t.textContent=s,o.appendChild(t)}return o}handleSliderChange(){let t,e;let n=parseInt(document.getElementById("frame-size").value),r=parseInt(document.getElementById("hop-size").value),i=parseFloat(document.getElementById("sensitivity").value),a=parseInt(document.getElementById("odf-ratio").value),s=Math.floor(r/100*n),o=a/100;0===a?(t=["complex"],e=[1]):100===a?(t=["hfc"],e=[1]):(t=["hfc","complex"],e=[o,1-o]);let u={frameSize:n,hopSize:s,sensitivity:i/100,odfs:t,odfsWeights:e};this.morphaweb.onsetHandler&&this.morphaweb.onsetHandler.worker.postMessage({type:"updateParams",params:u})}initializeDefaultValues(){this.handleSliderChange()}}new class{constructor(){this.scrollPos=0,this.scrollMin=0,this.playOffset=0,this.wavesurfer=/*@__PURE__*/i(u).create({container:"#waveform",waveColor:"#ffd000",progressColor:"white",plugins:[l.create(),c.create()]}),this.dropHandler=new d(this),this.markerHandler=new v(this),this.controlsHandler=new m(this),this.wavHandler=new th,this.onsetHandler=new tp(this),this.algorithmControls=new tm(this),this.initAnalytics(),this.wavesurfer.on("ready",this.onReady.bind(this)),this.createInfoDisplay()}onReady=async()=>{this.scrollMin=Math.round(this.wavesurfer.container.scrollWidth/this.wavesurfer.getDuration()),this.scrollPos=this.scrollMin,this.markerHandler.addMarkers(this.wavHandler.markers)};initAnalytics(){document.getElementById("export").addEventListener("click",t=>{this.track("export")})}track(t){}detectOnsets(){let t=this.wavesurfer.backend.buffer;if(!t){console.error("No audio loaded");return}let e=t.getChannelData(0),n=t.sampleRate;this.onsetHandler.detectOnsets(e,n)}createInfoDisplay(){let t=document.createElement("div");t.id="audio-info",t.className="audio-info",this.bpmDisplay=document.createElement("div"),this.bpmDisplay.id="bpm-display",t.appendChild(this.bpmDisplay);let e=document.getElementById("waveform");e.parentNode.insertBefore(t,e.nextSibling)}updateBPM(t){this.bpmDisplay&&(this.bpmDisplay.textContent=`BPM: ${t}`)}},document.getElementById("version").textContent="v1.1";
//# sourceMappingURL=index.732219f5.js.map
