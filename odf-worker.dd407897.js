var e,t,r,o,a;let n;t={},r={},null==(o=(e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequired167)&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var o=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,o.call(a.exports,a,a.exports),a.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){r[e]=t},e.parcelRequired167=o),o.register,importScripts("./onset-worker.de4b4b23.js"),a=o("d9WA8"),n=null,async function(){try{let e=a.EssentiaWASM.EssentiaWASM;n=new a.Essentia(e)}catch(e){self.postMessage({error:"Failed to initialize essentia"})}}(),self.onmessage=async function(e){n||await new Promise(e=>{let t=()=>{n?e():setTimeout(t,100)};t()});let{frames:t,odfFunction:r,sampleRate:o,startIndex:a}=e.data;try{let e=t.map((e,t)=>({value:"hfc"===r?n.OnsetDetection(n.arrayToVector(e.magnitude),n.arrayToVector(new Float32Array(e.magnitude.length)),r,o):n.OnsetDetection(n.arrayToVector(e.magnitude),n.arrayToVector(e.phase),r,o),index:a+t}));self.postMessage({odfValues:e,odfFunction:r})}catch(e){console.error("ODF Worker error:",e),self.postMessage({error:e.message})}};
//# sourceMappingURL=odf-worker.dd407897.js.map
